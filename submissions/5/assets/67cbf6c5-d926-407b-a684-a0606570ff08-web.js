/*! permutive-javascript-sdk v15.3.1 (web) (built 2021-09-13T06:13:40.299Z) */(()=>{"use strict";var __webpack_modules__={7183:(e,t,n)=>{n.d(t,{h:()=>r});const r=e=>new i(e);class i{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){i.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[r,i,o]=t.data,s=e._callbacks[r];s&&(delete e._callbacks[r],s(i,o))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),r=[n,e];return new Promise((function(e,o){var s;if(t._callbacks[n]=function(t,n){if(t)return o(new Error(t.message));e(n)},i.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){i.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(r,[e.port2])}else t._worker.postMessage(r)}))}}},1828:(e,t,n)=>{n.d(t,{ap:()=>i,gz:()=>c});var r=n(3735);function i(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function o(e,t,n){return function(r){for(var i=Array(n.length+1),s=0;s<n.length;s++)i[s]=n[s];return i[n.length]=r,0===t?e.apply(null,i):o(e,t-1,i)}}var s={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function a(e){return s.hasOwnProperty(e)||(s[e]=o(r.bc,e-1,[])),s[e]}function c(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=a(r),o=e.map(t[0],i),s=1;s<r;s++)o=e.ap(o,t[s]);return o}}},276:(e,t,n)=>{n.d(t,{tS:()=>pe,oA:()=>ye,e5:()=>ae,md:()=>J,Qp:()=>Q,t9:()=>ne,DZ:()=>_e,Ew:()=>V,xH:()=>he,pR:()=>Ie,jV:()=>se,KB:()=>W,uK:()=>ve,Ce:()=>B,u4:()=>qe,GY:()=>X,DY:()=>ee,zT:()=>Y,ke:()=>F,fw:()=>Oe,G0:()=>oe,jj:()=>re,yL:()=>te});var r=n(3735),i=n(7341),o=n(9384),s=n(1885),a=(n(4268),n(4011)),c=n(7209),u=n(4814),l=n(4870),d=n(5605),m=(u.Od,u.Ce,u.ws,u.R3);u.Im;u.dC;function f(e){return function(t,n){if(void 0===n){var r=f(e);return function(e){return r(t,e)}}for(var i,o=0;o<n.length;o++)if(i=n[o],e.equals(i,t))return!0;return!1}}var g=function(e,t){return(0,r.zG)(e,v(t))},p=function(e,t,n){return(0,r.zG)(e,O(t,n))},h=function(e){var t=x(e);return function(e,n){return(0,r.zG)(e,t(n))}},w=function(e,t,n){return(0,r.zG)(e,M(t,n))},_=function(e){var t=D(e);return function(e,n){return(0,r.zG)(e,t(n))}},y=u.of,b=function(){return N},v=function(e){return function(t){return t.map((function(t){return e(t)}))}},k=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];"Left"===o._tag?t.push(o.left):n.push(o.right)}return(0,l.s4)(t,n)},E=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},q=function(e){return E((function(t,n){return e(n)}))},S=q(r.yR),T=function(e){return function(t){return function(n){return n.reduce((function(n,r,i){return e.concat(n,t(i,r))}),e.empty)}}},O=function(e,t){return P(e,(function(e,n,r){return t(n,r)}))},x=function(e){var t=T(e);return function(e){return t((function(t,n){return e(n)}))}},P=function(e,t){return function(n){for(var r=n.length,i=e,o=0;o<r;o++)i=t(o,i,n[o]);return i}},M=function(e,t){return I(e,(function(e,n,r){return t(n,r)}))},I=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},D=function(e){var t=A(e);return function(e){return t((function(t,n){return e(n)}))}},C=function(e){return function(t){return p(t,e.of(b()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,r.zG)(e,m(t))}})),n)}))}},A=function(e){return function(t){return P(e.of(b()),(function(n,i,o){return e.ap(e.map(i,(function(e){return function(t){return(0,r.zG)(e,m(t))}})),t(n,o))}))}},j="ReadonlyArray",L={URI:j,map:g},R=((0,i.OV)(L),{URI:j,compact:S,separate:k}),U={URI:j,map:g,reduce:p,foldMap:h,reduceRight:w,traverse:_,sequence:C},N=((0,d.BL)(U,R),(0,d.Fj)(U,R),u.oo,u.cS),z=(o.F4,u.w6,u.QI,u.Ss,function(e){return 0===e.length}),G=s.Od,B=s.Ce,K=(s.ws,s.R3),W=(s.Im,function(e,t){return e<=0?[]:s.KB(t)(e)});var $=s.dC,F=function(e){return function(t){return $(e,t)?Z(t):t.slice(0,e)}};var H=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function Y(e){return function(t){var n=ie(H(t,e))(t);return{init:n[0],rest:n[1]}}}var J=function(e){return function(t){return e<=0||z(t)?Z(t):e>=t.length?[]:t.slice(e,t.length)}};function Q(e){return function(t){return t.slice(H(t,e))}}function V(e){return function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}(e)}var Z=function(e){return e.slice()},X=function(e){return z(e)?[]:e.slice().reverse()},ee=function(e){return function(t){return t.length<=1?Z(t):t.slice().sort(e.compare)}},te=function(e,t,n){for(var r=[],i=Math.min(e.length,t.length),o=0;o<i;o++)r[o]=n(e[o],t[o]);return r};var ne=f,re=function(e){var t=s.jj(e);return function(e){return G(e)?t(e):Z(e)}},ie=function(e){return function(t){return e>=1&&G(t)?s.lx(e)(t):z(t)?[Z(t),[]]:[[],Z(t)]}};function oe(e){var t=s.G0(e);return function(n,r){if(void 0===r){var i=oe(e);return function(e){return i(e,n)}}return G(n)&&G(r)?t(r)(n):G(n)?Z(n):Z(r)}}function se(e){var t=ne(e);return function(n,r){if(void 0===r){var i=se(e);return function(e){return i(e,n)}}return n.filter((function(e){return t(e,r)}))}}function ae(e){var t=ne(e);return function(n,r){if(void 0===r){var i=ae(e);return function(e){return i(e,n)}}return n.filter((function(e){return!t(e,r)}))}}var ce=function(e,t){return(0,r.zG)(e,ge(t))},ue=function(e,t,n){return(0,r.zG)(e,qe(t,n))},le=function(e){var t=Ee(e);return function(e,n){return(0,r.zG)(e,t(n))}},de=function(e,t,n){return(0,r.zG)(e,Te(t,n))},me=function(e){var t=Oe(e);return function(e,n){return(0,r.zG)(e,t(n))}},fe=s.of,ge=function(e){return function(t){return t.map((function(t){return e(t)}))}},pe=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},he=pe(r.yR),we=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},_e=function(e){return we((function(t,n){return e(n)}))},ye=_e(r.yR),be=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];"Left"===o._tag?t.push(o.left):n.push(o.right)}return(0,l.s4)(t,n)},ve=function(e){return ke((function(t,n){return e(n)}))},ke=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?r.push(o):n.push(o)}return(0,l.s4)(n,r)}},Ee=x,qe=O,Se=P,Te=M,Oe=function(e){var t=Pe(e);return function(e){return t((function(t,n){return e(n)}))}},xe=function(e){return function(t){return ue(t,e.of([]),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,r.zG)(e,K(t))}})),n)}))}},Pe=function(e){return function(t){return Se(e.of([]),(function(n,i,o){return e.ap(e.map(i,(function(e){return function(t){return(0,r.zG)(e,K(t))}})),t(n,o))}))}},Me="Array",Ie=function(e){return(0,c.Zt)((function(t,n){for(var r=t.length,i=n.length,o=Math.min(r,i),s=0;s<o;s++){var c=e.compare(t[s],n[s]);if(0!==c)return c}return a.Df.compare(r,i)}))},De={URI:Me,map:ce},Ce=((0,i.OV)(De),{URI:Me,compact:ye,separate:be}),Ae={URI:Me,map:ce,reduce:ue,foldMap:le,reduceRight:de,traverse:me,sequence:xe};(0,d.BL)(Ae,Ce),(0,d.Fj)(Ae,Ce),s.oo,o.F4,s.w6,s.QI,s.Ss},70:(e,t,n)=>{n.d(t,{g1:()=>h,G5:()=>p,dO:()=>m,Pd:()=>y,tS:()=>_,g_:()=>T,ij:()=>P,fS:()=>O,nM:()=>v,tO:()=>k,t$:()=>s,UI:()=>d,Vn:()=>b,EQ:()=>S,F2:()=>a,LF:()=>x,i$:()=>I,Y3:()=>M});var r=n(3735),i=n(7341),o=n(9384),s=o.t$,a=o.F2,c=function(e,t){return(0,r.zG)(e,d(t))},u=function(e,t){return(0,r.zG)(e,g(t))},l="Either",d=function(e){return function(t){return v(t)?t:a(e(t.right))}},m={URI:l,map:c},f=a,g=function(e){return function(t){return v(t)?t:v(e)?e:a(t.right(e.right))}},p={URI:l,map:c,ap:u},h={URI:l,map:c,ap:u,of:f},w=function(e){return function(t){return v(t)?t:e(t.right)}},_=w,y=function(e,t){return function(n){return v(n)?s(e(n.left)):a(t(n.right))}},b=function(e){return function(t){return v(t)?s(e(t.left)):t}},v=(r.yR,o.nM),k=o.tO,E=function(e,t){return function(n){return v(n)?e(n.left):t(n.right)}},q=E,S=E,T=S,O=function(e){return function(t){return v(t)?e(t.left):t.right}},x=((0,i.OV)(m),function(e){return v(e)?a(e.left):s(e.right)}),P=function(e){return function(t){return null==t?s(e):a(t)}},M=function(e,t){try{return a(e())}catch(e){return s(t(e))}},I=q(r.yR,r.yR);o.F4,f(o.Xl)},4268:(e,t,n)=>{n.d(t,{f7:()=>r,n_:()=>i,Uz:()=>o,w4:()=>s});n(3735);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s={equals:function(e,t){return e===t}};s.equals},7341:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t){return function(n){return e.map(n,(function(e){return e(t)}))}}}n.d(t,{UI:()=>r,OV:()=>i})},1885:(e,t,n)=>{n.d(t,{Od:()=>c,dC:()=>u,ws:()=>l,Ce:()=>d,Im:()=>m,R3:()=>f,oo:()=>g,jj:()=>p,G0:()=>h,nI:()=>_,KB:()=>y,w6:()=>b,of:()=>E,lx:()=>q,Eh:()=>P,QI:()=>C,Ss:()=>A});var r=n(3735),i=n(7341),o=n(9384),s=n(4814),a=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},c=function(e){return e.length>0},u=function(e,t){return e<0||e>=t.length},l=function(e){return function(t){return a([e],t)}},d=l,m=function(e){return function(t){return a(a([],t),[e])}},f=m,g=function(e,t,n){if(c(n)){var r=w(n);return r.splice(e,0,t),r}return[t]},p=function(e){return function(t){if(1===t.length)return k(t);for(var n=[I(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},i=0,o=D(t);i<o.length;i++){r(o[i])}return n}},h=function(e){var t=p(e);return function(e){return function(n){return t((0,r.zG)(n,v(e)))}}},w=o.r1,_=function(e){return c(e)?o.G(e):o.YP},y=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},b=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]};function v(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var k=w,E=function(e){return[e]};s.xP,s.Lx;var q=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[k(t),[]]:[(0,r.zG)(t.slice(1,n),d(I(t))),t.slice(n)]}},S=function(e,t){return(0,r.zG)(e,T(t))},T=function(e){return O((function(t,n){return e(n)}))},O=function(e){return function(t){for(var n=[e(0,I(t))],r=1;r<t.length;r++)n.push(e(r,t[r]));return n}},x=(s.u4,s.OE,s.nq,s.iw,s.YM,"NonEmptyArray"),P=(s.ZN,s.Eh),M={URI:x,map:S},I=((0,i.OV)(M),o.F4,s.YM),D=function(e){return e.slice(1)};s.Z$,s.VV,s.Fp;function C(e,t){return void 0===t?d(e):(0,r.zG)(t,d(e))}var A=function(e,t){return(0,r.zG)(e,f(t))};s.ur},6567:(e,t,n)=>{n.d(t,{YP:()=>o,G:()=>s,DT:()=>a,Eh:()=>u,pR:()=>l,UI:()=>d,tS:()=>f,Uo:()=>g,pC:()=>p,Wi:()=>h,EQ:()=>_,g_:()=>y,fS:()=>b,ij:()=>v,Y3:()=>k});var r=n(3735),i=n(9384),o=(n(6017),n(4870),n(5605),i.YP),s=i.G;function a(e){return function(t){return e(t)?s(t):o}}var c=function(e){return"Left"===e._tag?o:s(e.right)},u=function(e){return{equals:function(t,n){return t===n||(h(t)?h(n):!h(n)&&e.equals(t.value,n.value))}}},l=function(e){return{equals:u(e).equals,compare:function(t,n){return t===n?0:p(t)?p(n)?e.compare(t.value,n.value):1:-1}}},d=function(e){return function(t){return h(t)?o:s(e(t.value))}},m=s,f=function(e){return function(t){return h(t)?o:e(t.value)}},g=(r.yR,c),p=i.pC,h=function(e){return"None"===e._tag},w=function(e,t){return function(n){return h(n)?e():t(n.value)}},_=w,y=_,b=function(e){return function(t){return h(t)?e():t.value}},v=function(e){return null==e?o:s(e)},k=function(e){try{return s(e())}catch(e){return o}};i.F4,m(i.Xl)},7209:(e,t,n)=>{n.d(t,{Zt:()=>s,Uz:()=>a,lt:()=>c,gt:()=>u,gf:()=>l,VV:()=>d,Fp:()=>m});var r=n(4268),i=n(3735),o=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:o(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=function(e){return function(t){return s((function(n,r){return t.compare(e(n),e(r))}))}},c=(i.W8,(0,i.a9)(0),function(e){return function(t,n){return-1===e.compare(t,n)}}),u=function(e){return function(t,n){return 1===e.compare(t,n)}},l=function(e){return function(t,n){return-1!==e.compare(t,n)}},d=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},m=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};r.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>r});n(3735);var r=function(e){return function(t){return!e(t)}}},4814:(e,t,n)=>{n.d(t,{R3:()=>_,Im:()=>w,ur:()=>B,QI:()=>K,cS:()=>m,Lx:()=>x,xP:()=>I,Eh:()=>L,ZN:()=>j,YM:()=>U,Od:()=>f,dC:()=>g,Z$:()=>N,Fp:()=>G,VV:()=>z,of:()=>q,Ce:()=>h,ws:()=>p,w6:()=>v,u4:()=>O,nq:()=>P,iw:()=>D,OE:()=>M,Ss:()=>W,oo:()=>y});var r,i=n(4268),o=n(3735),s=n(7341),a=n(9384),c=n(7209),u=function(e){return{concat:c.VV(e)}},l=function(e){return{concat:c.Fp(e)}};r=void 0;var d=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},m=a.Xl,f=a.Od,g=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return d([e],t)}},h=p,w=function(e){return function(t){return d(d([],t),[e])}},_=w,y=function(e,t,n){if(f(n)){var r=a.r1(n);return r.splice(e,0,t),r}return[t]},b=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},v=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]};function k(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var E=function(e,t){return(0,o.zG)(e,S(t))},q=a.ri,S=function(e){return T((function(t,n){return e(n)}))},T=function(e){return function(t){for(var n=[e(0,U(t))],r=1;r<t.length;r++)n.push(e(r,t[r]));return n}},O=function(e,t){return M(e,(function(e,n,r){return t(n,r)}))},x=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},P=function(e,t){return D(e,(function(e,n,r){return t(n,r)}))},M=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},I=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,i){return e.concat(n,t(i+1,r))}),t(0,n[0]))}}},D=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},C=a.YM,A="ReadonlyNonEmptyArray",j=function(e){return{show:function(t){return"["+t.map(e.show).join(", ")+"]"}}},L=function(e){return(0,i.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},R={URI:A,map:E},U=((0,s.OV)(R),a.F4,C),N=(a.Gb,function(e){return e[e.length-1]}),z=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},G=function(e){var t=l(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}};function K(e,t){return void 0===t?h(e):(0,o.zG)(t,h(e))}var W=function(e,t){return(0,o.zG)(e,k([t]))}},4870:(e,t,n)=>{n.d(t,{s4:()=>o});var r=n(3735),i=n(7341),o=function(e,t){return{left:e,right:t}},s=function(e){return function(t){return o(u(t),e(l(t)))}},a="Separated",c={URI:a,map:function(e,t){return(0,r.zG)(e,s(t))}},u=((0,i.OV)(c),function(e){return e.left}),l=function(e){return e.right}},5151:(e,t,n)=>{n.d(t,{tD:()=>s,UI:()=>l,of:()=>m,dO:()=>p,PM:()=>h,Hi:()=>w,UA:()=>_});var r=n(3735),i=n(7341),o=n(9384),s=function(e){return function(){return Promise.resolve(e())}};var a=function(e,t){return(0,r.zG)(e,l(t))},c=function(e,t){return(0,r.zG)(e,d(t))},u=function(e,t){return(0,r.zG)(e,f(t))},l=function(e){return function(t){return function(){return t().then(e)}}},d=function(e){return function(t){return function(){return Promise.all([t(),e()]).then((function(e){return(0,e[0])(e[1])}))}}},m=function(e){return function(){return Promise.resolve(e)}},f=function(e){return function(t){return function(){return t().then((function(t){return e(t)()}))}}},g="Task";var p={URI:g,map:a},h=((0,i.OV)(p),{URI:g,of:m}),w={URI:g,map:a,ap:c},_={URI:g,map:a,of:m,ap:c,chain:u};r.yR,o.F4,m(o.Xl)},1763:(e,t,n)=>{function r(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{Do:()=>Y,ak:()=>J,tS:()=>G,Uo:()=>C,Yo:()=>H,fS:()=>A,t$:()=>P,F2:()=>M,Y3:()=>j});var i=n(1828),o=n(70),s=n(3735),a=n(7341);function c(e){return(0,s.ls)(o.F2,e.of)}function u(e){return(0,s.ls)(o.t$,e.of)}function l(e){return function(t){return e.map(t,o.F2)}}function d(e){return function(t){return e.map(t,o.t$)}}function m(e){return(0,a.UI)(e,o.dO)}function f(e){return(0,i.ap)(e,o.G5)}function g(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?e.of(n):t(n.right)}))}}}function p(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t():e.of(n)}))}}}function h(e){return function(t,n){return function(r){return e.map(r,o.Pd(t,n))}}}function w(e){return function(t){return function(n){return e.map(n,o.Vn(t))}}}function _(e){return function(t,n){return function(r){return e.map(r,o.EQ(t,n))}}}function y(e){return function(t,n){return function(r){return e.chain(r,o.EQ(t,n))}}}function b(e){return function(t){return function(n){return e.chain(n,o.EQ(t,e.of))}}}function v(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t(n.left):e.of(n)}))}}}function k(e){var t=v(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return o.nM(e)?e:o.t$(t)}))}))}}function E(e){return function(t){return function(n){return e.chain(n,o.EQ((function(n){return e.map(t(n),o.t$)}),(function(t){return e.of(o.F2(t))})))}}}function q(e){return function(t){return e.map(t,o.LF)}}function S(e){return function(t){return e.map(t,o.i$)}}var T=n(9384);function O(e){return function(t){return function(n){return e.fromEither(T.Wi(n)?T.t$(t()):T.F2(n.value))}}}var x=n(5151),P=u(x.PM),M=c(x.PM),I=l(x.dO),D=d(x.dO),C=(x.tD,x.tD,x.of),A=(x.tD,x.dO,x.UA,b(x.UA)),j=function(e,t){return function(){return e().then(T.F2,(function(e){return T.t$(t(e))}))}},L=(x.dO,x.UA,x.UA,x.UA,x.dO,function(e,t){return(0,s.zG)(e,N(t))}),R=function(e,t){return(0,s.zG)(e,z(t))},U=function(e,t){return(0,s.zG)(e,G(t))},N=m(x.dO),z=(x.dO,x.dO,f(x.Hi)),G=g(x.UA),B=(x.UA,M),K="TaskEither";var W={URI:K,map:L},$=((0,a.OV)(W),{URI:K,map:L,ap:R,chain:U}),F={URI:K,fromEither:C},H=O(F);var Y=B(T.F4),J=r($);B(T.Xl)},5605:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{Fj:()=>r,BL:()=>i})},3735:(e,t,n)=>{n.d(t,{yR:()=>r,MZ:()=>i,a9:()=>o,W8:()=>s,Q1:()=>a,ls:()=>c,bc:()=>u,zG:()=>l,SK:()=>d});function r(e){return e}var i=r;function o(e){return function(){return e}}var s=o(!0),a=o(void 0);function c(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(i(r(n(t(e.apply(this,arguments)))))))))}}}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function l(e,t,n,r,i,o,s,a,c,u,l,d,m,f,g,p,h,w,_,y){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return s(o(i(r(n(t(e))))));case 8:return a(s(o(i(r(n(t(e)))))));case 9:return c(a(s(o(i(r(n(t(e))))))));case 10:return u(c(a(s(o(i(r(n(t(e)))))))));case 11:return l(u(c(a(s(o(i(r(n(t(e))))))))));case 12:return d(l(u(c(a(s(o(i(r(n(t(e)))))))))));case 13:return m(d(l(u(c(a(s(o(i(r(n(t(e))))))))))));case 14:return f(m(d(l(u(c(a(s(o(i(r(n(t(e)))))))))))));case 15:return g(f(m(d(l(u(c(a(s(o(i(r(n(t(e))))))))))))));case 16:return p(g(f(m(d(l(u(c(a(s(o(i(r(n(t(e)))))))))))))));case 17:return h(p(g(f(m(d(l(u(c(a(s(o(i(r(n(t(e))))))))))))))));case 18:return w(h(p(g(f(m(d(l(u(c(a(s(o(i(r(n(t(e)))))))))))))))));case 19:return _(w(h(p(g(f(m(d(l(u(c(a(s(o(i(r(n(t(e))))))))))))))))));case 20:return y(_(w(h(p(g(f(m(d(l(u(c(a(s(o(i(r(n(t(e)))))))))))))))))))}}var d=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{Wi:()=>i,pC:()=>o,YP:()=>s,G:()=>a,nM:()=>c,tO:()=>u,t$:()=>l,F2:()=>d,ri:()=>m,Od:()=>f,YM:()=>g,Gb:()=>p,Xl:()=>h,F4:()=>w,e$:()=>_,r1:()=>y});var r=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},i=function(e){return"None"===e._tag},o=function(e){return"Some"===e._tag},s={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},m=function(e){return[e]},f=function(e){return e.length>0},g=function(e){return e[0]},p=function(e){return e.slice(1)},h=[],w={},_=Object.prototype.hasOwnProperty,y=function(e){return r([e[0]],e.slice(1))}},4011:(e,t,n)=>{n.d(t,{Eq:()=>r,Df:()=>i});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};r.equals,i.compare},2751:(e,t,n)=>{n.d(t,{Eq:()=>r,Df:()=>i});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}}},655:(e,t,n)=>{n.d(t,{_T:()=>r,mG:()=>i});function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}Object.create;Object.create},477:e=>{var t=window.URL||window.webkitURL;e.exports=function(e,n,r,i){try{try{var o;try{o=new window.Blob([e])}catch(t){(o=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),o=o.getBlob()}var s=t.createObjectURL(o),a=new window[n](s,r);return t.revokeObjectURL(s),a}catch(t){return new window[n]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new window[n](i,r)}}},5506:(e,t,n)=>{n.d(t,{A:()=>r});class r{constructor(){this.addons={facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"48f76c98-1a2a-4cff-a608-7244a358959f",tt:"EveryTime",sc:71851,c:{},wc:{}},{id:"960992d1-33f2-4b99-ad97-e610977d8578",tt:"EveryTime",sc:71852,c:{},wc:{}},{id:"4c545c1c-f895-418b-aa59-c1f5a65f923a",tt:"EveryTime",sc:14081,c:{},wc:{}},{id:"0ed6506e-86b6-4dc9-a8b5-d789ad83f9d5",tt:"EveryTime",sc:75203,c:{},wc:{}},{id:"d2ee1aa0-cf11-4c91-b82b-5b70b53cb992",tt:"EveryTime",sc:40973,c:{},wc:{}},{id:"0086e344-4ff0-4ba6-8552-973092db1f0f",tt:"EveryTime",sc:30411,c:{},wc:{}},{id:"68b5b24b-d79e-4e03-9b65-cf01289449a6",tt:"EveryTime",sc:32627,c:{},wc:{}},{id:"fe5ee88a-e5bb-4770-a08a-c9b9c0476fa4",tt:"EveryTime",sc:30412,c:{},wc:{}},{id:"cbe45365-9b60-44af-9b76-d306d4e7c04b",tt:"EveryTime",sc:30414,c:{},wc:{}},{id:"9ea91ee7-9543-44db-866f-e67efa78781a",tt:"EveryTime",sc:30415,c:{},wc:{}},{id:"5757b1d1-c3d4-45c0-95dc-26b223675d60",tt:"EveryTime",sc:30416,c:{},wc:{}},{id:"af55c080-b20a-4866-8591-049b81db2d0e",tt:"EveryTime",sc:7925,c:{},wc:{}},{id:"aab9dcc2-75b6-4cec-a458-458017d1edb1",tt:"EveryTime",sc:8679,c:{},wc:{}},{id:"93b8fbb3-209b-49db-a922-11012e3f2d91",tt:"EveryTime",sc:11904,c:{},wc:{}},{id:"da97ee93-7559-4724-957a-80ddd12b7720",tt:"EveryTime",sc:12199,c:{},wc:{}},{id:"4aa0cf38-2d54-4c23-b029-dc8abd48e3d4",tt:"EveryTime",sc:13832,c:{},wc:{}},{id:"d8e48f59-3939-43f8-9490-d4879e29eac9",tt:"EveryTime",sc:29568,c:{},wc:{}},{id:"12065647-0156-4e21-a4d2-3962e0d686d7",tt:"EveryTime",sc:29567,c:{},wc:{}},{id:"332321cb-b988-4ebb-8a38-20eb9a89d76c",tt:"EveryTime",sc:28566,c:{},wc:{}},{id:"34cfbde8-a2ba-4ca2-9cd1-798cc42bd30a",tt:"EveryTime",sc:29581,c:{},wc:{}},{id:"cee41c2f-0cdb-4531-a484-0db6b8682917",tt:"EveryTime",sc:30417,c:{},wc:{}},{id:"2c053543-f3dd-4a51-ab6f-39cbca9a3ec5",tt:"EveryTime",sc:7927,c:{},wc:{}},{id:"8d10a12d-e2b5-42f5-81d8-f93c206a7506",tt:"EveryTime",sc:14831,c:{},wc:{}},{id:"b9b1a6b6-3654-499c-ae46-bea300e7a82d",tt:"EveryTime",sc:20463,c:{},wc:{}},{id:"910853c1-e023-4b1b-9f58-d458326483a0",tt:"EveryTime",sc:29564,c:{},wc:{}},{id:"a2f49540-2400-4c0e-9d96-00d5e5cad698",tt:"EveryTime",sc:7981,c:{},wc:{}},{id:"eaf16920-7523-47ca-8afc-77930f37900b",tt:"EveryTime",sc:10339,c:{},wc:{}},{id:"06f21b13-e88d-4480-a1b2-0b3d44925511",tt:"EveryTime",sc:11202,c:{},wc:{}},{id:"5fdf2a99-35cc-449e-8309-1c044a6dd631",tt:"EveryTime",sc:13108,c:{},wc:{}},{id:"131bd485-ba0b-4de6-b927-e98574feafbe",tt:"EveryTime",sc:13449,c:{},wc:{}},{id:"3c6f23f6-67be-40f5-9ad6-b1379a44021c",tt:"EveryTime",sc:14851,c:{},wc:{}},{id:"71080b67-ec1f-4f57-b3d8-73fcda19384f",tt:"EveryTime",sc:13830,c:{},wc:{}},{id:"c948930f-547a-4e6b-b218-4d99b8561c0c",tt:"EveryTime",sc:27712,c:{},wc:{}},{id:"48b301f0-7b30-4592-a2d0-0f30e888e8ff",tt:"EveryTime",sc:27457,c:{},wc:{}},{id:"2c377cc3-03f9-4a6b-a063-c06016b1c7da",tt:"EveryTime",sc:23441,c:{},wc:{}},{id:"543b957d-d566-4644-973a-29a0b312b702",tt:"EveryTime",sc:14748,c:{},wc:{}},{id:"f51fc5c2-2897-4b0b-97ac-db0ecb90d7d0",tt:"EveryTime",sc:14858,c:{},wc:{}},{id:"aacfdfda-d26e-4fc5-ba61-4f7658a5fac6",tt:"EveryTime",sc:13829,c:{},wc:{}},{id:"b4c53f70-ce7b-4be7-b19d-15f2e505de2b",tt:"EveryTime",sc:28541,c:{},wc:{}},{id:"1b98f1f3-cd61-495d-b68e-aca099b5cfc3",tt:"EveryTime",sc:29575,c:{},wc:{}},{id:"712ae980-9e2b-47f9-99f6-ee5f05ea8471",tt:"EveryTime",sc:29579,c:{},wc:{}},{id:"b2d1aea9-159f-4a0c-9cfc-c9b4adc4c198",tt:"EveryTime",sc:29574,c:{},wc:{}},{id:"b67786e8-85e3-4f8c-84b7-1f9569aed52e",tt:"EveryTime",sc:8015,c:{},wc:{}},{id:"269d2fd1-ea17-4c9b-9576-4a784c285ff2",tt:"EveryTime",sc:8421,c:{},wc:{}},{id:"3c914c42-a204-4293-b704-40ffec52a02b",tt:"EveryTime",sc:9831,c:{},wc:{}},{id:"5920bdb5-d95a-43e2-ad1f-d70ca880936a",tt:"EveryTime",sc:10115,c:{},wc:{}},{id:"9fd82d2f-52b4-442d-9e76-924745433b66",tt:"EveryTime",sc:10116,c:{},wc:{}},{id:"3ccc9990-7d02-4b43-9b06-3bdb7d8af28e",tt:"EveryTime",sc:10463,c:{},wc:{}},{id:"5943b9c0-87b0-4502-8f83-a922612cf1e9",tt:"EveryTime",sc:10622,c:{},wc:{}},{id:"b5cf3963-9963-4f5a-aff1-0afb4a7b7f5b",tt:"EveryTime",sc:13640,c:{},wc:{}},{id:"d7f8bd9c-d12c-4716-b704-dc65f0cb56c1",tt:"EveryTime",sc:13833,c:{},wc:{}},{id:"378c9e0d-b9f1-4901-a842-9df079180482",tt:"EveryTime",sc:14868,c:{},wc:{}},{id:"db3630f3-4ad4-4f28-9a73-330af3f0c1a7",tt:"EveryTime",sc:14922,c:{},wc:{}},{id:"07f315fd-153e-4fb0-94f9-b663e9c3bbfa",tt:"EveryTime",sc:16243,c:{},wc:{}},{id:"31d33c99-52c0-44a6-b47e-ce38d90c78f5",tt:"EveryTime",sc:17299,c:{},wc:{}},{id:"5a0ecef7-17ec-42f2-bdb4-0fdf3771bf9c",tt:"EveryTime",sc:18570,c:{},wc:{}},{id:"77efd1da-e96f-4de9-8b37-ce1f4288a0d8",tt:"EveryTime",sc:13828,c:{},wc:{}},{id:"9d24c43b-f534-4f46-a5d0-301a16557a5b",tt:"EveryTime",sc:13852,c:{},wc:{}},{id:"ebecdae4-1467-4373-880b-c190afb51faf",tt:"EveryTime",sc:14918,c:{},wc:{}},{id:"3a3e55e0-ad36-432f-ba2f-fe92a17880c2",tt:"EveryTime",sc:17301,c:{},wc:{}},{id:"cf278684-986c-4b38-81ac-afa413de5510",tt:"EveryTime",sc:20177,c:{},wc:{}},{id:"afa0ae03-1e5e-416f-9af9-ea2cf9bbf55d",tt:"EveryTime",sc:20296,c:{},wc:{}},{id:"27214846-04f8-4e68-b661-e35c544c2bba",tt:"EveryTime",sc:29195,c:{},wc:{}},{id:"7d3ca916-0e58-424f-a320-a0614bb07218",tt:"EveryTime",sc:8301,c:{},wc:{}},{id:"526e5fae-1a26-4adb-a8ff-92c50b823bed",tt:"EveryTime",sc:13183,c:{},wc:{}},{id:"3e344137-e49f-417a-be86-5ec38327b2bb",tt:"EveryTime",sc:22156,c:{},wc:{}},{id:"c3380577-7f37-494f-9284-0dd37f947719",tt:"EveryTime",sc:32333,c:{},wc:{}},{id:"b79da73e-c40a-414f-8ea2-1e7533216cee",tt:"EveryTime",sc:32336,c:{},wc:{}},{id:"2e2d3d51-ee38-4d3a-802b-4552f3ecff2d",tt:"EveryTime",sc:32341,c:{},wc:{}},{id:"cae99a5c-20eb-497a-9e46-e14be25f741f",tt:"EveryTime",sc:32348,c:{},wc:{}},{id:"8f1e4737-0b6b-424d-aaf3-c3257486ede8",tt:"EveryTime",sc:13225,c:{},wc:{}},{id:"24818515-af74-4ce3-b381-9e1c4a8017bb",tt:"EveryTime",sc:13444,c:{},wc:{}},{id:"4f083b09-b68c-4c19-8ebb-474b0ce76193",tt:"EveryTime",sc:14924,c:{},wc:{}},{id:"a35478ee-456e-4db3-99a7-da4a76f87bc6",tt:"EveryTime",sc:22101,c:{},wc:{}},{id:"2c29ce74-3059-4454-b489-dd71df472e66",tt:"EveryTime",sc:28160,c:{},wc:{}},{id:"590b5761-74f9-4b4f-9f4c-b549f467ef4a",tt:"EveryTime",sc:29219,c:{},wc:{}},{id:"5339f27b-8d90-4134-a06a-181002f6bbf9",tt:"EveryTime",sc:28540,c:{},wc:{}},{id:"8c34b642-ea08-4459-a351-087becb9e196",tt:"EveryTime",sc:29585,c:{},wc:{}},{id:"3dcaa5f4-410c-4d57-82ed-04c9ad93d8ca",tt:"EveryTime",sc:14923,c:{},wc:{}},{id:"3e672429-c3f1-4197-be59-18541ba47ad2",tt:"EveryTime",sc:28538,c:{},wc:{}},{id:"80aaea92-5225-45ce-b3c1-c4bc042f381e",tt:"EveryTime",sc:29592,c:{},wc:{}},{id:"586e6ac3-1219-496c-bdb3-562a5e981e75",tt:"EveryTime",sc:8501,c:{},wc:{}},{id:"b7faa899-dd0a-46d9-97a7-40dc252fca56",tt:"EveryTime",sc:9702,c:{},wc:{}},{id:"3a207754-9a58-4f5d-9749-58a0ba188ae6",tt:"EveryTime",sc:11201,c:{},wc:{}},{id:"5e5a1f57-19ce-436c-b5f7-00e178b8f15d",tt:"EveryTime",sc:12475,c:{},wc:{}},{id:"6f036bf9-f3de-4048-9205-4602bc6627bf",tt:"EveryTime",sc:13445,c:{},wc:{}},{id:"6b854d47-40bb-4b65-b524-48e53f055ad6",tt:"EveryTime",sc:13855,c:{},wc:{}},{id:"96f7a717-81a5-4daa-8c0d-41ecfb190f23",tt:"EveryTime",sc:29590,c:{},wc:{}},{id:"b53d6259-9920-4b9b-afd8-9a278ff6918d",tt:"EveryTime",sc:29593,c:{},wc:{}},{id:"bd7c9e1a-c4ee-4708-b7a5-9284a72b588c",tt:"EveryTime",sc:32334,c:{},wc:{}},{id:"4f5ba495-9b2c-4307-abff-e8f2c20767b9",tt:"EveryTime",sc:7827,c:{},wc:{}},{id:"6229e725-2cad-48e6-b231-2fa79f31168c",tt:"EveryTime",sc:8502,c:{},wc:{}},{id:"20d4507b-d696-4927-add0-a757bed55f72",tt:"EveryTime",sc:13446,c:{},wc:{}},{id:"b03b54a9-f4a5-4469-8b61-4cbf127b70c0",tt:"EveryTime",sc:14577,c:{},wc:{}},{id:"a9c9c1fa-3d39-40b6-8d8a-1202734ef3de",tt:"EveryTime",sc:14830,c:{},wc:{}},{id:"5ab87078-bd2f-4ce5-81cd-7aa7d940e77f",tt:"EveryTime",sc:14919,c:{},wc:{}},{id:"315ee806-10b3-4089-8b36-65693729822e",tt:"EveryTime",sc:19814,c:{},wc:{}},{id:"379b2227-795e-4135-8da4-f26a895e19ac",tt:"EveryTime",sc:21794,c:{},wc:{}},{id:"2327015d-a057-4d19-a41a-766fe6e33057",tt:"EveryTime",sc:25178,c:{},wc:{}},{id:"af3d9471-590e-4f9d-912f-caaa8e97c18f",tt:"EveryTime",sc:22851,c:{},wc:{}},{id:"ec5dedd6-0f8e-429e-a6fa-3604cfd43873",tt:"EveryTime",sc:28519,c:{},wc:{}},{id:"e647221f-1a0a-4414-ae62-0422aabb3146",tt:"EveryTime",sc:27734,c:{},wc:{}},{id:"c1987ed5-c8e3-427c-ba22-d11e378d1d5f",tt:"EveryTime",sc:29582,c:{},wc:{}},{id:"87772074-ba17-4300-9fc8-42291cac0bf0",tt:"EveryTime",sc:32344,c:{},wc:{}},{id:"59206936-e04e-49cf-b973-aa7e21721966",tt:"EveryTime",sc:9705,c:{},wc:{}},{id:"4f02031d-56bb-4bde-bf12-d790dd960ff2",tt:"EveryTime",sc:11893,c:{},wc:{}},{id:"db0e0ffb-0a17-4b68-b9cd-10e1154d49ad",tt:"EveryTime",sc:14823,c:{},wc:{}},{id:"087f52b8-1bb5-4b6c-a391-563765a03efb",tt:"EveryTime",sc:17295,c:{},wc:{}},{id:"7886a537-fd54-4f9d-b0d3-c6dac948a686",tt:"EveryTime",sc:49915,c:{},wc:{}},{id:"31135dfe-60a2-4d4a-938b-21f3e642533e",tt:"EveryTime",sc:29576,c:{},wc:{}},{id:"4e413c56-0a6e-445f-8e6b-76271aeb3fe8",tt:"EveryTime",sc:7834,c:{},wc:{}},{id:"a8598c11-e49f-4aa9-aebb-0fef13a058a3",tt:"EveryTime",sc:13448,c:{},wc:{}},{id:"9f7e7b22-a4cf-4e1b-81c9-8b138dd6edf8",tt:"EveryTime",sc:21290,c:{},wc:{}},{id:"40bce4d3-98aa-4450-bd5b-9c85c81636ee",tt:"EveryTime",sc:24408,c:{},wc:{}},{id:"df5e61bf-b9cb-4877-8f04-57331c0535b6",tt:"EveryTime",sc:29572,c:{},wc:{}},{id:"dcff063e-4321-476d-83aa-c3c1a87289d8",tt:"EveryTime",sc:32319,c:{},wc:{}},{id:"32c72112-0585-44b8-8754-ea5df11bc086",tt:"EveryTime",sc:32347,c:{},wc:{}},{id:"42eb034c-c3c5-4f54-a98f-5ed3dfaa84ce",tt:"EveryTime",sc:7835,c:{},wc:{}},{id:"cf46cce6-b567-4217-bb73-d5b6573d37b4",tt:"EveryTime",sc:7836,c:{},wc:{}},{id:"9e1ad6f9-01bd-453a-beea-8089bbe6c535",tt:"EveryTime",sc:9574,c:{},wc:{}},{id:"78eccca8-a119-465d-a79f-a213f82c1969",tt:"EveryTime",sc:10065,c:{},wc:{}},{id:"64d3c5d3-2a69-4923-8e3a-af8e56c84818",tt:"EveryTime",sc:10319,c:{},wc:{}},{id:"b769d8e2-b2a1-4b0d-b441-13129a09b7e1",tt:"EveryTime",sc:11122,c:{},wc:{}},{id:"6f8e1720-d57f-4257-b5bc-f342b3a02047",tt:"EveryTime",sc:12200,c:{},wc:{}},{id:"0bba94a9-6f8e-4e58-8284-e128005b61a1",tt:"EveryTime",sc:15072,c:{},wc:{}},{id:"81236014-afa3-4f37-8f1c-fa5fe708b1c3",tt:"EveryTime",sc:29599,c:{},wc:{}},{id:"63fd9b90-473e-4cf9-af63-ebe735a9d420",tt:"EveryTime",sc:29594,c:{},wc:{}},{id:"a580addc-2b5c-4289-94ec-836071ecf26e",tt:"EveryTime",sc:9697,c:{},wc:{}},{id:"55a265af-36b5-4e1f-98c7-ee357f1cdeeb",tt:"EveryTime",sc:13520,c:{},wc:{}},{id:"a171f9a1-7e9f-4a53-b44c-3a76bf32f16a",tt:"EveryTime",sc:13857,c:{},wc:{}},{id:"5bf38baa-b421-42f4-b356-4f14a5e3462a",tt:"EveryTime",sc:15073,c:{},wc:{}},{id:"3ca050d0-c290-4e32-b7eb-2978cc7e17c2",tt:"EveryTime",sc:20553,c:{},wc:{}},{id:"f8fe5758-dd76-481a-bda0-62171e752e8f",tt:"EveryTime",sc:28133,c:{},wc:{}},{id:"4e1257f0-0089-40a8-bf07-cff4b1cdfb5f",tt:"EveryTime",sc:29598,c:{},wc:{}},{id:"10eb9340-10b6-44ca-bee6-564b2dc20828",tt:"EveryTime",sc:32337,c:{},wc:{}},{id:"0ffe4f0a-88e0-4e0c-9716-670e7c098c8b",tt:"EveryTime",sc:12008,c:{},wc:{}},{id:"8c56e023-c74d-4f7c-b6a0-9de81d4fbf4f",tt:"EveryTime",sc:7838,c:{},wc:{}},{id:"faa39da5-c988-48cd-9c2a-d785165c41ac",tt:"EveryTime",sc:19810,c:{},wc:{}},{id:"6a4e7b69-5b8b-479d-906f-695d0cdd9ce1",tt:"EveryTime",sc:31818,c:{},wc:{}},{id:"e1dd9239-a634-4185-a2a1-eaf36792ab23",tt:"EveryTime",sc:20478,c:{},wc:{}},{id:"29d0b5f5-cf0d-4d47-a604-5c934709d8ce",tt:"EveryTime",sc:29569,c:{},wc:{}},{id:"19bcf78a-d38b-4c81-a6ea-b2e4af0cff71",tt:"EveryTime",sc:29596,c:{},wc:{}},{id:"44cbbc80-5574-45f4-bab9-c88ee9ab428a",tt:"EveryTime",sc:9835,c:{},wc:{}},{id:"5ca3b272-07c3-4845-baa1-d0436d1a8fca",tt:"EveryTime",sc:9704,c:{},wc:{}},{id:"8e3b9e5f-21ab-43fb-9598-599cea29a7d1",tt:"EveryTime",sc:13769,c:{},wc:{}},{id:"92539da5-a588-4e7a-ab4d-6593f939ee64",tt:"EveryTime",sc:14853,c:{},wc:{}},{id:"c91a5813-1dc1-4b01-8683-75964721bbdf",tt:"EveryTime",sc:29595,c:{},wc:{}},{id:"87f6216f-46c6-46ea-b3a2-a5b6bb761292",tt:"EveryTime",sc:9812,c:{},wc:{}},{id:"ba3dce83-23a6-4a6f-b389-4fe48c4cee3f",tt:"EveryTime",sc:10853,c:{},wc:{}},{id:"941f9a9b-9954-4ceb-93cc-b895c743d93b",tt:"EveryTime",sc:14371,c:{},wc:{}},{id:"122537a4-2d14-4361-a64b-1ffc4192b0a1",tt:"EveryTime",sc:14816,c:{},wc:{}},{id:"bb7b6d70-9c1f-46f0-9b7f-5038364af096",tt:"EveryTime",sc:14848,c:{},wc:{}},{id:"c8a6f69f-aca2-46bd-abd7-74bb66b78e80",tt:"EveryTime",sc:14867,c:{},wc:{}},{id:"06f8dcfa-8772-437f-9edb-93174280fa32",tt:"EveryTime",sc:14921,c:{},wc:{}},{id:"e61fb724-3494-46f8-b896-4f6c047053ac",tt:"EveryTime",sc:18029,c:{},wc:{}},{id:"0412b944-6be4-4751-9858-085f5ebe20b0",tt:"EveryTime",sc:32338,c:{},wc:{}},{id:"4eaafdda-065a-4f34-b181-d658e5111adb",tt:"EveryTime",sc:30405,c:{},wc:{}},{id:"0632ef5a-99ff-44d0-b9f4-2c801e8e586a",tt:"EveryTime",sc:7843,c:{},wc:{}},{id:"f61ee07b-b5d8-4aec-8e2a-2b8e3a7851b8",tt:"EveryTime",sc:9837,c:{},wc:{}},{id:"fdd25501-76e8-4078-b164-02df7cbfa0fe",tt:"EveryTime",sc:10117,c:{},wc:{}},{id:"abf8100c-4d54-42cb-9a58-ad8414c958eb",tt:"EveryTime",sc:10798,c:{},wc:{}},{id:"8b78259c-4220-4d09-b53b-cebdaadfb8df",tt:"EveryTime",sc:11903,c:{},wc:{}},{id:"ad9ed2d7-ce84-4323-80f5-593e810dc433",tt:"EveryTime",sc:21068,c:{},wc:{}},{id:"f228f9a4-0c6e-4631-a210-6e8d1bd5c94c",tt:"EveryTime",sc:32321,c:{},wc:{}},{id:"b82b4b27-5b40-4627-9297-6bf0902dce66",tt:"EveryTime",sc:30406,c:{},wc:{}},{id:"a73b0593-5cdc-4a58-a92a-1fe2dbbd56fb",tt:"EveryTime",sc:7844,c:{},wc:{}},{id:"4ac11d0e-025f-4bf2-b3c9-0cab7bdc1e84",tt:"EveryTime",sc:10790,c:{},wc:{}},{id:"2d5c853c-c78f-42f4-95dd-2da758cea397",tt:"EveryTime",sc:13132,c:{},wc:{}},{id:"60400610-3797-46e9-988f-cb782413d922",tt:"EveryTime",sc:21542,c:{},wc:{}},{id:"b3544bb6-3133-4cb8-be3a-6d5c7671929f",tt:"EveryTime",sc:21006,c:{},wc:{}},{id:"1d9ed67e-cf59-4adb-bbbb-a736e98ce6e2",tt:"EveryTime",sc:27709,c:{},wc:{}},{id:"d8b590c0-afbc-4511-a515-9af0e74ecb62",tt:"EveryTime",sc:25111,c:{},wc:{}},{id:"daeba392-e150-43e8-889f-a0a798fc15ba",tt:"EveryTime",sc:30410,c:{},wc:{}},{id:"c9e04bff-01f5-41e3-b499-c2ba2bb9b73b",tt:"EveryTime",sc:14282,c:{},wc:{}},{id:"e65cdf0e-1948-45ea-af9a-a83d75525441",tt:"EveryTime",sc:14812,c:{},wc:{}},{id:"c7c5e239-13a0-42c6-b802-00813099d3d2",tt:"EveryTime",sc:28518,c:{},wc:{}},{id:"7b9df665-7ccb-435f-a71f-dc46d1601297",tt:"EveryTime",sc:29223,c:{},wc:{}},{id:"d17d9315-dee8-47ea-8947-4fb13c0682a6",tt:"EveryTime",sc:7878,c:{},wc:{}},{id:"b8701cb8-c264-455d-a4d5-237cb54f5860",tt:"EveryTime",sc:22629,c:{},wc:{}},{id:"ec0d40d2-559f-4ff2-95be-a03206c5d536",tt:"EveryTime",sc:23694,c:{},wc:{}},{id:"00b92f2e-fe9c-4dbe-baa7-62ce57fc24e2",tt:"EveryTime",sc:28517,c:{},wc:{}},{id:"86dd6f6d-ac07-4592-aa84-94455b5cf41a",tt:"EveryTime",sc:29591,c:{},wc:{}},{id:"d154c025-2847-4661-a0de-cd18dd7c3eac",tt:"EveryTime",sc:13827,c:{},wc:{}},{id:"3fa26517-4753-438f-82c7-39cf5820e161",tt:"EveryTime",sc:13825,c:{},wc:{}},{id:"48b9edf5-6706-4512-b657-7b36e0721da3",tt:"EveryTime",sc:25102,c:{},wc:{}},{id:"5d579bf9-c429-468c-86e5-cbe76ad7afe0",tt:"EveryTime",sc:28415,c:{},wc:{}},{id:"74185b5d-8d11-4e2f-89c5-d761ffe16f1c",tt:"EveryTime",sc:32339,c:{},wc:{}},{id:"2e81701b-8ed4-4124-ac41-0a5cfad910e8",tt:"EveryTime",sc:30413,c:{},wc:{}},{id:"c0825b0e-08e4-4484-ac0c-26bdda53c4bc",tt:"EveryTime",sc:7880,c:{},wc:{}},{id:"6c4b3691-1aa4-482f-8bf0-3a999078fb15",tt:"EveryTime",sc:14808,c:{},wc:{}},{id:"1f6fd5f7-e653-4983-a0c9-5abfe6f8a523",tt:"EveryTime",sc:13133,c:{},wc:{}},{id:"5f729325-6172-4b26-bebf-3c24c8ff9d4f",tt:"EveryTime",sc:28391,c:{},wc:{}},{id:"28980b31-a036-4173-be90-20dd2ee6e368",tt:"EveryTime",sc:29573,c:{},wc:{}},{id:"0b91540d-4ac1-4c0d-bb2d-53e778953db0",tt:"EveryTime",sc:32324,c:{},wc:{}},{id:"3fa25e6e-e2ba-4f7c-8dea-5b256a52b216",tt:"EveryTime",sc:32340,c:{},wc:{}},{id:"0ec592da-b975-4e76-bcd7-98ffa21a4a18",tt:"EveryTime",sc:7881,c:{},wc:{}},{id:"f102ed9c-e88f-491b-a9ba-b38e7cdbd49d",tt:"EveryTime",sc:8500,c:{},wc:{}},{id:"89ce536c-981a-42c7-8b05-2d2140ebcba5",tt:"EveryTime",sc:10179,c:{},wc:{}},{id:"3d479081-1fd1-4021-829e-fd68fd013bc2",tt:"EveryTime",sc:10428,c:{},wc:{}},{id:"ed64deaa-cf87-4ab5-bc55-377fc41c47a1",tt:"EveryTime",sc:10852,c:{},wc:{}},{id:"f7fd64be-81a3-43c1-a2ff-f063f5126c9c",tt:"EveryTime",sc:12198,c:{},wc:{}},{id:"18eb408d-a7ba-4e93-8784-f777f397df60",tt:"EveryTime",sc:12381,c:{},wc:{}},{id:"4d773dd9-c2e7-441c-bfb5-0baec6abbcef",tt:"EveryTime",sc:12668,c:{},wc:{}},{id:"c01cf5b1-a4ec-46f6-89a5-bf699289cbdc",tt:"EveryTime",sc:13856,c:{},wc:{}},{id:"f116cad5-ff67-485a-abd5-f96ad7612af8",tt:"EveryTime",sc:13826,c:{},wc:{}},{id:"095c3857-c7c0-48d8-a8b2-6a83a2197e84",tt:"EveryTime",sc:13831,c:{},wc:{}},{id:"12e49a9a-4329-4805-9056-09c7f4d2ea87",tt:"EveryTime",sc:20707,c:{},wc:{}},{id:"19359aa5-1d88-45bd-a05d-42a6d6fb2fbe",tt:"EveryTime",sc:24326,c:{},wc:{}},{id:"65014935-d1b1-4bee-861a-051a2e6bed84",tt:"EveryTime",sc:22995,c:{},wc:{}},{id:"b88438b0-d4c1-45d4-a737-4b1d4ff50480",tt:"EveryTime",sc:28520,c:{},wc:{}},{id:"1da4be71-5ddd-4464-adb2-2ba5aa21e6d1",tt:"EveryTime",sc:28392,c:{},wc:{}},{id:"7227ad7a-49b2-4b2d-b512-661e704dc95f",tt:"EveryTime",sc:28161,c:{},wc:{}},{id:"5d1975a8-e824-494d-97ac-1519bc06ef5a",tt:"EveryTime",sc:27713,c:{},wc:{}},{id:"e09fc28a-f99e-449d-9b20-25fd223d4e5c",tt:"EveryTime",sc:30408,c:{},wc:{}},{id:"c098a804-0a3a-4dae-a030-02d0d0d128bd",tt:"EveryTime",sc:30409,c:{},wc:{}},{id:"06dd34a8-9f76-4fb9-80b1-49f9126d91ec",tt:"EveryTime",sc:29694,c:{},wc:{}},{id:"25b1f30e-fe10-471a-9fe9-78fed0cac093",tt:"EveryTime",sc:11200,c:{},wc:{}},{id:"40a883b7-50bb-44b8-b1c6-3863b647e859",tt:"EveryTime",sc:7894,c:{},wc:{}},{id:"dd8afc33-99e6-4f6a-b35c-c9e090b8dd8f",tt:"EveryTime",sc:19815,c:{},wc:{}},{id:"895e7c22-757d-45b5-a894-1f3e8f599b5e",tt:"EveryTime",sc:29571,c:{},wc:{}},{id:"fd0d0554-4825-4d70-915d-1c961bedc579",tt:"EveryTime",sc:30144,c:{},wc:{}},{id:"ab8dddb5-1d5e-4233-8060-dad818da3d5b",tt:"EveryTime",sc:30164,c:{},wc:{}},{id:"41999ca2-375d-4bb1-982a-6b3ebd855b1d",tt:"EveryTime",sc:34114,c:{},wc:{}},{id:"7c02a7b9-34d9-46e2-9da3-07a8f214f214",tt:"EveryTime",sc:34165,c:{},wc:{}},{id:"deb33131-17cc-4801-a663-fbe287d24c48",tt:"EveryTime",sc:47117,c:{},wc:{}},{id:"32701907-9e1d-4a11-9d7a-3218d6107493",tt:"EveryTime",sc:39266,c:{},wc:{}},{id:"e3109a0c-3c9a-42b0-aa96-b8b2c36dfc76",tt:"EveryTime",sc:40114,c:{},wc:{}},{id:"feb6016e-1818-4a0e-afd8-489a983d5c99",tt:"EveryTime",sc:40115,c:{},wc:{}},{id:"070144b3-4902-4f1a-ba15-8aa7de60c6fe",tt:"EveryTime",sc:42300,c:{},wc:{}},{id:"ec5e93d3-4645-4747-9b46-b1fea4773ff2",tt:"EveryTime",sc:42301,c:{},wc:{}},{id:"31f70e7d-9485-4e32-a6e4-1eaee723cf58",tt:"EveryTime",sc:42302,c:{},wc:{}},{id:"5f5eacfb-3120-44f2-ab23-6b71f882caa5",tt:"EveryTime",sc:42303,c:{},wc:{}},{id:"255a5b2d-eee7-4751-b897-437ecb81d649",tt:"EveryTime",sc:42307,c:{},wc:{}},{id:"c6786378-6b9d-43d9-99ef-84626b5573e8",tt:"EveryTime",sc:42308,c:{},wc:{}},{id:"e1d8063d-5467-40e7-9ec2-e4a7fc19342b",tt:"EveryTime",sc:43608,c:{},wc:{}},{id:"abe600e2-0219-4d8d-b820-4724212b33b9",tt:"EveryTime",sc:47968,c:{},wc:{}},{id:"e60b9637-9d76-4757-a1be-0150a07d163d",tt:"EveryTime",sc:46823,c:{},wc:{}},{id:"971fa866-595c-4e4f-ae31-d41a517251cf",tt:"EveryTime",sc:40462,c:{},wc:{}},{id:"dc648101-ab67-47d5-8c30-55aece35c2d7",tt:"EveryTime",sc:62592,c:{},wc:{}},{id:"fa1a6cf5-3c49-4799-afa1-4b1fc8160817",tt:"EveryTime",sc:62593,c:{},wc:{}},{id:"c0483928-825a-4cb1-986b-cbe30cd66be0",tt:"EveryTime",sc:62613,c:{},wc:{}},{id:"5e5dfee1-0f0a-45ed-99c6-ca9477bbba8d",tt:"EveryTime",sc:62627,c:{},wc:{}},{id:"3a4f9ab5-b65c-49c5-b479-4d7ead38080f",tt:"EveryTime",sc:65170,c:{},wc:{}}]},overlays:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[{id:"020bd700-cbae-4c24-a147-b61030e99128",tt:"OnEntry",sc:7844,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599814"},wc:{}},{id:"0d476a00-46d8-400f-9aac-962263244d83",tt:"OnEntry",sc:7880,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599816"},wc:{}},{id:"86d3c640-8ea1-46c8-97ee-4bf686192f59",tt:"OnEntry",sc:9702,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599818"},wc:{}},{id:"1260c0d2-30be-419b-8d41-6def4f1ebdc6",tt:"OnEntry",sc:14831,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=597474"},wc:{}},{id:"5971c85b-d5bd-4d4a-80c1-39fcb9e62876",tt:"OnEntry",sc:34165,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=718896"},wc:{}}]},rubicon_ssp:{auto_init:!0,publisher_id:"11092",activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"bf9865e1-b5de-466a-bbbf-3a6327803f8d":["allow_insights","allow_targeting_core_audiences"]},activationConfigs:[]},dfp:{auto_init:!0,networks:[{name:"Default",network_code:"5185"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_targeting_keys:!1,activationConfigs:[]},twitter_pixel:{auto_init:!0,activationConfigs:[]},web:{auto_init:!0,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}}}getConfigByKey(e){const t=this.addons[e];return(e,n)=>{var r;return null!==(r=null==t?void 0:t[e])&&void 0!==r?r:n}}}},4314:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(550),i=n(7545),o=n(3735);class s{constructor(e,t,n){this.eventHandler=e,this.api=t,this._internals=n,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new i.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:r,processingStrategies:i}=e,s=e=>this._internals.network.error(`Error sending events batch. Got ${JSON.stringify(e)}`,this._internals.state.userId),a=t?(0,o.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(e);return n.length>0?(0,o.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>a(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,r,i):(0,o.Q1)())).catch(s))):Promise.resolve()}onBatchResponseSuccess(e,t,n,i){const s=(e,t)=>"never"!==t?(0,o.ls)((()=>this.eventHandler.newEvent((0,r.XO)(e),null)),(()=>this._internals.state.eventsCache.add(e,{persistOnDisk:!0}))):o.Q1,a=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};return(0,o.zG)(n(e.error.message),(t=>console.error(e)),(t=>this.eventHandler.newEvent(r,e)))};return e.forEach((({body:e},c)=>{const u=t[c],l=n[c],d=i[c];return(0,r.bk)(e)?a(e,u,l.error):((e,t,n,i)=>{const a=(0,r.mh)(e,t);return(0,o.zG)(n(a),s(a,i))})(e,u,l.success,d)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this._internals.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this._internals.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}},7084:(e,t,n)=>{n.d(t,{lg:()=>d,Bt:()=>m});var r=n(6567),i=n(276),o=n(3735),s=n(2751),a=n(5090);const c=(e,t)=>!!e.id&&!(0,i.t9)(s.Eq)(e.tag,t);var u=n(998);const l=new Set(["public","email","email_md5","email_sha256"]);class d{constructor(e,t,n,r){this._internals=e,this.permutive=t,this.network=n,this.api=r,this.identities={},this.providers={},this.identities=this.getCachedIdentitiesAndMigrateIfRequired()}prepareThirdPartyIdentities(){const e=this._internals.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=(0,u.G)("load_tpd_ids"),r=[Promise.resolve().then(n.bind(n,3739)),Promise.resolve().then(n.bind(n,1998))];return Promise.all(r).then((e=>Promise.all(e.map((e=>e.load({_internals:this._internals,permutive:this.permutive,network:this.network,api:this.api})))))).then((e=>(0,o.zG)((0,i.oA)(e),(e=>Promise.all(e.map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,o.bc)(e,this.getCachedTPDIdentity(e.tag)))))))))).then((e=>e.map((([e,t])=>(this.providers[e.tag]=e,this.setTPDIdentityIfPresent(e.tag,t,e.ttlInSeconds)))))).then((()=>{this._internals.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()}))}getPrioritizedIdentities(e){const t={default:0,pxid:1,appnexus:1},n=Object.entries(e).map((([e,{id:t,expiry:n,priority:r}])=>Object.assign(Object.assign(Object.assign({tag:e},t?{id:t}:{}),n?{expiry:n}:{}),void 0!==r?{priority:r}:{}))),o=n.filter((e=>c(e,Object.values(this.providers).map((e=>e.tag))))),a=n.filter((e=>((e,t)=>!!e.id&&!!(0,i.t9)(s.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),u=(0,i.DZ)((e=>(0,r.ij)(e.priority)))(o),l=u.length>0?Math.max(...u):0,d=o.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:l+1}))),m=a.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:l+f}:{tag:e.tag,id:e.id,priority:l+g}));return d.concat(m)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}getCustomerDefinedIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>c({tag:e,id:t.value,expiry:t.expiry,priority:t.priority},Object.values(this.providers).map((e=>e.tag)))))}getTPDIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>{var n,r;return!!t.value&&!!(null===(r=null===(n=this.providers)||void 0===n?void 0:n[e])||void 0===r?void 0:r.usedForThirdPartyData)}))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=()=>{throw new Error(t)};return"string"==typeof e?(i=e).length>0?[{id:i,tag:"default"}]:n():Array.isArray(e)?(r=e).every((e=>"string"==typeof e.id&&"string"==typeof e.tag))?r:n():n();var r,i}setIdentities(e){e.filter((e=>!l.has(e.tag))).forEach((({tag:e,id:t,expiry:n,priority:r})=>{this.identities[e]=Object.assign(Object.assign(Object.assign({},t?{value:t}:{}),n?{expiry:n}:{}),void 0!==r?{priority:r}:{})})),this._internals.state.setPermutiveData("identities",this.identities)}reset(){return(0,o.zG)(this.identities={},(e=>Promise.all(Object.values(this.providers).map((e=>e.reset()))).then(o.Q1)))}getFilteredIdentities(e){return(0,a.m8)(...Object.entries(this.identities).filter((([t,n])=>e(t,n))).map((([e,{value:t,expiry:n,priority:r}])=>(0,o.bc)(e,Object.assign(Object.assign({id:t},n?{expiry:n}:{}),void 0!==r?{priority:r}:{})))))}shouldAskForNewIdentity(e){var t;const n=(0,r.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,r.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,r.ij)(this.identities[e].value):r.YP}setTPDIdentityIfPresent(e,t,n=86400){const i=()=>Date.now()+Math.floor(1e3*n);return(0,r.g_)((()=>this.setIdentities([{tag:e,expiry:i()}])),(t=>this.setIdentities([{tag:e,id:t,expiry:i()}])))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,o.bc)(e,r.YP):(0,o.zG)(t.result,(t=>this._internals.metrics.track({name:(0,r.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,o.bc)(e,t.result)))))}isIdentityExpired(e){return e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){const e=this.getLegacyAliases(),t=()=>this._internals.state.getPermutiveData("identities")||{},n=e=>(0,a.m8)(...Object.entries(e).filter((([e,t])=>!this.isIdentityExpired(t)&&!l.has(e))));return Object.keys(e).length>0?(e=>{const r=t(),i=Object.entries(e).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:{value:n}})),{}),s=n(Object.assign(Object.assign({},i),r));return(0,o.zG)(this._internals.state.setPermutiveData("identities",s),(e=>s))})(e):n(t())}getLegacyAliases(){return(e=>["e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","be668577-07f5-444d-98e0-222b990951b1"].includes("67cbf6c5-d926-407b-a684-a0606570ff08")?(0,a.m8)(...Object.entries(e).filter((([e])=>"sporeid"!==e.toLowerCase()))):e)(this._internals.state.getPermutiveData("aliases")||{})}}const m=(e,t,n,r,o)=>{const a=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!h[e]||(0,i.jV)(s.Eq)(t,n).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":a,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,i.jV)(s.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":a,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e}[e]||{"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!p[e]}[t];return!!u&&u(o,n,r)},f=2,g=3,p={},h={}},8757:(e,t,n)=>{n.d(t,{Pe:()=>l});var r=n(9372);function i(e){var t={},n=[];(e=e||this).on=function(n,r,i){return(t[n]=t[n]||[]).push([r,i]),e},e.off=function(r,i){r||(t={});for(var o=t[r]||n,s=o.length=i?o.length:0;s--;)i==o[s][0]&&o.splice(s,1);return e},e.once=function(t,r){var i=n.slice.call(arguments,2),o=function(){r(i),e.off(t,o)};return e.on(t,o),e},e.emit=function(r){for(var i,o=t[r]||n,s=o.length>0?o.slice(0,o.length):o,a=0;i=s[a++];)i[0].apply(i[1],n.slice.call(arguments,1));return e}}class o{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}var s=n(5090);class a{constructor(e,t){this._internals=e,this.hasChanged=!1,(t=t||{}).timeout_seconds=t.timeout_seconds||1800,t.session_data_key=t.session_data_key||"permutive-session",this.options=t,this.session_id=null,this.initialize()}getSessionId(){return this.session_id}sessionHasChanged(){return this.hasChanged}newSession(e){return this.hasChanged=!0,{session_id:(0,s.k$)(),last_updated:e}}initialize(){const e=new Date,t=this._internals.getCookie(this.options.session_data_key);let n=this.decodeSessionData(t);if(null===n)n=this.newSession(e);else{const t=this.options.timeout_seconds;e>new Date(n.last_updated.getTime()+1e3*t)?n=this.newSession(e):n.last_updated=e}this.persistSessionData(n),this.session_id=n.session_id}decodeSessionData(e){let t=null;try{t=JSON.parse(e)}catch(e){return null}return null!==t&&"object"==typeof t&&t.hasOwnProperty("session_id")&&t.hasOwnProperty("last_updated")&&(t.last_updated=new Date(t.last_updated),!isNaN(t.last_updated.getTime()))?t:null}persistSessionData(e){e.last_updated=e.last_updated.toISOString(),this._internals.setCookie(this.options.session_data_key,JSON.stringify(e))}}const c="Cookie exceeds maximum supported size of 4096 bytes for most browsers.",u="Cookie is missing required parameters.";class l{constructor(e,t,n,s,c=[],u={},l=new i,d=new r.J,m=new o){this.namespace=e,this.logger=t,this.config=n,this.network=s,this.blockers=c,this.addons=u,this.messages=l,this.enrichers=d,this.customProperties=m,this.isReady=!1,this.isRealtime=!1,this.listenForBlockers=!0,this.sessionManager=new a(this)}makeSafe(e){return(...t)=>{try{return e(...t)}catch(e){this.network.error(e,this.state.userId)}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}setAsReady(){this.isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v15.3.1"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}setAsRealtime(){this.isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:this.queryManager.userSegments.getAllAsList().length,labels:{}})}addBlocker(e){this.blockers.push(e),this.logger.log("<blockers> added blocker "+e),this.messages.on(e,(()=>{if(this.listenForBlockers){const t=this.blockers.indexOf(e);t>=0&&(this.blockers.splice(t,1),this.logger.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.logger.log("<blockers> complete"))}}))}setCookie(e,t,n=!1){var r;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:i}=null!==(r=this.config)&&void 0!==r?r:{};throw this.logger.warn(`Unable to set cookie. ${u}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:i}),new Error(u)}const i=this.namespace.getNamespacedStorageKey(e),o=[encodeURIComponent(i),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("");if(o.length>4096)throw this.logger.warn(`Unable to set cookie ${i}. ${c}`),new Error(c);return this.logger.debug(`Setting cookie ${o}`),document.cookie=o,!0}getCookie(e,t=!1){const n=t?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return localStorage.getItem(t)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);this.makeSafe((()=>{localStorage.setItem(n,t)}))()}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);localStorage.removeItem(t)}}},4828:(e,t,n)=>{n.d(t,{SX:()=>o});class r{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(...e){return console.log.bind(window.console,this.prefix)(...e)}debug(...e){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...e)}warn(...e){return console.warn.bind(window.console,this.prefix)(...e)}error(...e){return console.error.bind(window.console,this.prefix)(...e)}}class i{log(){}debug(){}warn(){}error(){}}const o=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new r:new i}},4165:(e,t,n)=>{n.d(t,{p:()=>r});class r{getModels(){return Promise.resolve({})}}},376:(e,t,n)=>{n.d(t,{x:()=>Oe,e:()=>Te});var r=n(5090),i=n(477),o=n.n(i);function s(){return o()('/*! permutive-javascript-sdk v15.3.1 (web) (built 2021-09-13T06:13:40.299Z) */(()=>{"use strict";Object.create;Object.create;function e(e){return e}function t(e){return function(){return e}}var o=t(void 0);function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function r(e,t,o,n,r,i,s,a,c,u,l,w,m,d,g,p,f,h,y,b){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return o(t(e));case 4:return n(o(t(e)));case 5:return r(n(o(t(e))));case 6:return i(r(n(o(t(e)))));case 7:return s(i(r(n(o(t(e))))));case 8:return a(s(i(r(n(o(t(e)))))));case 9:return c(a(s(i(r(n(o(t(e))))))));case 10:return u(c(a(s(i(r(n(o(t(e)))))))));case 11:return l(u(c(a(s(i(r(n(o(t(e))))))))));case 12:return w(l(u(c(a(s(i(r(n(o(t(e)))))))))));case 13:return m(w(l(u(c(a(s(i(r(n(o(t(e))))))))))));case 14:return d(m(w(l(u(c(a(s(i(r(n(o(t(e)))))))))))));case 15:return g(d(m(w(l(u(c(a(s(i(r(n(o(t(e))))))))))))));case 16:return p(g(d(m(w(l(u(c(a(s(i(r(n(o(t(e)))))))))))))));case 17:return f(p(g(d(m(w(l(u(c(a(s(i(r(n(o(t(e))))))))))))))));case 18:return h(f(p(g(d(m(w(l(u(c(a(s(i(r(n(o(t(e)))))))))))))))));case 19:return y(h(f(p(g(d(m(w(l(u(c(a(s(i(r(n(o(t(e))))))))))))))))));case 20:return b(y(h(f(p(g(d(m(w(l(u(c(a(s(i(r(n(o(t(e)))))))))))))))))))}}function i(e){return function(t){return function(o){return e.map(o,(function(e){return e(t)}))}}}var s=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},a=function(e){return"Some"===e._tag},c={_tag:"None"},u=function(e){return{_tag:"Some",value:e}},l=function(e){return"Left"===e._tag},w=[],m=(Object.prototype.hasOwnProperty,function(e){return s([e[0]],e.slice(1))}),d=function(e){return{_tag:"Left",left:e}},g=function(e){return{_tag:"Right",right:e}},p=function(e,t){return r(e,y(t))},f=function(e,t){return r(e,k(t))},h="Either",y=function(e){return function(t){return _(t)?t:g(e(t.right))}},b={URI:h,map:p},v=g,k=function(e){return function(t){return _(t)?t:_(e)?e:g(t.right(e.right))}},q={URI:h,map:p,ap:f,of:v},_=l,x=function(e){return function(t){return _(t)?e(t.left):t.right}};i(b);v(w);const z=()=>({kind:"null",value:null}),j=e=>({kind:"string",value:e}),S=e=>({kind:"number",value:e}),A=e=>({kind:"array",value:e}),M=e=>({kind:"object",value:e}),O=e=>e,T=()=>({kind:"bottom"}),E=e=>({kind:"inner",a:e}),C=e=>({kind:"top",error:e}),I=e=>({kind:"unbounded",group:e}),N=(e,t)=>({kind:"windowed",key:t,group:e}),L=(e,t,o)=>({kind:"countLimit",n:o,limit:t,group:e}),P=(e,t,o)=>({kind:"uniqueLimit",n:o,limit:t,group:e}),H=e=>({kind:"numberGroup",group:e}),U=e=>({kind:"stringGroup",group:e}),R=e=>({kind:"tuple",tuple:e}),G=e=>({state:e}),B=(e,t)=>({commands:e,payload:t});var F=function(e){return{equals:function(t,o){return t===o||e(t,o)}}},W=function(e){return F((function(t,o){for(var n in e)if(!e[n].equals(t[n],o[n]))return!1;return!0}))},D=function(e){return function(t,o){return t===o||0===e(t,o)}},V=function(e){return{equals:D(e),compare:function(t,o){return t===o?0:e(t,o)}}},K=function(e){return function(t){return V((function(o,n){return t.compare(e(o),e(n))}))}},Y=(t(0),function(e){return function(t,o){return-1===e.compare(t,o)}}),$=function(e){return function(t,o){return 1===e.compare(t,o)}},J=function(e){return function(t,o){return t===o||e.compare(t,o)>-1?t:o}};var Z;Z=void 0;var Q=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},X=w,ee=function(e){return function(t){return Q(Q([],t),[e])}},te=ee;var oe=function(e,t){return r(e,ne(t))},ne=function(e){return re((function(t,o){return e(o)}))},re=function(e){return function(t){for(var o=[e(0,ce(t))],n=1;n<t.length;n++)o.push(e(n,t[n]));return o}},ie=function(e){return e[0]},se="ReadonlyNonEmptyArray",ae={URI:se,map:oe},ce=(i(ae),ie);var ue=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},le=function(e){return e.length>0},we=function(e,t){return e<0||e>=t.length},me=function(e){return function(t){return ue([e],t)}},de=me,ge=function(e){return function(t){return ue(ue([],t),[e])}},pe=ge,fe=function(e){var t=function(e){return function(t){if(1===t.length)return ke(t);for(var o=[Me(t)],n=function(t){o.every((function(o){return!e.equals(o,t)}))&&o.push(t)},r=0,i=Oe(t);r<i.length;r++)n(i[r]);return o}}(e);return function(e){return function(o){return t(r(o,ve(e)))}}},he=m,ye=function(e){return le(e)?u(e):c},be=function(e){return function(t){for(var o=Math.max(0,Math.floor(t)),n=[e(0)],r=1;r<o;r++)n.push(e(r));return n}};function ve(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var ke=he;var qe=function(e){return function(t){var o=Math.max(1,e);return o>=t.length?[ke(t),[]]:[r(t.slice(1,o),de(Me(t))),t.slice(o)]}},_e=function(e,t){return r(e,xe(t))},xe=function(e){return ze((function(t,o){return e(o)}))},ze=function(e){return function(t){for(var o=[e(0,Me(t))],n=1;n<t.length;n++)o.push(e(n,t[n]));return o}},je="NonEmptyArray",Se=function(e){return F((function(t,o){return t.length===o.length&&t.every((function(t,n){return e.equals(t,o[n])}))}))},Ae={URI:je,map:_e},Me=(i(Ae),ce),Oe=function(e){return e.slice(1)};var Te={equals:function(e,t){return e===t}},Ee={equals:Te.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},Ce=function(e,t){return{left:e,right:t}},Ie=function(e){return function(t){return Ce(Le(t),e(Pe(t)))}},Ne="Separated",Le=(i({URI:Ne,map:function(e,t){return r(e,Ie(t))}}),function(e){return e.left}),Pe=function(e){return e.right};function He(e,t){return function(o){var n=e.traverse(o);return function(e,r){return o.map(n(e,r),t.separate)}}}function Ue(e,t){return function(o){var n=e.traverse(o);return function(e,r){return o.map(n(e,r),t.compact)}}}var Re=te;function Ge(e){return function(t,o){if(void 0===o){var n=Ge(e);return function(e){return n(t,e)}}for(var r,i=0;i<o.length;i++)if(r=o[i],e.equals(r,t))return!0;return!1}}var Be=function(e,t){return r(e,Ye(t))},Fe=function(e,t,o){return r(e,et(t,o))},We=function(e){var t=tt(e);return function(e,o){return r(e,t(o))}},De=function(e,t,o){return r(e,nt(t,o))},Ve=function(e){var t=it(e);return function(e,o){return r(e,t(o))}},Ke=function(){return mt},Ye=function(e){return function(t){return t.map((function(t){return e(t)}))}},$e=function(e){for(var t=[],o=[],n=0,r=e;n<r.length;n++){var i=r[n];"Left"===i._tag?t.push(i.left):o.push(i.right)}return Ce(t,o)},Je=function(e){return function(t){for(var o=[],n=0;n<t.length;n++){var r=e(n,t[n]);a(r)&&o.push(r.value)}return o}},Ze=function(e){return Je((function(t,o){return e(o)}))},Qe=Ze(e),Xe=function(e){return function(t){return function(o){return o.reduce((function(o,n,r){return e.concat(o,t(r,n))}),e.empty)}}},et=function(e,t){return ot(e,(function(e,o,n){return t(o,n)}))},tt=function(e){var t=Xe(e);return function(e){return t((function(t,o){return e(o)}))}},ot=function(e,t){return function(o){for(var n=o.length,r=e,i=0;i<n;i++)r=t(i,r,o[i]);return r}},nt=function(e,t){return rt(e,(function(e,o,n){return t(o,n)}))},rt=function(e,t){return function(o){return o.reduceRight((function(e,o,n){return t(n,o,e)}),e)}},it=function(e){var t=at(e);return function(e){return t((function(t,o){return e(o)}))}},st=function(e){return function(t){return Fe(t,e.of(Ke()),(function(t,o){return e.ap(e.map(t,(function(e){return function(t){return r(e,Re(t))}})),o)}))}},at=function(e){return function(t){return ot(e.of(Ke()),(function(o,n,i){return e.ap(e.map(n,(function(e){return function(t){return r(e,Re(t))}})),t(o,i))}))}},ct="ReadonlyArray",ut={URI:ct,map:Be},lt=(i(ut),{URI:ct,compact:Qe,separate:$e}),wt={URI:ct,map:Be,reduce:Fe,foldMap:We,reduceRight:De,traverse:Ve,sequence:st},mt=(Ue(wt,lt),He(wt,lt),X),dt=function(e){return 0===e.length},gt=le,pt=de,ft=pe,ht=function(e,t){return e<=0?[]:be(t)(e)};var yt=we,bt=function(e){return function(t){return yt(e,t)?qt(t):t.slice(0,e)}};var vt=function(e,t){for(var o=e.length,n=0;n<o&&t(e[n]);n++);return n};var kt=function(e){return function(t){return e<=0||dt(t)?qt(t):e>=t.length?[]:t.slice(e,t.length)}};var qt=function(e){return e.slice()},_t=function(e){return dt(e)?[]:e.slice().reverse()},xt=function(e){return function(t){return t.length<=1?qt(t):t.slice().sort(e.compare)}},zt=function(e,t,o){for(var n=[],r=Math.min(e.length,t.length),i=0;i<r;i++)n[i]=o(e[i],t[i]);return n};var jt=Ge,St=function(e){return function(t){return e>=1&&gt(t)?qe(e)(t):dt(t)?[qt(t),[]]:[[],qt(t)]}};function At(e){var t=fe(e);return function(o,n){if(void 0===n){var r=At(e);return function(e){return r(e,o)}}return gt(o)&&gt(n)?t(n)(o):gt(o)?qt(o):qt(n)}}function Mt(e){var t=jt(e);return function(o,n){if(void 0===n){var r=Mt(e);return function(e){return r(e,o)}}return o.filter((function(e){return!t(e,n)}))}}var Ot=function(e,t){return r(e,Nt(t))},Tt=function(e,t,o){return r(e,Bt(t,o))},Et=function(e){var t=Gt(e);return function(e,o){return r(e,t(o))}},Ct=function(e,t,o){return r(e,Wt(t,o))},It=function(e){var t=Dt(e);return function(e,o){return r(e,t(o))}},Nt=function(e){return function(t){return t.map((function(t){return e(t)}))}},Lt=function(e){return function(t){return r(t,function(e){return function(t){for(var o=[],n=0;n<t.length;n++)o.push.apply(o,e(n,t[n]));return o}}((function(t,o){return e(o)})))}},Pt=function(e){return function(t){for(var o=[],n=0;n<t.length;n++){var r=e(n,t[n]);a(r)&&o.push(r.value)}return o}},Ht=function(e){return Pt((function(t,o){return e(o)}))},Ut=Ht(e),Rt=function(e){for(var t=[],o=[],n=0,r=e;n<r.length;n++){var i=r[n];"Left"===i._tag?t.push(i.left):o.push(i.right)}return Ce(t,o)},Gt=tt,Bt=et,Ft=ot,Wt=nt,Dt=function(e){var t=Kt(e);return function(e){return t((function(t,o){return e(o)}))}},Vt=function(e){return function(t){return Tt(t,e.of([]),(function(t,o){return e.ap(e.map(t,(function(e){return function(t){return r(e,ft(t))}})),o)}))}},Kt=function(e){return function(t){return Ft(e.of([]),(function(o,n,i){return e.ap(e.map(n,(function(e){return function(t){return r(e,ft(t))}})),t(o,i))}))}},Yt="Array",$t=function(e){return V((function(t,o){for(var n=t.length,r=o.length,i=Math.min(n,r),s=0;s<i;s++){var a=e.compare(t[s],o[s]);if(0!==a)return a}return Ee.compare(n,r)}))},Jt={URI:Yt,map:Ot},Zt=(i(Jt),{URI:Yt,compact:Ut,separate:Rt}),Qt={URI:Yt,map:Ot,reduce:Tt,foldMap:Et,reduceRight:Ct,traverse:It,sequence:Vt};Ue(Qt,Zt),He(Qt,Zt);function Xt(e){switch(e.kind){case"null":return oo.encode(e);case"string":return no.encode(e);case"number":return ro.encode(e);case"array":return io.encode(e);case"object":return so.encode(e)}}function eo(e){return null===e?oo.decode(e):"number"==typeof e?ro.decode(e):"string"==typeof e?no.decode(e):Array.isArray(e)?io.decode(e):so.decode(e)}const to=(e,t)=>d(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),oo={encode:e=>null,decode:e=>null===e?g({kind:"null",value:null}):to(e,"SimpleNull")},no={encode:e=>e.value,decode:e=>"string"==typeof e?g(j(e)):to(e,"SimpleString")},ro={encode:e=>e.value,decode:e=>"number"==typeof e?g(S(e)):to(e,"SimpleNumber")},io={encode:e=>e.value.map(Xt),decode:e=>{if(Array.isArray(e)){const t=Dt(q)(eo)(e);return y(A)(t)}return to(e,"SimpleArray")}},so={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:Xt(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=Dt(q)((([e,t])=>r(eo(t),y((t=>n(e,t))))))(Object.entries(e));return y((e=>M(new Map([...e]))))(t)}return to(e,"SimpleObject")}};var ao={equals:function(e,t){return e===t}},co={equals:ao.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const uo=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return E(t(e.a));case"top":return C(e.error)}},lo=e=>V(((t,o)=>{if("bottom"===t.kind&&"bottom"===o.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===o.kind)return 1;if("top"===t.kind&&"top"===o.kind)return co.compare(t.error,o.error);if("top"===t.kind)return 1;if("top"===o.kind)return-1;if("inner"===t.kind&&"inner"===o.kind)return e.compare(t.a,o.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var wo=c,mo=u;function go(e){return function(t){return e(t)?mo(t):wo}}var po=function(e){return"Left"===e._tag?wo:mo(e.right)},fo=function(e){return{equals:function(t,o){return t===o||(qo(t)?qo(o):!qo(o)&&e.equals(t.value,o.value))}}},ho=function(e){return{equals:fo(e).equals,compare:function(t,o){return t===o?0:ko(t)?ko(o)?e.compare(t.value,o.value):1:-1}}},yo=function(e){return function(t){return qo(t)?wo:mo(e(t.value))}},bo=mo,vo=po,ko=a,qo=function(e){return"None"===e._tag},_o=function(e){return function(t){return qo(t)?e():t.value}};bo(w);var xo=function(e){return-1===e?1:1===e?-1:0};function zo(e,t){return Ut(e.map(t))}function jo(e,t,o,n){const r=(e,t)=>{if(0===e.length)return Ut(t.map((e=>mo({1:e[1],2:o(wo,mo(e[2]))}))));if(0===t.length)return Ut(e.map((e=>mo({1:e[1],2:o(mo(e[2]),wo)}))));if(e.length>0&&t.length>0&&Y(n)(e[0][1],t[0][1])){const[n,...i]=e,s=n[1],a=n[2];return pt({1:s,2:o(mo(a),wo)})(r(i,t))}if(e.length>0&&t.length>0&&$(n)(e[0][1],t[0][1])){const[n,...i]=t,s=n[1],a=n[2];return pt({1:s,2:o(wo,mo(a))})(r(e,i))}if(e.length>0&&t.length>0){const[n,...i]=e,[s,...a]=t,c=n[1],u=n[2],l=s[2];return pt({1:c,2:o(mo(u),mo(l))})(r(i,a))}throw new Error("Non exhaustive match in mapOption2")},i=K((e=>e[1]))(n),s=(e=>{const t=zo(e,(e=>ko(e[2])?mo({1:e[1],2:e[2].value}):wo));return 0===t.length?wo:mo(t)})(r(xt(i)([...e].map((e=>({1:e[0],2:e[1]})))),xt(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return yo((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function So(e,t,o,n){const r=K((e=>e[0]))(n),i=xt(r)([...t]).reduceRight(((e,t)=>{if(_(e)){const n=o(t[1],e.left);return ko(n)?d(n.value):g(t[0])}return e}),d(e));return vo(i)}function Ao(e,t){return new Map([...e].map(t))}function Mo(e,t){return new Map([...e].filter(t))}function Oo(e){return yo(Lo)(function(e){switch(e.state.kind){case"top":return mo(j(e.state.error));case"bottom":return wo;case"inner":return function(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return To(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?mo(A(function(e,t){const o=yo((e=>pt(e)(t)))(e);return _o((()=>t))(o)}(yo((e=>j(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},o=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(o).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return j(e.error);case"inner":return S(e.a)}},o=e=>zo([Eo,Co,e=>r(e,No,M,mo)],(t=>t(e))),n=e=>zo([Eo,Io,e=>r(e,No,(e=>Ao(e,(([e,t])=>[JSON.stringify(e),t]))),M,mo)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return o(e.group);case"numberGroup":return n(e.group)}}(e.payload)))):wo}(e.state.a)}}(e))}function To(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||ko(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||ko(e.limit)}}function Eo(e){switch(e.kind){case"unbounded":return wo;case"windowed":return mo(j("w"));case"countLimit":return mo(j(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return mo(j(1===e.n?"u":`u${e.n}`))}}function Co(e){switch(e.kind){case"unbounded":return wo;case"windowed":return mo(j(ko(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return mo(j(ko(e.limit)?e.limit.value:""))}}function Io(e){switch(e.kind){case"unbounded":return wo;case"windowed":return ko(e.key)?mo(S(e.key.value)):mo({kind:"null",value:null});case"countLimit":case"uniqueLimit":return ko(e.limit)?mo(S(e.limit.value)):mo({kind:"null",value:null})}}function No(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Lo(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Lo(e.value[0]):A(e.value.map(Lo));case"object":return r(Mo(e.value,(([e,t])=>"null"!==t.kind)),(e=>Ao(e,(e=>[e[0],Lo(e[1])]))),M);default:return e}}function Po(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return wo;const[t,o,n,r]=e;if("string"===t.kind&&"string"===o.kind&&"object"===r.kind){const e=go((e=>Ho(e[1].value)&&Uo(e[2].value)))({1:t,2:o});return yo((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:r.value})))(e)}return wo})(e);if(ko(t)){const{prim:e,grp:o,cutoff:n,m:r}=t.value,i=Ro(n,r,Go(o));return"string"==typeof i?C(i):E(B(Bo(e),i))}const o=(e=>{if(3!==e.length)return wo;const[t,o,n]=e;if("string"===t.kind&&"object"===n.kind){const e=go((e=>Uo(e.value)))(t);return yo((e=>({grp:e.value,cutoff:o,m:n.value})))(e)}return wo})(e);if(ko(o)){const{grp:e,cutoff:t,m:n}=o.value,r=Ro(t,n,Go(e));return"string"==typeof r?C(r):E(B(wo,r))}const n=(e=>{if(2!==e.length)return wo;const[t,o]=e;if("string"===t.kind&&"object"===o.kind){const e=go((e=>Ho(e.value)))(t);return yo((e=>({prim:e.value,m:o.value})))(e)}return wo})(e);if(ko(n)){const{prim:e,m:t}=n.value;return E(B(Bo(e),U(I(t))))}const r=(e=>{if(1!==e.length)return wo;const[t]=e;return"object"===t.kind?mo({m:t.value}):wo})(e);if(ko(r)){const{m:e}=r.value;return E(B(wo,U(I(e))))}const i=(e=>{if(e.length<1)return wo;const[t,...o]=e;if("string"===t.kind){const e=go((e=>Ho(e.value)))(t);return yo((e=>({prim:e.value,rest:o})))(e)}return wo})(e);if(ko(i)){const{prim:e,rest:t}=i.value;return E(B(Bo(e),Wo(t)))}return E(B(wo,Wo(e)))},o=e=>{switch(e.kind){case"array":return Lt(o)(e.value);default:return[e]}};switch(e.kind){case"null":return G({kind:"bottom"});default:return G(t(o(e)))}}function Ho(e){const t=e.split("");switch(!0){case 0===t.length:return!1;default:{const[e,...o]=t;return-1!=="pmvn".indexOf(e)&&o.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}}function Uo(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...o]=t;return-1!=="ux".indexOf(e)&&-1===o.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Ro(e,t,o){switch(e.kind){case"string":return U(o({1:mo(e.value),2:t}));case"number":case"null":return H(o({1:"null"===e.kind?wo:mo(e.value),2:Mo(Ao(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function Go(e){const t=e=>t=>P(t[2],t[1],e),o=e=>t=>L(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>N(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return o(1);case"x"===n[0]&&void 0!==n[1]:return o(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Bo(e){return yo(O)(ye(Fo(e,(e=>{const t=e.split("");if(0===t.length)return wo;const[o,...n]=t,r=(e=>{switch(e){case"p":return mo("add");case"m":return mo("mul");case"v":return mo("max");case"n":return mo("min");default:return wo}})(o);return yo((e=>{const{init:t,rest:o}=(r=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=St(vt(e,r))(e);return{init:t[0],rest:t[1]}})(n);var r;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:o.join("")}}))(r)}))))}function Fo(e,t){const o=t(e);return _o((()=>[]))(yo((e=>[e[1]].concat(Fo(e[2],t))))(o))}function Wo(e){return R(e.map(Do))}function Do(e){switch(e.kind){case"number":return E(e.value);case"string":return C(e.value);case"null":return{kind:"bottom"};case"object":return C("{object}");case"array":return C("{array}")}}const Vo={strategy:(e,t,o)=>n=>{if(qo(o))return t;if("delta"===e&&qo(t))return wo;if(qo(t))return o;if(ko(t)&&ko(o))return n(t.value,o.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,o,n,r,i)=>{const s=$t(lo(i));if("append"===e&&"add"===t)return zt(o,n,en("append",r.plus));if("append"===e&&"mul"===t)return zt(o,n,en("append",r.times));if("append"===e&&"max"===t)return J(s)(o,n);if("join"===e&&"add"===t)return zt(o,n,en("join",J(i)));if("join"===e&&"mul"===t)return zt(o,n,en("join",J(i)));if("join"===e&&"max"===t)return J(s)(o,n);if("min"===t)return Vo.operation(e,"max",o,n,r,function(e){return V(((t,o)=>xo(e.compare(t,o))))}(i));if("delta"===e&&"max"===t)return $(s)(o,n)?o:n.map(T);if("delta"===e)return zt(o,n,((e,t)=>$(lo(i))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,o,n)=>{if("delta"===e&&"top"===o.kind&&"top"===n.kind)return $(co)(o.error,n.error)?C(o.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return o;if("delta"===e&&"bottom"===o.kind)return{kind:"bottom"};if("top"===o.kind&&"top"===n.kind)return C(J(co)(o.error,n.error));if("top"===o.kind)return o;if("top"===n.kind)return n;if("inner"===o.kind&&"inner"===n.kind)return t(o.a,n.a);if("bottom"===o.kind)return n;if("bottom"===n.kind)return o;throw new Error("Non exhaustive match in extend")}},Ko={plus:(e,t)=>e+t,times:(e,t)=>e*t};function Yo(e,t,o,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const r=e.group,i=t.group;return _o(T)(yo((e=>E(I(e))))(jo(r,i,o,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const r=e.key,i=e.group,s=t.key,a=t.group,c=J(ho(n))(r,s);return _o(T)(yo((e=>E(N(e,c))))(jo(i,a,o,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const r=e.n,i=t.n;if(r===i){const i=e.limit,s=e.group,a=t.limit,c=t.group,u=J(ho(n))(i,a);return _o(T)(yo((e=>E(L(e,u,r))))(jo(s,c,o,n)))}return C("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const r=e.n,i=t.n;if(r===i){const i=e.limit,s=e.group,a=t.limit,c=t.group,u=J(ho(n))(i,a);return _o(T)(yo((e=>E(P(e,u,r))))(jo(s,c,o,n)))}return C("Non matching counts")}return C("Non matching group types")}function $o(e,t,o,n,r,i){const s=(e,t)=>({1:bt(e)(t).concat(ht(Math.max(0,e-t.length),T)),2:kt(e)(t)}),a=(t,o,n)=>{if(0===t.length)return Vo.operation(e,"max",o,n,r,i);if(t.length>0){const[c,...u]=t,l=s(c[2],o),w=l[1],m=l[2],d=s(c[2],n),g=d[1],p=d[2];return Vo.operation(e,c[1],w,g,r,i).concat(a(u,m,p))}throw new Error("Non exhaustive match in recurse")};return _t((c=e=>"bottom"===e.kind,function(e){return e.slice(vt(e,c))})(_t(a(t,o,n))));var c}function Jo(e,t,o){return _o(z)(Zo(e,wo)(t,o))}function Zo(e,t){const o=t=>(o,n)=>Vo.strategy(e,o,n)(Zo(e,t)),n=(n,r)=>{if(fo(Se(W({1:ao,2:Te}))).equals(n.commands,r.commands)){const i=((t,n,r)=>{if("stringGroup"===n.kind&&"stringGroup"===r.kind){const e=Yo(n.group,r.group,o(t),co);return uo(e,(e=>U(Xo(e,co))))}if("numberGroup"===n.kind&&"numberGroup"===r.kind){const e=Yo(n.group,r.group,o(t),Ee);return uo(e,(e=>H(Xo(e,Ee))))}if("tuple"===n.kind&&"tuple"===r.kind){const o=ko(t)?t.value:[];return E(R($o(e,o,n.tuple,r.tuple,Ko,Ee)))}throw new Error(`Non matching payload. Got ${n.kind} and ${r.kind}`)})(qo(n.commands)?t:n.commands,n.payload,r.payload);return uo(i,(e=>B(n.commands,e)))}throw new Error(`Non matching primitive strings. Got ${JSON.stringify(n)} and ${JSON.stringify(r)}`)};return(t,o)=>Oo(G(Vo.extend(e,n,Po(t).state,Po(o).state)))}function Qo(e,t,o){const n=yo((t=>Mo(e,(([e,n])=>{return(r=o,function(e,t){return-1!==r.compare(e,t)})(e,t);var r}))))(t);return _o((()=>e))(n)}function Xo(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return qo(e.key)?e:N(Qo(e.group,e.key,t),e.key);case"countLimit":{const o=e.limit,n=e.n,r=e.group,i=So(n,r,((e,t)=>t<=1?wo:mo(t-1)),t),s=J(ho(t))(o,i);return L(Qo(r,s,t),s,n)}case"uniqueLimit":{const o=e.limit,n=e.n,r=e.group,i=(e,t)=>{switch(e.kind){case"object":{const o=[...e.value.keys(),...t.keys()],r=new Set(o);return r.size>=n?wo:mo(r)}default:return wo}},s=So(new Set,r,i,t),a=J(ho(t))(o,s);return P(Qo(r,a,t),a,n)}}}function en(e,t){return(o,n)=>Vo.extend(e,((e,o)=>E(t(e,o))),o,n)}function tn(e,t){return Jo("append",e,t)}function on(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function nn(e,t){const o=Object.keys(e),n=o.length,r={};for(let i=0;i<n;i++){const n=o[i],s=t(n,e[n]);ko(s)&&(r[n]=s.value)}return r}const rn={},[sn,an]=function(){var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},o=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},r=function(){function n(e){return"number"==typeof e?s[e]:e}function r(e){return"number"==typeof e?a[e]:e}function i(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function c(e,t,o){void 0===o&&(o=w);var n=t.reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===n?null:o(n)}function u(e,t){var o=t.slice();return o.unshift(e),o}function l(e,t,o){return void 0===o&&(o=w),c(e,u("properties",t),o)}var w=function(e){return e},m=function(e){return!0},d=function(e,t){return function(o){return e(o)&&t(o)}},g=function(e,t){return function(o){return e(o)||t(o)}},p=function(e){return function(t){return!e(t)}},f=function(e,t){return function(o){return o>=e&&o<=t}},h=function(e){return new Date(e).getTime()},y=function(e){return c(e,["time"],h)},b=function(e,t){return c(t,e,h)},v=function(e,t,o,n,r,i){return function(s){var a=c(s,e,(function(e){return e.filter(n).map((function(e){return c(e,t)})).reduce(r,i)}));return o(null===a?i:a)}},k=function(e){return function(t){return("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(r(e).toLowerCase())>-1}},q=function(e){return function(t){return null!=t&&Array.isArray(t)&&t.indexOf(e)>=0}};function _(e,t,o,n,r){var i=c(e.getSegments(),[t,o])||!1;return r&&(n||i)&&e.setSegmentActivation(t,o,r),i}function x(e,t,o){return c(e.getSegments(),[t,o])||!1}function z(e,o,n){return void 0===n&&(n=18e5),function(r){return{a:{m:function(e,t){return[t[0],r.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:r.a.z,t[1])]},z:[[],r.a.z]},p:function(t,n){return[[e(t)],c(n,o)===e(t)?r.p(t,n):r.a.z]},r:function(t,o){return r.r(t,o[0]!=[]&&o[0][0]===e(t)?o[1]:r.a.z)},d:r.d.sq||{l:function(i,s){var a=c(i,o),u=e(s);if(a!==u)return null;var l=r.d.l(i,s);if(!(Array.isArray(l)&&l.length>1))return null;var w=t(l),m=w[0],d=w.slice(1),g=+(y(i)||s.getCurrentTime()),p=Math.floor(g/n),f={};return f[p]={},f[p][u]=1===d.length?d[0]:d,[m,"u",null,f]},i:function(t,o){if(!Array.isArray(t)||"object"!=typeof t[3])return[[],r.a.z];var n=e(o),i=t[3];return[[n],Object.keys(i).map((function(e){return i[e][n]})).filter((function(e){return e})).map((function(e){return r.d.i([t[0]].concat(e))})).reduce(r.a.m,r.a.z)]}}}}}var j=z((function(e){return e.getCurrentSession()}),["session_id"],18e5),S=z((function(e){return e.getCurrentView()}),["view_id"],3e5);function A(e,r,i,s){return void 0===s&&(s=1),{a:{m:function(e,t){return e.concat(t).slice(-i)},z:[]},p:function(t,o){return c(o,["name"])===n(r)?[e.p(t,o)]:[]},r:function(t,o){return e.r(t,o.reduce((function(t,o){return e.a.m(t,o)}),e.a.z))},d:e.d.ftn||{l:function(t,o){var n,r=e.d.l(t,o),a=c(t,["time"],h)*s;return r&&[r[0],"x"+i,null,(n={},n[a]=2==r.length?r[1]:r.slice(1),n)]},i:function(n,r){return n?Object.keys(n[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?o([n[0]],t(n[3][e]),!1):[n[0],n[3][e]]})).map((function(t){return e.d.i(t,r)})):[]}}}}var M=function(e,t){return null===e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t}},O=function(e,t){return e&&t?e(t):null},T=function(e,t,o){if(o&&o.result&&Array.isArray(o.result)){var n=O(e.d&&e.d.m,{result:o.result[0]}),r=O(t.d&&t.d.m,{result:o.result[1]});return M(n,r)}return null};return{q:function(e){return{lift:function(t,o){return e.d.l(t,o)},interpret:function(t,o){return function(t,o){return{result:e.r(t,o)}}(o,e.d.i(t,o))},migrate:function(t){return t&&e.d.m?e.d.m(t):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return e.reduce(d)},acq:function(e,t){return{p:function(o,n){return[e.p(o,n),t.p(o,n)]},r:function(o,n){return e.r(o,n[0])&&t.r(o,n[1])},a:{z:[e.a.z,t.a.z],m:function(o,n){return[e.a.m(o[0],n[0]),t.a.m(o[1],n[1])]}},d:{l:function(o,n){return M(e.d.l(o,n),t.d.l(o,n))},i:function(o,n){return o?[e.d.i(o.a||null,n),t.d.i(o.b||null,n)]:[e.a.z,t.a.z]},m:function(o){return T(e,t,o)}}}},af_i:function(e,t,o){return void 0===o&&(o=m),function(n){return c(n,e,(function(e){return e.filter(o).map(t).reduce((function(e,t){return e&&t}),!0)}))&&!0}},af_l:function(e,t,o){return void 0===o&&(o=m),function(n){var r=c(n,e,(function(e){return e.filter(o).length}));return t(null===r?0:r)}},af_m:function(e,t,o,n){return void 0===n&&(n=m),function(r){var i=c(r,e,(function(e){return e.filter(n)}));return null===i||0===i.length?o(0):o(i.map((function(e){return c(e,t)})).reduce((function(e,t){return e+t}),0)/i.length)}},af_n:function(e,t,o,n){return void 0===n&&(n=m),v(e,t,o,n,(function(e,t){return Math.min(e,t)}),Number.POSITIVE_INFINITY)},af_p:function(e,t,o,n){return void 0===n&&(n=m),v(e,t,o,n,(function(e,t){return e*t}),1)},af_s:function(e,t,o,n){return void 0===n&&(n=m),v(e,t,o,n,(function(e,t){return e+t}),0)},af_u:function(e,t,o){return void 0===o&&(o=m),function(n){return c(n,e,(function(e){return e.filter(o).map(t).reduce((function(e,t){return e||t}),!1)}))||!1}},af_x:function(e,t,o,n){return void 0===n&&(n=m),v(e,t,o,n,(function(e,t){return Math.max(e,t)}),Number.NEGATIVE_INFINITY)},as:function(e,t,o){var n=u("properties",t);return function(t){for(var r=c(t,n),i=o.length,s=!0,a=0;a<i;a++){var u=o[a];if(!(s=e(u)(r)))break}return s}},c:q,c_:function(e,t){return function(o){return q(t)(c(o,e))}},cl_:function(e,t){return function(o){return q(r(t))(c(o,e))}},cx:function(e){return function(t){return q(r(e))(t)}},ctu:function(e,t,o,r){return{a:r?{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t).slice(-r)},z:[]}:{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t)},z:[]},p:function(r,i){return c(i,["name"])===n(e)&&t(i)?c(i,o):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(t,o,r,i){function s(e,t){var o,n=function(e){return{k:e.k,c:1+e.c}},r={arr:[],add:{k:t,c:1}};return t?(o=e.reduce((function(e,t){return e.add.k===t.k?{arr:e.arr,add:n(t)}:{arr:e.arr.concat(t),add:e.add}}),r)).arr.concat(o.add):e}return{a:i?{m:function(e,t){return s(e,t).slice(-i)},z:[]}:{m:function(e,t){return s(e,t)},z:[]},p:function(e,i){return c(i,["name"])===n(t)&&o(i)?c(i,r):null},r:function(t,o){return o.reduce((function(t,o){var n;return e(e({},t),((n={})[o.k]=o.c,n))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,t,o,r){return{a:r?{m:function(e,t){return e.concat(t).slice(-r)},z:[]}:{m:function(e,t){return e.concat(t)},z:[]},p:function(r,i){return c(i,["name"])===n(e)&&t(i)?c(i,o):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,t,o){return void 0===o&&(o=w),{a:{m:function(e,t){return e+t},z:0},p:function(o,r){return c(r,["name"])===n(e)&&t(r)?1:0},r:function(e,t){return o(t)},d:{l:function(o){return c(o,["name"])===n(e)&&t(o)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},e:function(e){return function(t){return t===e}},e_:function(e,t){return function(o){return c(o,e)===t}},fm:function(e,t){return{p:t.p,r:function(o,n){return e(t.r(o,n))},a:t.a,d:t.d}},ftn:function(e,t,o){return{a:{m:function(e,t){return e.concat(t.slice(0,o-e.length))},z:[]},p:function(o,r){return c(r,["name"])===n(t)?[e.p(o,r)]:[]},r:function(t,o){return e.r(t,o.reduce((function(t,o){return e.a.m(t,o)}),e.a.z))},d:A(e,t,o,-1).d}},fw:function(e,t,o,r){return void 0===r&&(r=w),{a:{m:function(e,t){return null===e?t:e},z:null},p:function(r,i){return c(i,["name"])===n(e)&&t(i)?c(i,o):null},r:function(e,t){return t},d:{l:function(o){return c(o,["name"])===n(e)&&t(o)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(t){return t>e}},g_:function(e,t){return function(o){return c(o,e)>t}},gb:function(e,t,o){return{a:{m:function(o,n){return Object.keys(o).concat(Object.keys(n)).filter((function(e,t,o){return o.indexOf(e)===t})).sort((function(e,t){return Math.max(c(o,[t,1]),c(n,[t,1]))-Math.max(c(o,[e,1]),c(n,[e,1]))})).slice(0,t).reduce((function(t,r){var i=e.a.m(c(o,[r,0])||e.a.z,c(n,[r,0])||e.a.z);return t[r]=[i,Math.max(c(o,[r,1]),c(n,[r,1]))],t}),{})},z:{}},p:function(t,n){var r,i,s=c(n,u("properties",o)),a=e.p(t,n);return null==s||(null==(i=a)||"object"==typeof i&&0===Object.keys(i).length||i===e.a.z)?{}:((r={})[s]=[a,c(n,["time"],h)],r)},r:function(t,o){var n={};return Object.keys(o).forEach((function(r){return n[r]=e.r(t,o[r][0])})),n},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(t){return t>=e}},ge_:function(e,t){return function(o){return c(o,e)>=t}},i_:w,ifp:function(e){return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(t,o){return function(t){return x(t,"1p",e)}(t)},d:{l:function(e,t){return null},i:function(e){return null}}}},isp:function(e,t,o,n){return{a:{m:function(e,t){return t},z:!1},p:function(o,n){return x(o,e,t)},r:function(r,i){return _(r,e,t,o,n)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,t,o,n){return{a:{m:function(e,t){return t},z:!1},p:function(o,n){return x(o,e,t)},r:function(r,i){return _(r,e,t,o,n)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:c,l:function(e){return function(t){return t<e}},l_:function(e,t){return function(o){var n=c(o,e);return null!==n&&n<t}},le:function(e){return function(t){return t<=e}},le_:function(e,t){return function(o){var n=c(o,e);return null!==n&&n<=t}},lm:function(e,t){var o=function(t){return function(e,t,o){var n,r=e||{},i=t[o]||{},s=(i["1p"]||{}).const||0;return Object.keys(r).forEach((function(e){r[e].forEach((function(t){var o=(i[e]||{})[t]||0;s+=o}))})),n=s,1/(1+Math.pow(Math.E,-n))}(t.getSegmentsArray(),t.getLookalikeModels(),e)};return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(e,n){return t(o(e))},d:{l:function(e,t){return null},i:function(e){return null}}}},ltn:A,mnw:function(e,t,o,r){void 0===r&&(r=w);var i=Number.POSITIVE_INFINITY;return{a:{m:function(e,t){return e<t?e:t},z:i},p:function(r,s){return c(s,["name"])===n(e)&&t(s)?c(s,o):i},r:function(e,t){return r(t)},d:{l:function(r){return c(r,["name"])===n(e)&&t(r)?["n",c(r,o)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:i}}}},mxw:function(e,t,o,r){void 0===r&&(r=w);var i=Number.NEGATIVE_INFINITY;return{a:{m:function(e,t){return e>t?e:t},z:i},p:function(r,s){return c(s,["name"])===n(e)&&t(s)?c(s,o):i},r:function(e,t){return r(t)},d:{l:function(r){return c(r,["name"])===n(e)&&t(r)?["v",c(r,o)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:i}}}},n0:p(w),n:function(e){return function(t){return t!==e}},nt:p,n_:function(e,t){return function(o){return c(o,e)!==t}},o:function(e){return e.reduce(g)},ocq:function(e,t){return{p:function(o,n){return[e.p(o,n),t.p(o,n)]},r:function(o,n){return e.r(o,n[0])||t.r(o,n[1])},a:{z:[e.a.z,t.a.z],m:function(o,n){return[e.a.m(o[0],n[0]),t.a.m(o[1],n[1])]}},d:{l:function(o,n){return M(e.d.l(o,n),t.d.l(o,n))},i:function(o,n){return o?[e.d.i(o.a||null,n),t.d.i(o.b||null,n)]:[e.a.z,t.a.z]},m:function(o){return T(e,t,o)}}}},oe:function(e){for(var t=Object.keys(e),o=t.length,n=new Array(o);o--;)n[o]=[t[o],e[t[o]]];return n},os:function(e,t,o){var n=u("properties",t);return function(t){for(var r=c(t,n),i=o.length,s=!1,a=0;a<i;a++){var u=o[a];if(s=e(u)(r))break}return s}},pb:function(e,t,o){return function(n){return f(t,o)(l(n,e))}},pc:function(e,t){return function(o){var n=l(o,e);return null!=n&&Array.isArray(n)&&n.indexOf(t)>=0}},pc_:function(e,t){return function(o){var n=l(o,e),i=r(t);return null!=n&&Array.isArray(n)&&n.indexOf(i)>=0}},pe:function(e,t){return function(o){return l(o,e)===t}},pg:function(e,t){return function(o){return l(o,e)>t}},pge:function(e,t){return function(o){return l(o,e)>=t}},pl:function(e,t){return function(o){var n=l(o,e);return null!==n&&n<t}},ple:function(e,t){return function(o){var n=l(o,e);return null!==n&&n<=t}},pn:function(e,t){return function(o){return l(o,e)!==t}},ps:function(e,t){return function(o){return k(t)(l(o,e))}},pw:function(e,t,o,r){return void 0===r&&(r=w),{a:{m:function(e,t){return e*t},z:1},p:function(r,i){return c(i,["name"])===n(e)&&t(i)?c(i,o):1},r:function(e,t){return r(t)},d:{l:function(r){return c(r,["name"])===n(e)&&t(r)?(i=c(r,o))>=1?["m2p",i]:i>0?["m2p",null,1/i]:0==i?["m2p",0]:i>-1?["m2p",null,1/i,1]:["m2p",i,null,1]:null;var i},i:function(e){return e?Array.isArray(e)?0===(t=e.slice(1))[0]?0:Math.pow(-1,t[2]||0)*(t[0]||1)/(t[1]||1):e:1;var t}}}},s:k,s_:function(e,t){return function(o){return k(t)(c(o,e))}},scq:function(e,t,o){return void 0===o&&(o=w),{p:function(o,n){return[e.p(o,n),t.p(o,n)]},r:function(n,r){return o(e.r(n,r[0])+t.r(n,r[1]))},a:{z:[e.a.z,t.a.z],m:function(o,n){return[e.a.m(o[0],n[0]),t.a.m(o[1],n[1])]}},d:{l:function(o,n){return M(e.d.l(o,n),t.d.l(o,n))},i:function(o,n){return o?[e.d.i(o.a||null,n),t.d.i(o.b||null,n)]:[e.a.z,t.a.z]},m:function(o){return T(e,t,o)}}}},sq:j,sw:function(e,t,o,r){return void 0===r&&(r=w),{a:{m:function(e,t){return e+t},z:0},p:function(r,i){return c(i,["name"])===n(e)&&t(i)?c(i,o):0},r:function(e,t){return r(t)},d:{l:function(r){return function(o){return c(o,["name"])===n(e)&&t(o)}(r)?(i=c(r,o))<0?["p2",null,-i]:["p2",i]:null;var i},i:function(e){return e?Array.isArray(e)?((t=e.slice(1))[0]||0)-(t[1]||0):e:0;var t}}}},t:m,tb:function(e,t){return function(o){return f(e,t)(y(o))}},te:function(e){return function(t){return y(t)===e}},te_:function(e,t){return function(o){return b(e,o)===t}},tg:function(e){return function(t){return y(t)>e}},tg_:function(e,t){return function(o){return b(e,o)>t}},tge:function(e){return function(t){return y(t)>=e}},tge_:function(e,t){return function(o){return b(e,o)>=t}},ti:h,tl:function(e){return function(t){return y(t)<e}},tl_:function(e,t){return function(o){return b(e,o)<t}},tle:function(e){return function(t){return y(t)<e}},tle_:function(e,t){return function(o){return b(e,o)<t}},tn:function(e){return function(t){return y(t)!==e}},tn_:function(e,t){return function(o){return b(e,o)!==t}},tw:function(e,n,r){var s=r||100,a=Math.ceil(n/s),u=function(e){return Math.floor(e/a)},l=function(e,t,o){var r;return[u(e-n),(r={},r[u(t)]=o,r)]},w=function(t,o){var n=Math.max(t[0],o[0]),r=Object.keys(t[1]).filter((function(e){return e>=n})).concat(Object.keys(o[1]).filter((function(e){return e>=n}))).filter((function(e,t,o){return o.indexOf(e)===t})).reduce((function(n,r){var i=e.a.m(t[1][r]||e.a.z,o[1][r]||e.a.z);return i!==e.a.z&&(n[r]=i),n}),{});return[n,r]},m=[Number.NEGATIVE_INFINITY,{}],d=function(e){var o=function(o){return o.map((function(o){var n=t(o,3),r=n[0],i=(n[1],n[2]);return l(e.t,i,r)})).reduce(w,m)};return w(o(e.in),o(e.out))},g=function(o){if(void 0!==o.result)return g(o.result);if(void 0!==o.w)return g(d(o));var n=t(o,2),r=(n[0],n[1]),s=null,a={};for(var c in r){var u=e.d.m({result:r[c]});u&&Array.isArray(u)&&(s=u[0],a[c]=i(u.slice(1)))}return s&&[s,"w",o[0],a]};return{a:{m:function(e,t){var o=e.w?d(e):e;return w(o,t)},z:m},p:function(t,o){return l(t.getCurrentTime(),c(o,["time"],h),e.p(t,o))},r:function(t,o){var n=(o.w?d(o):o)[1];return e.r(t,Object.keys(n).reduce((function(t,o){return e.a.m(t,n[o])}),e.a.z))},d:e.d.tw||{l:function(n,r){var i=e.d.l(n,r);return i&&o([i[0],"w"],t(l(r.getCurrentTime(),c(n,["time"],h),i.slice(1))),!1)},i:function(t,o){var n=Array.isArray(t)?t:[];return[n[2]||null,Object.keys(n[3]||{}).map((function(t){var r;return(r={})[t]=e.d.i(n[3][t],o),r})).reduce((function(e,t){return Object.keys(t).forEach((function(o){return e[o]=t[o]})),e}),{})]},m:e.d.m&&g}}},vgw:function(e,t,o,r){void 0===r&&(r=w);var i={v:0,k:0};return{a:{m:function(e,t){var o=e.k+t.k;return{v:o?e.v+t.k*(t.v-e.v)/o:0,k:o}},z:i},p:function(r,s){return c(s,["name"])===n(e)&&t(s)?{v:c(s,o),k:1}:i},r:function(e,t){return r(t.v)},d:{l:function(r){return c(r,["name"])===n(e)&&t(r)?0==(i=c(r,o))?["p3",1]:i<0?["p3",1,null,-i]:["p3",1,i]:null;var i},i:function(e){return e?Array.isArray(e)?{v:(((t=e.slice(1))[1]||0)-(t[2]||0))/(t[0]||1),k:t[0]||0}:void 0:i;var t}}}},vq:S,w:function(e){return function(t){return t===r(e)}},x:function(e){return function(t){return t!==r(e)}},y:function(e,t){return function(o){return l(o,e)===a[t]}},y_:function(e,t){return function(o){return c(o,e)===a[t]}},z:function(e,t){return function(o){return l(o,e)!==a[t]}},z_:function(e,t){return function(o){return c(o,e)!==a[t]}}}}(),i={1e7:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/education/graduate school"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/science"),r.ge(3)),2592e6))),10000001:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles"),r.ge(3)),2592e6)),10000002:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/books and literature"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],317),r.ge(3)),2592e6))),10000003:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],318),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],320),r.ge(3)),2592e6))),10000004:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/careers"),r.ge(3)),2592e6)),10000005:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/education"),r.ge(3)),2592e6)),10000006:r.q(r.ocq(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],319),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/society/social institution/marriage"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],323),r.ge(3)),2592e6))),10000007:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],316),r.ge(3)),2592e6)),10000008:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink"),r.ge(3)),2592e6)),10000010:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],321),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/health and fitness"),r.ge(3)),2592e6))),10000011:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/hobbies and interests"),r.ge(3)),2592e6)),10000012:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/home and garden"),r.ge(3)),2592e6)),10000013:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies and tv"),r.ge(3)),2592e6))),10000014:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/music"),r.ge(3)),2592e6)),10000015:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],322),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/news"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/law, govt and politics"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/business and industrial/business news"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/finance/financial news"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/sports news"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/technology and computing/tech news"),r.ge(3)),2592e6))),10000016:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],320),r.ge(3)),2592e6)),10000017:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets"),r.ge(3)),2592e6)),10000018:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],316),r.ge(3)),2592e6)),10000019:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/real estate"),r.ge(3)),2592e6)),10000020:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/shopping"),r.ge(3)),2592e6)),10000021:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports"),r.ge(3)),2592e6)),10000022:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/style and fashion"),r.ge(3)),2592e6)),10000023:r.q(r.ocq(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/technology and computing"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/science/computer science"),r.ge(3)),2592e6)),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/business and industrial/automation"),r.ge(3)),2592e6))),10000024:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies and tv/television"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/tv"),r.ge(3)),2592e6))),10000025:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/travel"),r.ge(3)),2592e6)),10000026:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/hobbies and interests/games/video and computer games"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/technology and computing/consumer electronics/game systems and consoles"),r.ge(3)),2592e6))),10000035:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/science/physics"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/science/engineering"),r.ge(3)),2592e6))),10000036:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles/buying and selling cars"),r.ge(3)),2592e6)),10000037:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles/motor shows"),r.ge(3)),2592e6)),10000038:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles/electric vehicles"),r.ge(3)),2592e6)),10000039:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles/motorcycles"),r.ge(3)),2592e6)),10000040:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/automotive and vehicles/cars/performance vehicles"),r.ge(3)),2592e6)),10000041:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],317),r.ge(3)),2592e6)),10000042:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],318),r.ge(3)),2592e6)),10000043:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],323),r.ge(3)),2592e6)),10000044:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],319),r.ge(3)),2592e6)),10000045:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/dance"),r.ge(3)),2592e6)),10000046:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/visual art and design"),r.ge(3)),2592e6)),10000047:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/beverages/alcoholic beverages"),r.ge(3)),2592e6)),10000048:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/barbecues and grilling"),r.ge(3)),2592e6)),10000049:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/desserts and baking"),r.ge(3)),2592e6)),10000050:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/dining out"),r.ge(3)),2592e6)),10000051:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/food allergies"),r.ge(3)),2592e6)),10000052:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],321),r.ge(3)),2592e6)),10000053:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/food and drink/vegetarian"),r.ge(3)),2592e6)),10000054:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/health and fitness/exercise"),r.ge(3)),2592e6)),10000056:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/health and fitness/nutrition"),r.ge(3)),2592e6)),10000058:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/home and garden/gardening and landscaping"),r.ge(3)),2592e6)),10000059:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies and tv/action"),r.ge(3)),2592e6)),10000060:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies and tv/animated"),r.ge(3)),2592e6)),10000062:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/art and entertainment/movies and tv/horror"),r.ge(3)),2592e6)),10000063:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],322),r.ge(3)),2592e6)),10000064:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/law, govt and politics/legal issues"),r.ge(3)),2592e6)),10000065:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/news/national news"),r.ge(3)),2592e6)),10000066:r.q(r.ocq(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/law, govt and politics/politics"),r.ge(3)),2592e6),r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/law, govt and politics/government"),r.ge(3)),2592e6))),10000067:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/science/weather"),r.ge(3)),2592e6)),10000068:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets/birds"),r.ge(3)),2592e6)),10000069:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets/cats"),r.ge(3)),2592e6)),10000070:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets/dogs"),r.ge(3)),2592e6)),10000071:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets/large animals"),r.ge(3)),2592e6)),10000072:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/pets/reptiles"),r.ge(3)),2592e6)),10000073:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/football"),r.ge(3)),2592e6)),10000074:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/baseball"),r.ge(3)),2592e6)),10000075:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/basketball"),r.ge(3)),2592e6)),10000076:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/bodybuilding"),r.ge(3)),2592e6)),10000077:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/bowling"),r.ge(3)),2592e6)),10000078:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/boxing"),r.ge(3)),2592e6)),10000079:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/bicycling"),r.ge(3)),2592e6)),10000080:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/fishing"),r.ge(3)),2592e6)),10000081:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/golf"),r.ge(3)),2592e6)),10000082:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/hunting and shooting"),r.ge(3)),2592e6)),10000083:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/rugby"),r.ge(3)),2592e6)),10000084:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/skiing"),r.ge(3)),2592e6)),10000085:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/tennis"),r.ge(3)),2592e6)),10000086:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/sports/walking"),r.ge(3)),2592e6)),10000087:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/style and fashion/beauty"),r.ge(3)),2592e6)),10000088:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/style and fashion/body art"),r.ge(3)),2592e6)),10000090:r.q(r.tw(r.cw(0,r.pc_(["classifications_watson","taxonomy_labels"],"/technology and computing/consumer electronics"),r.ge(3)),2592e6)),10065:r.q(r.cw(0,r.pe(["client","url"],"https://www.timeout.fr/paris/que-faire/croquez-la-metropole-de-londres-avec-eurostar"),r.ge(1))),10115:r.q(r.cw(0,r.o([r.os(r.cx,["category","page_tags"],["valentine\'s day",52]),r.os(r.s,["client","title"],[921,920,52,591,506,163,726,919]),r.os(r.s,["client","url"],[920,921,52,591,506,163,726,919])]),r.ge(1))),10116:r.q(r.cw(0,r.o([r.os(r.w,["client","url"],[380,326,387,407,345,383,837,484,649,82,50,612,584,790,807,773,428,812,813,795,797,698,699,700,630,629,"aire-lliure","aire-libre","actividades-exterior","activitats-exterior",586,590]),r.os(r.s,["client","title"],[380,326,387,407,345,383,837,484,649,82,50,612,584,790,807,773,428,812,813,586,590,795,797,698,699,700,630,629,"aire lliure","aire libre","actividades exterior","activitats exterior"]),r.pc_(["category","page_tags"],"outdoor activities"),r.pc_(["category","page_tags"],50)]),r.ge(1))),10117:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[327,518,150,843,863,785,891,190,738,214,32,532,531,214,939,190,706,459,817,815,525,786,529,530,"navegar",447,442,"oceà",818,814,886,887,"aquàtic","acuático",446]),r.os(r.s,["client","url"],[327,518,150,843,863,785,891,190,738,214,32,532,531,214,939,190,706,459,817,815,525,786,"ocea",529,530,"nevager",447,442,818,814,886,"aquatic","acuatico",887,446])]),r.ge(1))),10179:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_Experian","1004602309",!1,"10179"),r.itp("liveramp_Experian","1004602309",!1,"10179")),r.itp("eyeota","6685",!1,"10179")),r.itp("liveramp_Experian","1004602299",!1,"10179")),r.itp("eyeota","6685",!1,"10179")),r.itp("liveramp_Experian","1004602229",!1,"10179"))),10319:r.q(r.ocq(r.cw(0,r.os(r.w,["client","url"],[182,675,660,661,658,664,662,663]),r.ge(1)),r.cw(1,r.os(r.w,["dest_url"],[664,662,663,"https://checkout.timeout.com/london/private-hire/",182,675,660,661,658]),r.ge(1)))),10339:r.q(r.cw(0,r.a([r.y(["page_country"],226),r.y(["geo_info","country"],100)]),r.ge(1))),10428:r.q(r.sq(r.cw(0,r.t,r.e(1)))),10463:r.q(r.ocq(r.ocq(r.ocq(r.cw(1,r.os(r.s,["dest_url"],[273,274,276,272,213,156,216,212,184,187]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[275,678,213,156,216,212,184,187]),r.ge(1))),r.itp("skimlinks","4823309",!1,"10463")),r.itp("skimlinks","4823544",!1,"10463"))),10622:r.q(r.sq(r.cw(0,r.t,r.n(1)))),10790:r.q(r.ocq(r.ocq(r.itp("comscore","321997US",!1,"10790"),r.itp("eyeota","228",!1,"10790")),r.itp("eyeota","11209",!1,"10790"))),10798:r.q(r.tw(r.cw(0,r.y(["page_city"],140),r.ge(2)),2592e6)),10852:r.q(r.cw(0,r.pe(["page_city"],"New Orleans"),r.ge(1))),10853:r.q(r.itp("comscore","218997US",!1,"10853")),10854:r.q(r.itp("comscore","118997US",!1,"10854")),10855:r.q(r.ocq(r.itp("comscore","218246US",!1,"10855"),r.itp("comscore","118246US",!1,"10855"))),10856:r.q(r.ocq(r.itp("comscore","225346US",!1,"10856"),r.itp("comscore","125346US",!1,"10856"))),10857:r.q(r.ocq(r.itp("comscore","235546US",!1,"10857"),r.itp("comscore","135546US",!1,"10857"))),10858:r.q(r.ocq(r.itp("comscore","245997US",!1,"10858"),r.itp("comscore","145997US",!1,"10858"))),10859:r.q(r.ocq(r.itp("comscore","255997US",!1,"10859"),r.itp("comscore","155997US",!1,"10859"))),10860:r.q(r.itp("eyeota","326",!1,"10860")),10861:r.q(r.itp("eyeota","327",!1,"10861")),10862:r.q(r.ocq(r.itp("eyeota","13003",!1,"10862"),r.itp("eyeota","246",!1,"10862"))),10863:r.q(r.ocq(r.itp("eyeota","13000",!1,"10863"),r.itp("eyeota","248",!1,"10863"))),10864:r.q(r.ocq(r.itp("eyeota","13004",!1,"10864"),r.itp("eyeota","245",!1,"10864"))),10865:r.q(r.itp("eyeota","241",!1,"10865")),10866:r.q(r.itp("eyeota","238",!1,"10866")),10867:r.q(r.itp("eyeota","239",!1,"10867")),10868:r.q(r.itp("eyeota","240",!1,"10868")),10869:r.q(r.itp("eyeota","236",!1,"10869")),10870:r.q(r.itp("eyeota","237",!1,"10870")),11122:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[217,218,467,483,556,"jack daniel","jim beam",697,758,757,732,"markers-mark",473,625,643,730,731,205]),r.os(r.s,["client","url"],[217,218,467,483,556,"jack-daniel","jim-beam",697,758,757,732,"makers-mark",473,625,643,730,731,205])]),r.ge(1))),11200:r.q(r.cw(0,r.os(r.s,["client","url"],["timeout.com/london/film/the-old-man-the-gun","/london/film"]),r.ge(1))),11201:r.q(r.tw(r.cw(0,r.pe(["geo_info","country"],"Switzerland"),r.ge(1)),2592e6)),11202:r.q(r.tw(r.cw(0,r.os(r.s,["client","url"],[296,"snowboard","winter-sport","neu","nieve","esqui","hivern","invierno"]),r.ge(1)),2592e6)),11893:r.q(r.ocq(r.tw(r.cw(0,r.os(r.s,["client","url"],[260,280]),r.ge(1)),2592e6),r.itp("eyeota","13157",!1,"11893"))),11903:r.q(r.acq(r.itp("eyeota","6675",!1,"11903"),r.itp("eyeota","6689",!1,"11903"))),11904:r.q(r.acq(r.ocq(r.ocq(r.itp("eyeota","6677",!1,"11904"),r.itp("eyeota","6678",!1,"11904")),r.itp("eyeota","6679",!1,"11904")),r.itp("eyeota","13026",!1,"11904"))),12008:r.q(r.cw(0,r.a([r.os(r.s,["client","referrer"],["twitter","instagram","facebook","snapchat"]),r.nt(r.ps(["client","referrer"],310))]),r.ge(1))),12198:r.q(r.cw(0,r.ps(["client","url"],948),r.ge(1))),12199:r.q(r.cw(0,r.os(r.s,["client","url"],[948,"discover-london-off-peak-this-summer-with-your-family","find-your-ideal-off-peak-adventure","have-your-best-london-summer-yet",897,"embrace-summer-with-these-five-itineraries-for-couples","uncover-the-gems-of-the-victoria-line",947]),r.ge(1))),12200:r.q(r.cw(0,r.os(r.s,["client","url"],["family-adventure-map","family-adventure-map-northern-navigator","family-adventure-map-southern-seeker","family-adventure-map-eastern-explorer","family-adventure-map-western-wanderer","six-famous-horror-film-locations-to-visit-in-london-this-halloween","sensationally-spooky-halloween-events-for-families-in-london",947,"get-the-most-out-of-london-this-winter","five-of-londons-finest-festive-after-work-activities","five-great-places-to-support-small-business-saturday-in-london","save-money-in-london-over-the-festive-period-with-these-nine-nifty-tips","wonderful-off-peak-wintery-activities-for-families-in-london","everything-you-need-to-know-about-public-transport-in-london-over-the-festive-period","eight-new-years-resolutions-every-londoner-should-make","welcome-to-the-london-borough-of-culture"]),r.ge(1))),12381:r.q(r.itp("comscore","118997US",!1,"12381")),12475:r.q(r.ocq(r.tw(r.cw(0,r.os(r.s,["client","title"],[8,"Primavera Sound","sónar","cruïlla"]),r.ge(1)),2592e6),r.tw(r.cw(0,r.pc_(["category","page_tags"],29),r.ge(1)),2592e6))),12668:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[569,838,839,942,792,81,847,835,865,864,"vintageclothes","vintage-clothes",842,834,436,889,"corporate-responsib",513,953,579]),r.os(r.s,["client","title"],[569,838,839,942,792,81,847,835,865,864,"vintage clothes",842,834,436,889,"corporate responsib",513,953,579])]),r.ge(1)),2592e6)),13108:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.ps(["client","title"],"first-time buyer"),r.ge(1)),r.cw(0,r.ps(["client","title"],"shared ownership"),r.ge(1))),r.cw(0,r.ps(["client","title"],"Help to Buy"),r.ge(1))),r.itp("eyeota","6692",!1,"13108"))),13132:r.q(r.ocq(r.tw(r.cw(0,r.a([r.os(r.s,["geo_info","province"],[27,370,350,405,394,395,332,361,337,368,356,340,359,360,369,372,374,392,401,404,406,330,334,336,347,363,364,365,371,379,382,388,390,396,339,375,386,362,355,333,341]),r.y(["geo_info","country"],28)]),r.ge(1)),2592e6),r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/london/hotels/bloc-gatwick","www.timeout.com/london/hotels/gatwick-airport-hotels"]),r.ge(1)))),13133:r.q(r.tw(r.cw(0,r.a([r.os(r.s,["geo_info","province"],[27,370,350,405,394,395,332,361,337,368,356,340,359,360,369,372,374,392,401,404,406,330,334,336,347,363,364,365,371,379,382,388,390,396,339,375,386,362,355,333,341]),r.y(["geo_info","country"],28)]),r.ge(3)),2592e6)),13183:r.q(r.cw(0,r.o([r.ps(["client","url"],"classical-music"),r.pe(["category","sub_category1"],"classical-and-opera")]),r.ge(1))),13225:r.q(r.ocq(r.ocq(r.cw(0,r.o([r.y(["category","primary_category"],306),r.os(r.s,["client","title"],[17,2,13,509,510,"psycle","spin","gyms","studio",6,202,4,511])]),r.ge(1)),r.cw(0,r.y(["event","eventType"],138),r.ge(1))),r.cw(0,r.os(r.s,["event","name"],[2,509,510]),r.ge(1)))),13444:r.q(r.tw(r.cw(2,r.t,r.ge(1)),2592e6)),13445:r.q(r.tw(r.cw(0,r.t,r.ge(5)),2592e6)),13446:r.q(r.sq(r.cw(0,r.t,r.ge(3)))),13448:r.q(r.scq(r.tw(r.cw(3,r.pge(["aggregations","PageviewEngagement","completion"],.7)),2592e6),r.vq(r.mxw(4,r.t,["properties","completion"],r.ge(.7))),r.ge(1))),13449:r.q(r.tw(r.cw(1,r.nt(r.ps(["dest_url"],310)),r.ge(1)),2592e6)),13520:r.q(r.tw(r.cw(0,r.os(r.s,["client","url"],[4,"wellbeing",950,137,"salud","salut","bienestar","benestar"]),r.ge(1)),2592e6)),13640:r.q(r.tw(r.cw(0,r.o([r.os(r.w,["category","sub_category1"],["café bars",479]),r.os(r.s,["client","url"],[478,"coffee"])]),r.ge(1)),2592e6)),13769:r.q(r.ocq(r.ocq(r.itp("eyeota","12220",!1,"13769"),r.itp("eyeota","6700",!1,"13769")),r.itp("eyeota","6699",!1,"13769"))),13825:r.q(r.ocq(r.itp("eyeota","225",!1,"13825"),r.itp("eyeota","6672",!1,"13825"))),13826:r.q(r.ocq(r.itp("eyeota","229",!1,"13826"),r.itp("eyeota","6675",!1,"13826"))),13827:r.q(r.ocq(r.itp("eyeota","230",!1,"13827"),r.itp("eyeota","6676",!1,"13827"))),13828:r.q(r.ocq(r.itp("eyeota","232",!1,"13828"),r.itp("eyeota","6677",!1,"13828"))),13829:r.q(r.ocq(r.itp("eyeota","234",!1,"13829"),r.itp("eyeota","6678",!1,"13829"))),13830:r.q(r.ocq(r.itp("eyeota","235",!1,"13830"),r.itp("eyeota","6679",!1,"13830"))),13831:r.q(r.ocq(r.itp("eyeota","243",!1,"13831"),r.itp("eyeota","6681",!1,"13831"))),13832:r.q(r.ocq(r.itp("eyeota","242",!1,"13832"),r.itp("eyeota","6680",!1,"13832"))),13833:r.q(r.cw(0,r.ps(["isp_info","isp"],"Verizon"),r.ge(1))),13852:r.q(r.ocq(r.ocq(r.itp("eyeota","59",!1,"13852"),r.cw(0,r.os(r.s,["client","title"],["we-work",943,788,951,"office-space"]),r.ge(1))),r.cw(0,r.ps(["client","url"],"timeout.com/london/get-listed-add-venue"),r.ge(1)))),13855:r.q(r.tw(r.cw(0,r.t,r.ge(3)),2592e6)),13856:r.q(r.tw(r.cw(0,r.t,r.ge(8)),2592e6)),13857:r.q(r.tw(r.cw(0,r.t,r.ge(10)),2592e6)),14081:r.q(r.itp("eyeota","1604",!1,"14081")),14282:r.q(r.ocq(r.ocq(r.itp("eyeota","35391",!1,"14282"),r.itp("eyeota","35388",!1,"14282")),r.itp("eyeota","35390",!1,"14282"))),14371:r.q(r.ocq(r.itp("eyeota","6673",!1,"14371"),r.itp("comscore","318997US",!1,"14371"))),14577:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[593,594,46]),r.os(r.w,["category","sub_category1"],[592,46]),r.os(r.s,["client","title"],["cookery class",46])]),r.ge(1))),14748:r.q(r.itp("eyeota","6680",!1,"14748")),14808:r.q(r.ocq(r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],305),r.os(r.s,["client","url"],[10,2,13,68,6,24,131,130,132,109,108,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,192,193,239,98,201]),r.os(r.s,["client","title"],[10,2,4,13,68,6,24,131,130,132,109,108,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,192,193,460,98,201])]),r.ge(1)),2592e6),r.cw(0,r.o([r.os(r.s,["client","url"],[167,158]),r.os(r.s,["client","title"],[167,158])]),r.ge(1)))),14812:r.q(r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],4),r.os(r.s,["client","url"],[4,35,57,206,147,165,178,177,161,543,203,196,197,160,154,183,180,209,"sano","comida-sana","dieta","sin-gluten","menjar-sa","sin-lactosa",829,962,417,420,481,754,755,"alochol-free",418,784,728,727]),r.os(r.s,["client","title"],[4,35,57,206,147,165,178,177,161,160,543,203,196,197,154,183,180,209,"sin gluten","sense gluten","sin lactosa","sense lactosa",962,"suc",417,420,829,"calories",481,"menjar sa","comer sano","comida sana",754,755,"alcohol-free",418,784,728,727])]),r.ge(1)),2592e6)),14816:r.q(r.acq(r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],305),r.os(r.s,["client","url"],[10,2,13,68,6,24,131,130,132,109,108,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,192,193,239,98,167,158]),r.os(r.s,["client","title"],[10,2,4,13,68,6,24,131,130,132,109,108,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,192,193,460,98,167,158])]),r.ge(1)),2592e6),r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],4),r.os(r.s,["client","url"],[4,35,57,206,147,165,178,177,161,160,203,196,197,154,183,180,209]),r.os(r.s,["client","title"],[4,35,57,206,147,165,178,177,161,160,203,196,197,154,183,180,209])]),r.ge(1)),2592e6))),14823:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[873,217,702,"jim-bean",695,205,469,"gin-","-gin",938,"rum-","-rum",410,861,211,857,721,722,723,218,244,720,624,855,854,519,409,229]),r.os(r.s,["client","title"],[873,217,702,695,205,469,938,"jim bean","rum",410,861,211,857,721,722,723,218,244,855,854,720,519,624,409,229])]),r.ge(1)),2592e6)),14830:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[260,280,308,514,232,491,358,"/h-m",856,433,634,826,545,597,"forever-21",493,"century-21",937,846,411,913,884,468,868,821,646,872,909,466,"popup",944,701,781,413]),r.os(r.s,["client","title"],[260,280,308,514,232,491,358,856,433,634,826,545,597,493,"forever 21","century 21",937,846,411,913,884,468,868,646,821,872,909,466,944,701,781,413]),r.pc_(["category","page_tags"],86),r.pc_(["category","page_tags"],54),r.pc_(["category","page_tags"],869),r.ps(["category","primary_category"],54),r.os(r.s,["category","sub_category1"],[885,"vintage shops"])]),r.ge(1)),2592e6)),14831:r.q(r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],11),r.ps(["category","primary_category"],18),r.os(r.s,["client","url"],[11,30,9,26,37,38,94,58,122,123]),r.os(r.s,["client","title"],[11,30,9,26,37,38,215,725])]),r.ge(1)),2592e6)),14848:r.q(r.tw(r.cw(0,r.o([r.y(["category","primary_category"],117),r.os(r.s,["client","url"],[14,1,12,36,92,85,53,0,73,71,145,103,67,248,80,189,83,114,96,87,299]),r.os(r.s,["client","title"],[14,1,12,36,92,85,53,0,73,71,102,67,114,80,282,83,96,87,298])]),r.ge(1)),2592e6)),14851:r.q(r.tw(r.cw(0,r.o([r.pc_(["category","page_tags"],79),r.os(r.s,["category","primary_category"],[15,105]),r.os(r.s,["client","title"],[15,23,3]),r.os(r.s,["client","url"],[15,23,3])]),r.ge(1)),2592e6)),14853:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[33,561,303,504,806,452,133,743,853]),r.os(r.s,["client","title"],[33,561,303,504,806,452,133,743,853]),r.pe(["category","sub_category1"],"science & technology")]),r.ge(1)),2592e6)),14858:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[589,787,537,"checkout",110,476,93,798]),r.os(r.s,["client","title"],[589,787,537,110,476,93,798])]),r.ge(1))),14867:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[6,747,124,24,137,752,"spa-","-spa",279,480,910,734,926,644]),r.os(r.s,["client","title"],[6,747,124,24,137,752,88,279,480,910,734,644,926])]),r.ge(1)),2592e6)),14868:r.q(r.cw(0,r.os(r.s,["client","url"],["timeout.com/newyork/travel/how-to-spend-a-perfect-long-weekend-in-paris","timeout.com/san-francisco/travel/how-to-spend-a-perfect-long-weekend-in-barcelona"]),r.ge(1))),14918:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[164,163,906,474,651,741,567,"datenight","date-night"]),r.pc_(["category","page_tags"],164),r.pc_(["category","page_tags"],535),r.os(r.s,["client","title"],[164,163,906,474,651,741,567,535,536,"single","singles"]),r.pe(["category","primary_category"],"sex and dating (category)")]),r.ge(1)),2592e6)),14919:r.q(r.ocq(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[238,"craft-beer",528,647,471,"bud-light",882,524,472,"paleale","pale-ale",713,"guinness",425,470,496,495]),r.os(r.s,["client","title"],[238,528,647,471,"bud light",882,524,472,"pale ale",713,"guiness",425,470,496,495,"estrella","cruzcampo","mahou","san miguel"]),r.pe(["category","sub_category1"],"breweries")]),r.ge(1)),2592e6),r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/sydney/things-to-do/world-square-presents-the-time-out-hop-up","www.timeout.com/melbourne/bars/world-square-presents-the-time-out-hop-up","www.timeout.com/sydney/bars/little-creatures-live-at-the-time-out-hop-up"]),r.ge(1)))),14921:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[14,1,12,36,92,85,53,0,73,71,145,103,67,248,80,189,83,114,96,87,299,5,56,7,16,148,22,93,162]),r.os(r.s,["client","title"],[14,1,12,36,92,85,53,0,73,71,102,67,"direct now",80,282,83,114,96,87,298,5,56,7,16,148,22,93,162]),r.os(r.s,["category","primary_category"],[117,234,112,245,247,127,25,20])]),r.ge(1)),2592e6)),14922:r.q(r.tw(r.cw(0,r.o([r.pe(["category","primary_category"],"pets (category)"),r.os(r.s,["client","url"],[802,490,833,639,620,"guineapig","guinea-pig",427,551,961,583,657,527,808,871,756,866,626,740,614,613,628,801]),r.os(r.s,["client","title"],[802,490,833,639,620,"guinea pig",427,551,961,583,657,527,808,871,756,866,626,740,614,613,628,801])]),r.ge(1)),2592e6)),14923:r.q(r.tw(r.cw(0,r.o([r.y(["category","primary_category"],245),r.os(r.s,["client","url"],[42,521,606,650,686,687,705,714,692,691,877,876,859]),r.os(r.s,["client","title"],[42,521,606,650,686,687,705,714,692,691,877,"stand up",876,859])]),r.ge(1)),2592e6)),14924:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","title"],[255,204,242,277,15,33,133,3,258,241,255,204,242,277,15,33,133,3,258,241,915]),r.pc_(["category","page_tags"],79),r.pc_(["category","page_tags"],"feed your brain"),r.os(r.s,["category","primary_category"],[79,105]),r.os(r.s,["client","url"],[255,204,242,277,15,33,133,3,258,241,915])]),r.ge(1)),2592e6)),15072:r.q(r.cw(0,r.ps(["isp_info","isp"],"AT&T"),r.ge(1))),15073:r.q(r.cw(0,r.ps(["isp_info","isp"],"Sprint"),r.ge(1))),16243:r.q(r.cw(0,r.o([r.y(["category","primary_category"],247),r.ps(["client","title"],7),r.ps(["client","url"],7)]),r.ge(1))),17295:r.q(r.cw(0,r.a([r.y(["geo_info","city"],223),r.ps(["client","domain"],904)]),r.ge(1))),17299:r.q(r.cw(0,r.a([r.z(["geo_info","city"],223),r.ps(["client","url"],"timeout.com/las-vegas")]),r.ge(1))),17301:r.q(r.cw(0,r.a([r.os(r.w,["geo_info","city"],[223,"Paradise","Henderson","San Bernardino","Riverside","Bakersfield","Glendale","Anaheim","Santa Ana","Los Angeles"]),r.ps(["client","url"],904)]),r.ge(1))),18029:r.q(r.ocq(r.ocq(r.cw(0,r.ps(["client","url"],"something-very-curious-is-happening-in-shoreditch-next-month"),r.ge(1)),r.cw(0,r.ps(["client","url"],"win-a-luxury-long-weekend-in-london"),r.ge(1))),r.cw(0,r.pe(["client","url"],"https://checkout.timeout.com/london/stay-curious"),r.ge(1)))),18570:r.q(r.ocq(r.cw(0,r.ps(["client","url"],0),r.ge(1)),r.cw(0,r.ps(["client","title"],0),r.ge(1)))),19810:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[690,688,617,604,601,616,"frozenyoghurt","frozen-yoghurt","frozenyogurt","frozen-yogurt"]),r.os(r.s,["client","title"],[690,688,617,604,601,616,"frozen yoghurt","frozen yogurt"]),r.ps(["category","sub_category1"],689)]),r.ge(1)),2592e6)),19814:r.q(r.tw(r.cw(0,r.o([r.ps(["client","url"],888),r.ps(["client","title"],888),r.ps(["client","referrer"],"-summer"),r.os(r.s,["category","sub_category1"],[763,29,689,"park cafes","parks & gardens","swimming pools & lidos"])]),r.ge(1)),2592e6)),19815:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[488,8]),r.os(r.s,["client","title"],[488,8]),r.os(r.s,["category","sub_category1"],[577,29,763])]),r.ge(1)),2592e6)),20177:r.q(r.cw(0,r.os(r.s,["client","title"],["fireworks","firework","bonfire night","bonfire","guy fawkes","firework display","fuegos artificiales","focs artificials","pirotecnia"]),r.ge(1))),20296:r.q(r.itp("liveramp_CACI","1004187639",!1,"20296")),20463:r.q(r.cw(0,r.ps(["client","url"],"https://www.timeout.com/montreal"),r.ge(1))),20478:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.ps(["client","url"],"https://www.timeout.com/travel/breathtaking-uk-road-trips-worth-dropping-everything-for"),r.ge(1)),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/london/travel/three-breathtaking-road-trips-worth-dropping-everything-for"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/london/restaurants/three-spur-of-the-moment-foodie-pilgrimages-from-london"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/glasgow/travel/six-breathtaking-road-trips-worth-dropping-everything-for"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/glasgow/restaurants/three-spur-of-the-moment-foodie-pilgrimages-from-glasgow"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/manchester/travel/six-breathtaking-road-trips-worth-dropping-everything-for"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/manchester/restaurants/three-spur-of-the-moment-foodie-pilgrimages-from-manchester"),r.ge(1))),r.cw(0,r.pe(["client","url"],"https://www.timeout.com/birmingham/restaurants/six-breathtaking-road-trips-worth-dropping-everything-for"),r.ge(1))),r.cw(0,r.ps(["client","url"],"https://www.timeout.com/birmingham/restaurants/three-spur-of-the-moment-foodie-pilgrimages-from-birmingham"),r.ge(1))),r.cw(0,r.os(r.s,["client","title"],[155,"day-trip","day trip",200,199,198,254]),r.ge(1)))),20553:r.q(r.ocq(r.ocq(r.itp("eyeota","13358",!1,"20553"),r.itp("skimlinks","4823411",!1,"20553")),r.itp("skimlinks","5387363",!1,"20553"))),20707:r.q(r.cw(0,r.o([r.ps(["client","title"],249),r.ps(["client","url"],249)]),r.ge(1))),21006:r.q(r.cw(0,r.os(r.s,["client","title"],[110,40,"book store","book-store",465,464]),r.ge(1))),21068:r.q(r.cw(0,r.ps(["client","url"],"https://www.timeout.com/las-vegas"),r.ge(1))),21290:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[0,102,104,231,12,42,252,253,1,119,14,284,52,290,292,134,136,294,230,243,293,36,92,85,53,73,71,145,103,67,248,80,189,83,114,96,87,299,5,56,7,16,148,22,93,162]),r.ge(1)),r.cw(0,r.os(r.w,["category","primary_category"],[117,112,234,245,247,127,25,20]),r.ge(1)))),21542:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],["black-friday","black friday","Black Friday"]),r.ge(1)),r.tw(r.cw(0,r.y(["category","primary_category"],54),r.ge(1)),2592e6))),21794:r.q(r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/manchester",665,"https://www.timeout.com/bristol","https://www.timeout.com/birmingham","https://www.timeout.com/glasgow","https://www.timeout.com/edinburgh","https://www.timeout.com/leeds"]),r.ge(1))),22101:r.q(r.acq(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","title"],[12,1,191,8,"bookshop","bookclub","book club","pets",221,314,261,262,3,"art gallery",6,950,124,303]),r.ge(1)),r.cw(0,r.os(r.w,["category","sub_category1"],[465,479,"classes & workshops","wine bars",577,592,"galleries",304,"boutique hotels",578,176,120,"literary events",793,885]),r.ge(1))),r.cw(0,r.os(r.w,["category","primary_category"],[21,112,645,31,25,20]),r.ge(1))),r.ocq(r.ocq(r.itp("eyeota","6676",!1,"22101"),r.itp("eyeota","35431",!1,"22101")),r.itp("eyeota","35455",!1,"22101")))),22156:r.q(r.cw(0,r.a([r.y(["page_country"],227),r.y(["geo_info","country"],28)]),r.ge(1))),22629:r.q(r.cw(0,r.pe(["client","url"],"https://www.timeout.com/usa/travel/the-top-16-things-to-do-in-lisbon-and-porto"),r.ge(1))),22851:r.q(r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/paris/en","https://www.timeout.fr/paris"]),r.ge(1))),22995:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.cx,["category","page_tags"],[18,86,54]),r.ge(1)),r.cw(0,r.os(r.s,["category","primary_category"],[18,54]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],[11,30,9,26,37,38,94,58,122,123]),r.ge(1))),r.cw(0,r.os(r.s,["client","title"],[11,30,9,26,37,38,215,725]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],226),r.y(["geo_info","country"],28)]),r.ge(1))),r.cw(0,r.a([r.pn(["page_country"],"IN"),r.pe(["geo_info","country"],"India")]),r.ge(1))),r.cw(0,r.a([r.pn(["page_country"],"KR"),r.pe(["geo_info","country"],"South Korea")]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],338),r.pe(["geo_info","country"],"China")]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],227),r.y(["geo_info","country"],100)]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],352),r.pe(["geo_info","country"],"France")]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],348),r.pe(["geo_info","country"],"Germany")]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],222),r.y(["geo_info","country"],142)]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],385),r.pe(["geo_info","country"],"Portugal")]),r.ge(1)))),23441:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],["fashion-week","fashion week","fashionweek","london-art-fair","london art fair","art-basel","art basel","frieze","volta-art-fair","volta art fair","volta","teatro-alla-scala","teatro alla scala","cannes-film-festival","cannes film festival","sundance-film-festival-london-guide","sundance","coachella","wimbledon-tennis","wimbledon tennis","F1","F1-Grand-Prix","US-Open","US Open","Ryder-Cup","Ryder Cup","Royal-Ascot","Royal Ascot"]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/london/things-to-do/london-fashion-week-festival","https://www.timeout.com/newyork/shopping/fashion-week","https://www.timeout.com/paris/en/things-to-do/paris-fashion-week-ss-18-the-ultimate-guide","https://www.timeout.com/seoul/things-to-do/seoul-fashion-week","https://www.timeout.com/london/art/london-art-fair-1","https://www.timeout.com/miami/art-basel-miami-beach","https://www.timeout.com/newyork/things-to-do/frieze-new-york","https://www.timeout.com/switzerland/art/volta-art-fair-1","https://www.timeout.com/milan/theatre/teatro-alla-scala","https://www.timeout.com/london/film/cannes-film-festival","https://www.timeout.com/london/film/sundance-film-festival-london-guide","https://www.timeout.com/los-angeles/music/coachella","https://www.timeout.com/london/things-to-do/wimbledon-tennis-championships","https://www.timeout.com/singapore/things-to-do/the-ultimate-guide-to-the-f1-singapore-grand-prix","https://www.timeout.com/newyork/us-open","https://www.timeout.com/chicago/sports/ryder-cup-welcome-to-chicago","https://www.timeout.com/london/blog/five-things-you-never-knew-youd-enjoy-at-ascot-051517"]),r.ge(1)))),23694:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[14,1,12,36,92,85,53,0,73,71,102,67,"directtv",80,282,83,96,87,298,118,288,34,266,257,936,233,"takeaways","chippies",892,"deliveroo",78,125]),r.ge(1)),r.cw(0,r.os(r.w,["client","url"],["https://www.timeout.com/about/latest-news/time-out-and-deliveroo-bring-food-battles-to-london-101018","https://www.timeout.com/london/things-to-do/time-out-deliveroo-fried-chicken-fight-club","https://www.timeout.com/london/things-to-do/londons-food-vendor-champs-have-been-crowned-in-the-time-out-x-deliveroo-food-battles","https://www.timeout.com/london/things-to-do/deliveroo-x-time-out-food-battle-recap-battle-of-the-burger","https://www.timeout.com/london/things-to-do/deliveroo-time-out-battle-of-the-broth","https://www.timeout.com/london/things-to-do/find-out-whos-been-crowned-londons-master-of-fried-chicken"]),r.ge(1)))),24326:r.q(r.cw(0,r.o([r.os(r.w,["client","url"],["https://www.timeout.es/barcelona/es/que-hacer/telefon-vermell-twitter-de-trump","https://www.timeout.cat/barcelona/ca/que-fer/telefon-vermell-twitter-de-trump"]),r.ps(["client","url"],"telefon-vermell-twitter-de-trump")]),r.ge(1))),24408:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","title"],[211,736,426,"don julio",841]),r.os(r.s,["client","url"],[211,736,426,"don-julio",841])]),r.ge(1)),2592e6)),25102:r.q(r.cw(0,r.ps(["client","url"],272),r.ge(1))),25111:r.q(r.ocq(r.cw(0,r.a([r.ps(["client","url"],324),r.ps(["client","title"],296)]),r.ge(3)),r.tw(r.cw(0,r.a([r.ps(["category","page_type"],324),r.os(r.cx,["category","page_tags"],[296,"Ski",391,391])]),r.ge(1)),290304e5))),25178:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[295,86,"accessories",232,"bank","finance",153,536,164,52,51,655,611,"hobbies","hobby",10,2,13,14,1,12,36,53,0,145,148,22,93,16,7,5,56,162,"politics",828,68,33,185,146,74,283,302,121,225,300,301,309,286,11,30,9,26,37,38,94,122,123,155,"vehicles"]),r.ge(1)),r.cw(0,r.os(r.w,["category","primary_category"],[54,31,18,456,48,20]),r.ge(1)))),27457:r.q(r.ocq(r.cw(1,r.os(r.s,["dest_url"],[273,274,276,272,213,156,184,187,216,212,"livenation.co.uk"]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[275,678,213,156,184,187,216,212]),r.ge(1)))),27709:r.q(r.acq(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","url"],[281,"timeout.com/london/love-local","timeout.com/london/keep-the-change","timeout.com/london/paypal-pledge-schoolwork","timeout.com/london/paypal-community-champions","timeout.com/london/paypal-quiz","timeout.com/london/pledge-shopping-local","timeout.com/london/pledge-work-life-balance","timeout.com/london/pledge-exploring-on-foot","timeout.com/london/how-to-look-after-your-mental-health","timeout.com/london/how-to-keep-it-local","timeout.com/london/how-to-celebrate-community-champions","timeout.com/london/how-to-keep-a-work-life-balance","timeout.com/london/how-to-be-more-green","timeout.com/london/how-to-stay-connected-to-loved-ones"]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[121,74,91,210,153,516,517,315,146,185]),r.ge(1))),r.cw(0,r.os(r.w,["client","url"],[182,667,681,682,668,669,673,679,659,677,676]),r.ge(1))),r.cw(0,r.y(["category","primary_category"],456),r.ge(1))),r.cw(0,r.y(["geo_info","country"],28),r.ge(1)))),27712:r.q(r.acq(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","url"],["sport-fitness","sport-and-fitness",10,2,17,13,16,47,8]),r.ge(1)),r.cw(0,r.os(r.w,["event","eventType"],["Athletics",331,60,19,408,393,"Rugby","Ice Skating",343,"Clubbing","Indie Music",99,141]),r.ge(1))),r.cw(0,r.os(r.w,["basket","category"],[19,99]),r.ge(1))),r.cw(0,r.os(r.s,["client","title"],[16,623,47,8,121,74,0,34,91,210,10,2,6,13,202,17,153,516,517,315]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],[182,667,681,682,668,669,673,679,659,677,676]),r.ge(1))),r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("eyeota","11208",!1,"27712"),r.itp("eyeota","6672",!1,"27712")),r.itp("eyeota","291",!1,"27712")),r.itp("comscore","318346US",!1,"27712")),r.itp("eyeota","35438",!1,"27712")),r.itp("eyeota","6675",!1,"27712")),r.itp("eyeota","35430",!1,"27712")))),27713:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[883,65,312,916]),r.ge(1)),r.cw(0,r.os(r.w,["client","url"],[684,683,670,674,680,672]),r.ge(1)))),27734:r.q(r.cw(0,r.os(r.s,["client","url"],["newyork/attractions","newyork/things-to-do"]),r.ge(1))),28133:r.q(r.cw(0,r.os(r.s,["client","user_agent"],["samsung","SM-G950F","SM-G955F","sm-g960f","sm-g965f","sm-g977n","SM-g973F","SM-A107M","sm-m307f"]),r.ge(1))),28160:r.q(r.cw(0,r.ps(["client","user_agent"],74),r.ge(1))),28161:r.q(r.cw(0,r.ps(["client","user_agent"],"HUAWEI"),r.ge(1))),28391:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.a([r.y(["page_city"],27),r.z(["geo_info","city"],27)]),r.ge(1)),r.cw(0,r.a([r.y(["page_city"],378),r.z(["geo_info","city"],378)]),r.ge(1))),r.cw(0,r.a([r.y(["page_city"],351),r.z(["geo_info","city"],351)]),r.ge(1))),r.cw(0,r.os(r.s,["client","title"],[199,198,"day trips",176,"day-trips"]),r.ge(1)))),28392:r.q(r.ocq(r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/london/restaurants/londons-best-caribbean-restaurants","www.timeout.com/london/travel/see-the-caribbean-through-a-locals-eyes","www.timeout.com/london/travel/a-locals-guide-to-barbados","www.timeout.com/london/things-to-do/win-tickets-for-our-taste-of-the-islands-feast","www.timeout.com/london/restaurants/londons-best-caribbean-restaurants","www.timeout.com/london/things-to-do/a-taste-of-the-caribbean-st-kitts","www.timeout.com/london/things-to-do/caribbean-food-week-festival h","www.timeout.com/london/things-to-do/a-taste-of-the-caribbean-tobago","www.timeout.com/london/things-to-do/caribbean-cooking-class","www.timeout.com/london/travel/five-places-to-eat-like-a-local-in-the-dominican-republic","www.timeout.com/london/travel/the-five-best-things-to-do-in-the-dominican-republic","www.timeout.com/london/travel/the-five-most-instagrammable-places-in-the-dominican-republic","www.timeout.com/london/travel/the-five-best-day-trips-in-the-dominican-republic","www.timeout.com/london/travel/a-locals-guide-to-st-kitts","www.timeout.com/london/travel/five-places-to-eat-like-a-local-in-grenada","www.timeout.com/london/travel/the-five-best-things-to-do-in-grenada","www.timeout.com/london/travel/the-five-most-instagrammable-places-in-grenada","www.timeout.com/london/travel/the-five-best-day-trips-in-grenada","www.timeout.com/london/travel/a-locals-guide-to-st-kitts][]p-p[","www.timeout.com/london/travel/five-places-to-eat-like-a-local-in-st-kitts","www.timeout.com/london/travel/the-five-best-things-to-do-in-st-kitts","www.timeout.com/london/travel/the-five-most-instagrammable-places-in-st-kitts","www.timeout.com/london/travel/the-five-best-day-trips-in-st-kitts","www.timeout.com/london/travel/a-locals-guide-to-saint-lucia","www.timeout.com/london/travel/five-places-to-eat-like-a-local-in-saint-lucia","www.timeout.com/st-lucia/things-to-do/best-things-to-do-in-st-lucia","www.timeout.com/london/travel/the-five-most-instagrammable-places-in-saint-lucia","www.timeout.com/london/travel/the-five-best-day-trips-in-saint-lucia","www.timeout.com/london/travel/a-locals-guide-to-tobago","www.timeout.com/london/travel/five-places-to-eat-like-a-local-in-tobago","www.timeout.com/london/travel/the-five-most-instagrammable-places-in-tobago","www.timeout.com/london/travel/the-five-best-day-trips-in-tobago"]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[11,30,9,26,37,38,94,58,122,123,107,111,66,113,69,76,125,78,128,45,126,116,61,106,135]),r.ge(1)))),28415:r.q(r.ocq(r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/london/travel/make-the-most-of-miami-this-summer","www.timeout.com/florida","www.timeout.com/florida/things-to-do/best-water-parks-in-florida","www.timeout.com/florida/things-to-do/best-music-festivals-in-florida","www.timeout.com/florida/things-to-do/wildlife-sanctuaries-in-miami-south-florida","www.timeout.com/miami/things-to-do/best-things-to-do-in-miami","www.timeout.com/orlando h","www.timeout.com/orlando/things-to-do/best-attractions-in-orlando","www.timeout.com/orlando/things-to-do/best-things-to-do-in-orlando-besides-theme-parks","www.timeout.com/sarasota","www.timeout.com/sarasota/things-to-do/best-things-to-do-in-sarasota","www.timeout.com/west-palm-beach/things-to-do/best-things-to-do-in-west-palm-beach","www.timeout.com/orlando/things-to-do/best-things-to-do-in-orlando","www.timeout.com/orlando/restaurants/best-restaurants-in-orlando"]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[107,111,66,113,69,76,125,78,128,45,126,116,61,106,135,11,30,9,26,37,38,94,58,122,123]),r.ge(1)))),28517:r.q(r.cw(0,r.pe(["isp_info","isp"],"Telefonica O2 UK"),r.ge(1))),28518:r.q(r.cw(0,r.os(r.w,["isp_info","isp"],["Vodafone","Vodafone Australia","Vodafone Spain","Vodafone Portugal","Vodafone Limited"]),r.ge(1))),28519:r.q(r.cw(0,r.pe(["isp_info","isp"],"Three"),r.ge(1))),28520:r.q(r.cw(0,r.os(r.w,["isp_info","isp"],["EE Mobile","EE High Speed Internet"]),r.ge(1))),28538:r.q(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1))),28540:r.q(r.cw(0,r.pge(["basket","quantity"],1),r.ge(1))),28541:r.q(r.cw(0,r.pge(["event","maxPercentageDiscount"],50),r.ge(1))),28566:r.q(r.cw(0,r.a([r.ps(["client","url"],"timeout.com/newyork"),r.z(["geo_info","country"],100)]),r.ge(1))),29195:r.q(r.tw(r.cw(0,r.os(r.s,["client","title"],["St Patrick\'s","St Patrick","St.Patrick\'s","St.Patrick","St Paddy\'s","St Paddy","St.Paddy","Irish","Guinness","Dublin","Ireland"]),r.ge(1)),24192e5)),29219:r.q(r.tw(r.cw(1,r.os(r.s,["dest_url"],["facebook.com/sharer","twitter.com/intent"]),r.ge(1)),2592e6)),29223:r.q(r.acq(r.tw(r.cw(0,r.a([r.y(["category","primary_category"],20),r.y(["page_city"],27)]),r.ge(3)),2592e6),r.tw(r.cw(0,r.a([r.os(r.w,["category","primary_category"],[48,18]),r.y(["page_city"],27)]),r.ge(1)),2592e6))),29564:r.q(r.acq(r.cw(0,r.ps(["client","url"],501),r.ge(1)),r.cw(0,r.pge(["transaction","quantity"],1),r.e(0)))),29567:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],97),r.ge(1)))),29568:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],60),r.ge(1)))),29569:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],139),r.ge(1)))),29571:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],19),r.ge(1)))),29572:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],99),r.ge(1)))),29573:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],141),r.ge(1)))),29574:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],143),r.ge(1)))),29575:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],101),r.ge(1)))),29576:r.q(r.acq(r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1)),r.cw(0,r.y(["transaction","category"],408),r.ge(1)))),29579:r.q(r.cw(1,r.ps(["dest_url"],"event-enquiry"),r.ge(1))),29581:r.q(r.cw(0,r.pge(["transaction","revenue"],50),r.ge(1))),29582:r.q(r.cw(0,r.pg(["transaction","quantity"],1),r.ge(1))),29585:r.q(r.cw(1,r.os(r.s,["dest_url"],["ticketmaster","axs","roundhouse","earthackney","festicket","livenation","barbican"]),r.ge(1))),29590:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],[97,"Brunch",389]),r.ge(1)),r.cw(0,r.y(["transaction","category"],97),r.ge(1)))),29591:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],[346,60]),r.ge(1)),r.cw(0,r.y(["transaction","category"],60),r.ge(1)))),29592:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],["Art",139]),r.ge(1)),r.cw(0,r.y(["transaction","category"],139),r.ge(1)))),29593:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],[331,19,"Performance",393,"Talk","Tour",400]),r.ge(1)),r.cw(0,r.y(["transaction","category"],19),r.ge(1)))),29594:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],["Expo",353]),r.ge(1)),r.cw(0,r.y(["transaction","category"],353),r.ge(1)))),29595:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],[343,99]),r.ge(1)),r.cw(0,r.y(["transaction","category"],99),r.ge(1)))),29596:r.q(r.ocq(r.cw(0,r.y(["event","eventType"],141),r.ge(1)),r.cw(0,r.y(["transaction","category"],141),r.ge(1)))),29598:r.q(r.ocq(r.cw(0,r.os(r.w,["event","eventType"],["Standup Comedy","West End",143]),r.ge(1)),r.cw(0,r.y(["transaction","category"],143),r.ge(1)))),29599:r.q(r.ocq(r.cw(0,r.y(["event","eventType"],101),r.ge(1)),r.cw(0,r.y(["transaction","category"],101),r.ge(1)))),29694:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","title"],[65,499,500,448,152,640,641,903,200,199,198,9,215,58,8,29,22,47,16]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[65,499,500,448,152,640,641,903,200,199,9,215,58,8,29,22,47,16]),r.ge(1))),r.cw(0,r.os(r.w,["category","primary_category"],[127,"time out market (category)",18,25,20]),r.ge(1))),r.cw(0,r.pge(["transaction","quantity"],1),r.ge(1))),r.cw(0,r.ps(["client","url"],501),r.ge(1))),r.cw(0,r.ps(["client","url"],"broadway.timeout.com"),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/chicago/things-to-do/how-to-spend-your-winter-trip","www.timeout.com/london/ever-considered-budapest","www.timeout.com/london/ever-considered-lisbon","www.timeout.com/london/ever-considered-varna","www.timeout.com/london/win-one-of-30-pairs-of-free-return-flights-with-wizz-air","www.timeout.com/london/things-to-do/new-york-state-vs-california-whats-your-vibe","www.timeout.com/london/travel/five-reasons-why-you-should-visit-new-south-wales","www.timeout.com/london/have-you-considered-jordan"]),r.ge(1)))),30144:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[562,566,565,563,564]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[562,566,565,563,564]),r.ge(1)))),30164:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[261,262,587,314,955]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[261,262,587,314,955]),r.ge(1)))),30405:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/miami"),r.ge(1))),30406:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/los-angeles"),r.ge(1))),30407:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/chicago"),r.ge(1))),30408:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/singapore"),r.ge(1))),30409:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/hong-kong"),r.ge(1))),30410:r.q(r.cw(0,r.ps(["client","url"],959),r.ge(1))),30411:r.q(r.cw(0,r.ps(["client","url"],959),r.ge(1))),30412:r.q(r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/lisbon","www.timeout.pt/lisboa/pt"]),r.ge(1))),30413:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/london"),r.ge(1))),30414:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/newyork"),r.ge(1))),30415:r.q(r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/madrid","www.timeout.es/madrid/es"]),r.ge(1))),30416:r.q(r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/barcelona","www.timeout.es/barcelona/es","www.timeout.cat/barcelona/ca"]),r.ge(1))),30417:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/boston"),r.ge(1))),30418:r.q(r.cw(0,r.ps(["client","url"],"www.timeout.com/san-francisco"),r.ge(1))),31818:r.q(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","title"],[461,696,325,"skyfall","casino royale",376,"Spy"]),r.ge(1)),r.cw(0,r.os(r.s,["event","name"],[461,696,"spy",325,376]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["timeout.com/london/film/exclusive-behind-the-scenes-of-secret-cinema","timeout.com/london/news/license-to-thrill-our-verdict-on-secret-cinemas-casino-royale-061419","timeout.com/london/film/best-thriller-movies","timeout.com/london/film/the-gentlemen","timeout.com/london/film/villain-2","timeout.com/london/things-to-do/secret-cinema-presents-casino-royale","timeout.com/london/news/next-summers-secret-cinema-has-been-announced-113018","timeout.com/london/film/secret-cinema-1","timeout.com/london/news/a-new-batch-of-tickets-for-secret-cinemas-casino-royale-is-getting-released-at-midday-061819"]),r.ge(1)))),32319:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.pc_(["category","page_tags"],306),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[10,2,13,68,6,24,131,130,132,109,108,17,49,43,39,41,55,"pool",202,98]),r.ge(1))),r.cw(0,r.os(r.s,["event","eventType"],[19,"Health and Wellbeing"]),r.ge(1))),r.cw(0,r.y(["transaction","category"],19),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["timeout.com/london/sport-and-fitness/the-best-yoga-studios-streaming-online-classes-right-now","timeout.com/london/my-non-dairy-diary-fitness-hacks","timeout.com/newyork/news/work-out-to-these-fitness-classes-you-can-stream-from-home-031620","timeout.com/sydney/sport-and-fitness/the-best-online-workouts-you-can-do-at-home"]),r.ge(1)))),32321:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.y(["category","primary_category"],711),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[76,"kid",66,111,107,78,113,"son","daughter",285,278,69,45,259,135,106,61,128,126,116]),r.ge(1))),r.cw(0,r.y(["page_city"],140),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["timeout.com/london/film/the-best-movies-on-disney","timeout.com/london/news/disney-uk-release-date-how-to-watch-and-how-much-does-it-cost-032520","timeout.com/london/news/david-walliams-is-releasing-a-free-kids-audiobook-every-day-for-30-days-032420","timeout.com/london/news/disney-is-offering-10-off-when-you-pre-order-by-march-23","timeout.com/london/news/the-national-trust-is-opening-its-parks-and-gardens-for-free-031820","timeout.com/melbourne/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/melbourne/kids/the-best-kids-shows-to-stream-online-right-now","timeout.com/sydney/things-to-do/quokka-cuddles-livestream","timeout.com/sydney/film/the-best-kids-shows-to-stream-online-right-now","timeout.com/sydney/news/the-rspca-is-asking-self-isolating-aussies-to-foster-a-rescue-animal-031920","timeout.com/sydney/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/sydney/news/you-can-now-get-the-best-bit-of-the-easter-show-delivered-straight-to-your-door-032420"]),r.ge(1)))),32324:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.y(["category","primary_category"],31),r.ge(2)),r.cw(0,r.os(r.s,["client","url"],["cooking",46,"food-market",594,"cookery","cookery-class","recipe","recipes",593,"food-festival",892,"take-out","take out",51,"cookbook"]),r.ge(1))),r.cw(0,r.os(r.w,["event","eventType"],[346,97,389]),r.ge(1))),r.cw(0,r.y(["basket","category"],97),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["timeout.com/melbourne/restaurants/restaurants-and-bars-now-doing-takeaway-in-melbourne","timeout.com/melbourne/news/ides-have-released-a-zine-and-every-single-dollar-goes-directly-to-staff-032520","timeout.com/melbourne/news/you-can-now-get-thats-amore-cheeses-delivered-right-to-your-door-032520","timeout.com/melbourne/news/melbournes-gnoccheria-is-now-offering-home-delivery-032520","timeout.com/melbourne/news/moon-dog-has-launched-contactless-beer-drive-throughs-and-home-delivery-032520","timeout.com/melbourne/news/aangan-is-giving-away-free-meals-to-seniors-031820","timeout.com/melbourne/news/burn-city-smokers-is-delivering-barbecue-to-your-door-031820","timeout.com/melbourne/news/how-to-support-your-local-restaurant-during-the-outbreak-of-covid-19","timeout.com/melbourne/restaurants/late-night-food-delivery-in-melbourne","timeout.com/sydney/news/heres-how-sydneys-hospitality-businesses-are-adapting-to-the-covid-19-pandemic-032020","timeout.com/sydney/news/chin-chin-is-offering-takeaway-for-the-first-time-ever-032520","timeout.com/sydney/news/support-your-favourite-restaurant-in-these-trying-times-by-buying-a-voucher-031720","timeout.com/sydney/news/lucios-whole-menu-is-available-for-take-away-at-a-huge-discount-031820","timeout.com/sydney/shopping/the-best-sydney-bottle-shops-offering-home-delivery",".timeout.com/sydney/news/our-restaurant-of-the-year-is-offering-sri-lankan-lamprai-to-take-away-031820","timeout.com/sydney/news/saint-peter-is-now-offering-takeaway-dinners-031720","timeout.com/sydney/news/food-delivery-services-are-offering-no-contact-delivery-now-032020","timeout.com/sydney/film/the-9-best-food-movies-you-should-be-streaming-right-now","timeout.com/sydney/restaurants/the-best-healthy-deliveries-in-sydney","timeout.com/sydney/restaurants/the-best-things-to-order-from-uber-eats-in-sydney","timeout.com/london/restaurants/the-latest-top-london-restaurants-doing-home-delivery","timeout.com/london/restaurants/the-best-takeaways-for-delivery-in-london","timeout.com/london/shopping/the-best-ways-to-get-your-groceries-delivered-in-london","timeout.com/london/restaurants/best-indian-takeaways-london","timeout.com/london/shopping/best-alcohol-delivery-services-in-london","timeout.com/london/restaurants/the-best-recipe-boxes-in-london-tried-and-tested","timeout.com/newyork/news/worlds-best-bar-dante-launches-delivery-and-takeout-during-coronavirus-shutdown-031720","timeout.com/newyork/news/this-new-york-bakery-is-offering-take-home-cookie-dough-032020","timeout.com/newyork/news/nycs-best-breweries-are-now-delivering-beers-to-your-door-032020","timeout.com/newyork/news/raos-nycs-most-exclusive-restaurant-is-doing-take-out-for-the-first-time-ever-032320","timeout.com/newyork/news/how-to-help-new-york-restaurants-and-bars-now-031920","timeout.com/newyork/news/restaurant-gift-cards-and-merch-to-buy-during-coronavirus-shutdown-031620"]),r.ge(1)))),32333:r.q(r.ocq(r.ocq(r.cw(0,r.os(r.w,["basket","category"],[60,19]),r.ge(1)),r.cw(0,r.os(r.w,["event","eventType"],[60,139,101,19]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],[21,3,"crafts","pottery","paint",793,435,23,"paintings","artists",578]),r.ge(1)))),32334:r.q(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[112,117]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[1,"movies",0,103,34,"amazon",249,"films",14,189]),r.ge(1)))),32336:r.q(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[127,188,"classical & opera","pop, rock & hip-hop","french music",7]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[16,"playlist",289,"podcasts",22,"concerts","stream","live-stream",34,"song","albumn","album","albums",435,"DJ","DJs",47,623]),r.ge(1)))),32337:r.q(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[236,"clubbing","clubs (category)",188]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],["cocktails",244,"bar","pub",557,229,"wine",238,449,"pint","glass","pints"]),r.ge(1)))),32338:r.q(r.ocq(r.cw(0,r.os(r.s,["client","url"],[940,313,291,770,771,81,50,82]),r.ge(1)),r.cw(0,r.ps(["client","url"],"timeout.com/london/things-to-do/9-places-to-see-cherry-blossom-in-london"),r.ge(1)))),32339:r.q(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[48,18]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[150,149,9,176,58,94,200,"break","breaks","weekends","visit",291]),r.ge(1)))),32340:r.q(r.cw(0,r.os(r.s,["client","url"],["library",110,40,"e-book","bookstores","libraries","read",836,"librarians"]),r.ge(1))),32341:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[25,"theatre comedy",898]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[5,56,816,"plays","actor","shakespeare","broadway","west end","west-end",764,"musicals"]),r.ge(1))),r.cw(0,r.y(["basket","category"],19),r.ge(1))),r.cw(0,r.y(["event","eventType"],143),r.ge(1)))),32344:r.q(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[234,20,79]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],["tour","virtual","virtual tour","attractions",15,3,23,"tours"]),r.ge(1)))),32347:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[430,610,"game",118,91,431,288,782,136,"videos",902,"tik tok",831,"puzzles","jigsaw","board","board games","board-games",522,890,609]),r.os(r.s,["client","url"],[430,610,118,91,431,288,816,782,136,902,831,"board-gam",522,890,609])]),r.ge(1))),32348:r.q(r.cw(0,r.os(r.s,["client","title"],[315,655,"work from home",951,943,788,"office space"]),r.ge(1))),32627:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[151,870,297,729,88,137,748,267,"haircare",635,"barbers","barber",768,733,799,279,580,"facials",311,912,304]),r.ge(1)),r.cw(0,r.os(r.s,["event","name"],[297,151,769,768,88,311,733,799,580,304,912]),r.ge(1)))),33624:r.q(r.ocq(r.ocq(r.cw(0,r.y(["category","primary_category"],31),r.ge(2)),r.cw(0,r.os(r.s,["client","title"],["comida a domicilio","menjar a domicili","comprar online","compra online"]),r.ge(1))),r.cw(0,r.os(r.w,["client","url"],["https://www.timeout.es/barcelona/es/noticias/como-hacer-la-compra-online-y-por-telefono-en-los-mercados-de-barcelona-031920","https://www.timeout.es/barcelona/es/noticias/pagesia-a-casa-nace-la-web-para-comprar-directamente-al-agricultor-041520","https://www.timeout.es/barcelona/es/noticias/los-nuevos-horarios-de-los-supermercados-en-semana-santa-040720","https://www.timeout.es/barcelona/es/noticias/la-web-que-te-ayuda-a-encontrar-el-comercio-de-barrio-abierto-en-barcelona-040320","https://www.timeout.cat/barcelona/ca/noticies/pagesia-a-casa-neix-el-web-per-comprar-directament-al-pages-040720","https://www.timeout.cat/barcelona/ca/noticies/la-web-que-tajuda-a-trobar-el-comerc-de-proximitat-obert-a-barcelona-040220","https://www.timeout.cat/barcelona/ca/noticies/com-fer-la-compra-online-i-per-telefon-als-mercats-de-barcelona-031920","https://www.timeout.es/madrid/es/noticias/hipercor-alcampo-carrefour-asi-ha-cambiado-la-compra-online-en-los-supermercados-040220","https://www.timeout.es/madrid/es/noticias/donde-y-como-hacer-la-compra-online-y-telefonica-en-los-mercados-municipales-de-madrid-031620","https://www.timeout.es/madrid/es/noticias/mas-de-30-mercados-municipales-se-suman-ya-a-la-venta-online-y-telefonica-032320","https://www.timeout.es/barcelona/es/tiendas/tiendas-de-alimentacion-de-barcelona-con-servicio-a-domicilio"]),r.ge(1)))),34114:r.q(r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/london/film/100-best-british-films","timeout.com/london/restaurants/londons-best-british-restaurants","timeout.com/uk/things-to-do/best-places-to-visit-in-the-uk-2020","timeout.com/uk","timeout.com/uk/things-to-do/best-things-to-do-in-the-united-kingdom","timeout.com/uk/things-to-do/best-places-to-visit-in-the-uk-2019","timeout.com/uk/things-to-do/best-cabins-in-the-uk","timeout.com/london/music/the-best-uk-festivals","timeout.com/uk/things-to-do/best-uk-castles","timeout.com/london/things-to-do/best-beaches-in-the-uk","timeout.com/uk/things-to-do/national-parks-in-the-uk","timeout.com/uk/things-to-do/best-waterparks-in-the-uk"]),r.ge(1))),34125:r.q(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","url"],[70,207,172,171,220,175,174,195,596,173,95,89,307,115,219,287]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[70,207,220,956,195,174,175,173,595,171,172,957,958,95,89,307,115,219,287]),r.ge(1))),r.cw(0,r.os(r.s,["event","offerText"],[95,70,89,307,875,115,219]),r.ge(1)))),34165:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[709,708,777,779,507,508,772,"clap","NHS Blue","NHS Workers",575,574,603,602,710,778,"ambulance","doctor","paramedic","nurses","nurse","supermarket","workers"]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[709,708,777,779,"nhs staff",507,508,"clap-for-nhs",772,"nationwide-clap",778,"nhs blue","nhs-workers","nhs workers",575,574,603,602,710]),r.ge(1)))),39266:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.tw(r.cw(0,r.os(r.s,["client","title"],["air bnb","air-bnb",228,313,941,291,940,770,771,81,50,82,881]),r.ge(1)),2592e6),r.cw(0,r.os(r.s,["client","url"],["timeout.com/news/you-can-rent-the-italian-villa-from-normal-people-on-airbnb-050520","timeout.com/london/hotels/the-best-airbnb-venues-in-london","timeout.com/london/news/harry-potters-birthplace-is-now-available-to-rent-on-airbnb-110419","timeout.com/london/news/this-website-is-basically-airbnb-for-campervans-102919","timeout.com/things-to-do/best-airbnbs-in-hawaii","timeout.com/london/news/you-can-now-stay-in-the-real-life-downton-abbey-via-airbnb-091819","timeout.com/london/news/stop-right-now-the-actual-bus-from-spice-world-is-on-airbnb-051519","timeout.com/london/news/theres-a-haunted-airbnb-next-to-stansted-airport-103118","timeout.com/london/property/five-great-reasons-to-list-your-home-on-airbnb","timeout.com/london/blog/you-can-now-stay-in-an-airbnb-that-looks-like-a-lovely-magical-garden-012517","timeout.com/london/blog/airbnb-is-laying-on-loads-of-free-fun-in-spitalfields-this-weekend-061516","timeout.com/london/blog/airbnb-is-banning-london-hosts-from-renting-out-their-homes-for-more-than-90-days-a-year-120116","timeout.com/london/hotels/the-best-airbnb-venues-in-dublin",228,"timeout.com/london/news/revealed-the-uks-most-lusted-after-airbnbs-this-summer-061920","https://www.timeout.com/london/hotels/the-best-airbnb-venues-in-london","airbnbs","timeout.com/melbourne/hotels/the-best-airbnbs-in-melbourne","timeout.com/chicago/things-to-do/best-airbnb-rentals-and-apartments","timeout.com/lisbon/hotels/the-best-airbnb-venues-in-lisbon","timeout.com/newyork/travel/airbnbs-for-ski-getaways-from-nyc","timeout.com/berlin/en/hotels/the-best-airbnb-venues-in-berlin","timeout.com/frankfurt/hotels/the-best-airbnbs-in-frankfurt","timeout.com/duesseldorf/hotels/the-best-airbnbs-in-duesseldorf","timeout.com/munich/hotels/the-best-airbnbs-in-munich","timeout.com/stockholm/hotels/the-best-airbnbs-in-stockholm","timeout.com/rome/hotels/best-airbnbs-in-rome","timeout.com/milan/hotels/the-best-airbnbs-in-milan/","timeout.com/dublin/hotels/best-airbnb-venues-in-dublin","timeout.com/venice/hotels/best-airbnbs-in-venice","timeout.com/prague/hotels/best-airbnbs-in-prague","timeout.com/paris/en/hotels/the-best-airbnb-venues-in-paris","timeout.com/chicago/hotels/best-airbnb-cabin-rentals-near-chicago","timeout.com/newyork/hotels/best-airbnb-brooklyn-rentals","timeout.com/newyork/hotels/coolest-airbnbs-in-new-york-city","timeout.com/manchester/things-to-do/see-inside-these-nine-great-airbnb-properties-in-manchester","timeout.com/los-angeles/hotels/best-airbnbs-in-los-angeles","timeout.com/croatia/hotels/the-best-airbnb-croatia-stays","timeout.com/barcelona/hotels/the-best-airbnb-venues-in-barcelona","timeout.com/newyork/hotels/best-airbnb-hudson-valley-rentals","timeout.com/amsterdam/hotels/the-best-airbnb-venues-in-amsterdam"]),r.ge(1))),r.tw(r.cw(0,r.os(r.w,["category","primary_category"],[31,20,105,18,25,48,79]),r.ge(1)),2592e6)),r.cw(0,r.os(r.w,["event","eventType"],[138,101,400]),r.ge(1))),r.cw(0,r.y(["transaction","category"],138),r.ge(1))),r.cw(1,r.ps(["dest_url"],"airbnb.com"),r.ge(1)))),40114:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[739,"Iron Man","The Incredible Hulk","Iron Man 2",399,"Captain America: The First Avenger","Marvel\'s The Avengers","Iron Man 3","Thor: The Dark World","Captain America: The Winter Soldier",357,"Avengers: Age of Ultron","Ant-Man","Captain America: Civil War",349,"Guardians of the Galaxy Vol. 2","Spider-Man: Homecoming","Thor: Ragnarok",335,"Captain Marvel","spider man","spider-man"]),r.ge(1)),r.cw(0,r.ps(["event","name"],739),r.ge(1)))),40115:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[878,879,"star-war"]),r.ge(1)),r.cw(0,r.os(r.s,["event","name"],[878,879]),r.ge(1)))),40428:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],["protest",454,"protests","george floyd","demonstrations","marches","march","brexit","extinction rebellion","greta thunberg","climate-change","climate change","trump","donald trump","me too"]),r.ge(1)),r.tw(r.cw(0,r.ps(["client","url"],281),r.ge(1)),12096e5))),40462:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],["leadership","conference",153,"women-in-business","workshop","seminar","courses",511,"employment"]),r.ge(1)),r.tw(r.cw(0,r.ps(["client","url"],281),r.ge(1)),6048e5))),40928:r.q(r.ocq(r.ocq(r.cw(0,r.os(r.w,["category","primary_category"],[306,645,"spas & salons"]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[2,6,269,35,"clean eating","sleep","sleeping","dreams","active",202,17,941,313,151,4,729,"make up",297,870,88,"salon",769,137,748,311,635,"hairdresser"]),r.ge(1))),r.cw(0,r.os(r.w,["event","eventType"],[138,"Fitness","Health and Beauty"]),r.ge(1)))),40973:r.q(r.ocq(r.cw(0,r.os(r.s,["isp_info","organization"],[312,"college",204]),r.ge(1)),r.cw(0,r.o([r.os(r.s,["client","title"],[883,65,916,312]),r.os(r.s,["client","url"],[684,683,670,674,680,672])]),r.ge(1)))),42300:r.q(r.ocq(r.ocq(r.ocq(r.itp("eyeota","35557",!1,"42300"),r.itp("liveramp_Experian","1004269139",!1,"42300")),r.itp("eyeota","6692",!1,"42300")),r.itp("liveramp_Experian","1004259159",!1,"42300"))),42301:r.q(r.ocq(r.itp("liveramp_Experian","1004271929",!1,"42301"),r.itp("eyeota","1657",!1,"42301"))),42302:r.q(r.ocq(r.ocq(r.itp("eyeota","13024",!1,"42302"),r.itp("eyeota","35567",!1,"42302")),r.itp("eyeota_experian","22881",!1,"42302"))),42303:r.q(r.ocq(r.itp("eyeota","45",!1,"42303"),r.itp("eyeota","35811",!1,"42303"))),42307:r.q(r.ocq(r.ocq(r.itp("liveramp_Experian","1004266889",!1,"42307"),r.itp("liveramp_CACI","1004187689",!1,"42307")),r.itp("liveramp_DLG","1003697059",!1,"42307"))),42308:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("eyeota","35567",!1,"42308"),r.itp("liveramp_DLG","1004620879",!1,"42308")),r.itp("eyeota","34867",!1,"42308")),r.itp("liveramp_Stirista","1003669279",!1,"42308")),r.itp("eyeota_experian","30186",!1,"42308")),r.itp("liveramp_Experian","1004265169",!1,"42308")),r.itp("liveramp_Experian","1004265179",!1,"42308")),r.itp("liveramp_CACI","1004188149",!1,"42308")),r.itp("liveramp_Experian","1004581019",!1,"42308"))),43608:r.q(r.ocq(r.cw(0,r.os(r.s,["client","url"],["timeout.com/newyork/news/this-brooklyn-flower-shop-is-selling-gorgeous-bouquets-for-non-profits-every-sunday-061220","timeout.com/newyork/news/nycs-black-owned-bookstores-give-us-their-top-recommendations-060420","timeout.com/newyork/news/these-food-themed-tote-bags-are-raising-money-for-bail-funds-060320","timeout.com/newyork/news/these-local-resources-connect-new-yorkers-to-black-owned-businesses-060120","timeout.com/newyork/news/black-supper-is-a-new-free-food-program-serving-the-black-community-060420","timeout.com/things-to-do/how-to-support-black-lives-matter","timeout.com/miami/news/this-directory-details-over-100-black-owned-miami-businesses-to-support-060120","timeout.com/chicago/news/these-local-resources-connect-chicagoans-to-black-owned-businesses-053120","timeout.com/los-angeles/news/this-spreadsheet-details-over-100-black-owned-l-a-restaurants-to-support-060120","timeout.com/usa/news/this-app-helps-you-find-black-owned-restaurants-in-your-city-060520","timeout.com/newyork/news/how-you-can-help-the-black-lives-matter-movement-and-protesters-in-nyc-right-now-060220","timeout.com/los-angeles/news/how-to-support-black-lives-matter-and-other-groups-protesting-in-los-angeles-060120","timeout.com/chicago/news/how-to-support-black-lives-matter-and-other-groups-protesting-in-chicago-060120","timeout.com/newyork/news/five-things-to-know-if-youre-going-out-to-protest-in-new-york-city-060120","timeout.com/sydney/news/how-do-you-protest-while-staying-physically-distant-we-asked-an-expert-060320","timeout.com/london/news/the-black-lives-matter-protest-in-hyde-park-has-been-called-off-heres-how-you-can-still-show-your-support-061220","timeout.com/london/news/you-can-vote-for-a-new-black-lives-matter-mural-in-west-london-092320","timeout.com/london/news/a-black-lives-matter-protest-this-weekend-will-mark-the-anniversary-of-the-london-riots-080720","timeout.com/london/news/donate-to-these-anti-racism-charities-and-organisations-doing-amazing-work-in-london-060420","timeout.com/london/news/these-resources-connect-londoners-to-black-owned-businesses-061220","timeout.com/london/news/black-cultural-archives-is-asking-londoners-to-share-photos-and-videos-from-the-2020-black-lives-matter-protests-060820","timeout.com/london/news/an-amazing-mural-to-black-lives-matter-has-appeared-in-greenwich-061920","timeout.com/london/news/benji-b-is-streaming-a-deviation-fundraiser-for-black-lives-matter-tonight-061820","timeout.com/london/blog/black-lives-matter-protesters-have-chained-themselves-to-the-road-into-heathrow-airport-080516"]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],["black pound","BLM","black-lives-matter",454,"black business","black-business","black protest","black-protest"]),r.ge(1)))),46823:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[250,547,251,548,"Star Wars","Marvel",335,328,"Misbehaviour",224,"Downhill","Call of the Wild","Underwater","A Hidden Life","Jojo Rabbit","Spies in Disguise","Lucy in the Sky","Frozen","Le Mans \'66","Terminator","Maleficent","Lion King",402,"Aladdin","Avengers","Dumbo","Glass","Marry Poppins Returns","Ralph Breaks the Internet","Nutcracker","Christoper Robin","Ant-Man and the Wasp",366,"Patrick","A Wrinkle in Time",344,399,"Pirates of the Caribbean",357,"Beauty and the Beast","Moana",349,"Queen of Katwe","Pete\'s Dragon",354,"Captain America","Alice through the Looking Glass","Jungle Book","Zootropolis",367,"Tomorrowland - A World Beyond","Cinderella"]),r.ps(["client","url"],671)]),r.ge(1))),47117:r.q(r.ocq(r.cw(0,r.a([r.os(r.s,["client","title"],[250,547,251,548,328,224,638,"The Mandalorian","The Simpsons","WandaVision",34]),r.nt(r.ps(["client","title"],"disneyparks")),r.nt(r.ps(["client","title"],"disneyland")),r.nt(r.ps(["client","title"],"disney parks")),r.nt(r.ps(["client","title"],"disney land")),r.nt(r.ps(["client","title"],"snow white")),r.nt(r.ps(["client","title"],"lion king"))]),r.ge(1)),r.cw(0,r.a([r.os(r.s,["client","url"],[250,"disney-plus","artemis-fowl",638,"the-mandolorian","the-simpsons","wanda-vision",34,"onward",251]),r.nt(r.ps(["client","url"],671))]),r.ge(1)))),47121:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[186,759,416,"Murder on the Orient Express","Gal Gadot","Armie Hammer",373,"murder-mystery","agatha-christie","murder-on-the-orient-express","escape-room","armie-hammer","letitia-wright"]),r.os(r.s,["client","title"],[186,759,416,"murder on the orient express","gal gadot","armie hammer",373,256])]),r.ge(1))),47127:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[402,"A Bug\'s Life","Toy Story 2","Finding Nemo","The Incredibles","Ratatouille",403,"Toy Story 3","Cars 2","Brave","Monsters University",367,"The Good Dinosaur",354,"Cars 3",344,366,"Toy Story 4",224,"Monster\'s Inc",104,429,"kids movies","kids films"]),r.os(r.s,["client","url"],["toy-story","a-bug\'s-life","toy-story-2","finding-nemo","the-incredibles","ratatouille",403,"toy-story-3","cars-2","brave","monsters-university","inside-out","the-good-dinosaur","finding-dory","cars-3","coco","incredibles-2","toy-story-4","monster\'s-inc",104,429,"/kids","kids-movies","kids-films"])]),r.ge(1))),47968:r.q(r.ocq(r.tw(r.cw(0,r.a([r.os(r.w,["page_country"],["BE","IE",222,385,352,338,"TR","HR",348,"IT","IL","NL","GR","CZ","AT","FI","NO"]),r.y(["geo_info","country"],28)]),r.ge(1)),2592e6),r.cw(0,r.os(r.s,["client","title"],["TRAVEL",11,"corridors",30,181,270]),r.ge(1)))),49915:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.os(r.s,["event","name"],[186,765,572,256,573,652,5,458,134,559,907,908,867,694,851]),r.ge(1)),r.cw(0,r.y(["event","eventType"],398),r.ge(1))),r.cw(0,r.y(["transaction","category"],398),r.ge(1))),r.cw(0,r.os(r.s,["transaction","name"],[186,765,572,256,573,652,5,458,134,559,907,908,867,694,851]),r.ge(1)))),50539:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[804,805]),r.ge(1)),r.cw(0,r.os(r.s,["event","name"],[804,805]),r.ge(1)))),53156:r.q(r.cw(0,r.a([r.os(r.s,["client","referrer"],["google","duckduckgo","bing","yandex","ecosia","swisscows","search.creativecommons","startpage","onesearch","wiki.com","givewater"]),r.nt(r.ps(["client","referrer"],310))]),r.ge(1))),54871:r.q(r.ocq(r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/london/news/laura-marling-lends-her-voice-to-the-union-chapels-fundraising-effort-051820 ...","https://www.timeout.com/london/news/battersea-park-childrens-zoo-is-crowdfunding-to-continue-to-care-for-its-animals-040620","https://www.timeout.com/london/news/the-clapham-grand-could-permanently-close-without-support-051920 ..","https://www.timeout.com/london/news/independent-london-cinema-the-lexi-has-smashed-its-fundraising-target-060820","https://www.timeout.com/london/news/iconic-soho-boozer-the-french-house-is-saved-until-february-052920","https://www.timeout.com/london/news/notting-hill-carnival-announces-digital-line-up-for-2020","https://www.timeout.com/london/news/seven-sisters-club-five-miles-has-released-a-compilation-to-help-it-survive-061220","https://www.timeout.com/london/news/four-extremely-secret-bits-of-london-parks-090920","https://www.timeout.com/london/news/ronnie-scotts-jazz-club-will-finally-reopen-this-month-090720","https://www.timeout.com/london/news/one-third-of-central-londons-venues-still-havent-reopened-091020","https://www.timeout.com/london/news/chefs-specials-mambow-founder-abby-lees-favourite-spots-in-hackney-100720","https://www.timeout.com/london/news/how-top-shop-cuvee-made-park-and-at-home-drinking-extremely-chic-091620","https://www.timeout.com/london/news/the-best-of-brixton-picked-by-locals-091620","https://www.timeout.com/london/news/how-brixton-courtyard-brought-clubbing-back-to-london-kind-of-092120","https://www.timeout.com/london/news/the-nutcracker-will-prance-on-to-the-royal-opera-house-stage-this-christmas-092920","https://www.timeout.com/london/news/shoreditch-is-getting-a-new-food-hall-from-the-founder-of-street-feast-092920","https://www.timeout.com/london/news/imads-syrian-kitchen-is-finally-getting-a-permanent-london-home-100120","https://www.timeout.com/london/news/8-things-you-need-to-know-about-socially-distanced-comedy-clubs-in-london-100220 ...","https://www.timeout.com/london/news/these-11-lgbtq-venues-in-london-have-been-saved-by-emergency-funding-100120","https://www.timeout.com/london/news/hundreds-of-london-arts-venues-and-organisations-have-been-saved-by-emergency-funding-101320","https://www.timeout.com/london/news/cheese-conveyor-belt-masterminds-to-open-a-shop-on-columbia-road-100920","https://www.timeout.com/london/news/londons-cinemas-need-you-032320","https://www.timeout.com/london/news/independent-cinemas-may-not-be-ready-to-reopen-in-july-052620","https://www.timeout.com/london/news/londons-oldest-french-patisserie-is-crowdfunding-to-stay-afloat-032320","https://www.timeout.com/london/news/some-of-londons-best-loved-landmarks-are-at-risk-062220","https://www.timeout.com/london/news/theres-a-new-nationwide-campaign-to-help-small-music-venues-survive-042920","https://www.timeout.com/london/news/regents-parks-beautiful-open-air-theatre-announces-summer-return-071720","https://www.timeout.com/london/news/shakespeares-globe-is-now-facing-a-struggle-for-survival-051920","https://www.timeout.com/london/news/lewisham-according-to-an-almost-lifelong-lewisham-local-081320","https://www.timeout.com/london/news/east-end-family-bakery-percy-ingle-may-be-closing-for-good-062320","https://www.timeout.com/london/news/eviction-threatened-london-restaurants-are-asking-the-government-for-more-help-091420","https://www.timeout.com/london/news/we-put-questions-from-venues-and-creatives-in-crisis-to-london-mayor-sadiq-khan-071520","https://www.timeout.com/london/news/rooftop-igloos-have-arrived-in-london-for-winter-socialising-101520","https://www.timeout.com/london/news/the-haggerston-needs-your-money-072420","https://www.timeout.com/london/news/11-incredible-6-cocktails-to-neck-during-london-cocktail-week-100220","https://www.timeout.com/london/news/chefs-specials-francesco-mazzeis-favourite-spots-in-islington-081020","https://www.timeout.com/london/news/hackneys-top-up-truck-is-bringing-zero-waste-to-your-doorstep-101920","https://www.timeout.com/london/news/this-instagram-account-shares-londoners-favourite-places-to-shop-locally-082720","https://www.timeout.com/london/news/in-pictures-camille-walala-has-colourfully-taken-over-a-whole-east-london-street-090220","https://www.timeout.com/london/news/three-top-london-chefs-reveal-their-favourite-cheap-eats-in-the-city-100520","https://www.timeout.com/london/news/brixton-village-market-is-reopening-next-week-061020","https://www.timeout.com/london/news/london-restaurants-are-offering-voucher-deals-to-help-keep-their-businesses-afloat-031320","https://www.timeout.com/london/news/tottenham-club-the-cause-is-aiming-to-add-a-5-000-square-foot-space-for-social-distancing-062520","https://www.timeout.com/london/news/bradleys-spanish-bar-is-crowdfunding-to-stay-alive-041520","https://www.timeout.com/london/news/theatres-and-music-venues-to-be-given-green-light-to-reopen-from-tomorrow-081420","https://www.timeout.com/london/news/the-george-tavern-is-crowdfunding-to-survive-051920","https://www.timeout.com/london/news/these-independent-music-venues-in-london-have-been-saved-by-emergency-funding-082420","https://www.timeout.com/london/news/hackney-empire-is-crowdfunding-for-its-future-062520","https://www.timeout.com/london/news/the-street-that-changed-my-life-comedian-sophie-duker-on-ridley-road-091420","https://www.timeout.com/london/news/this-map-shows-all-the-restaurants-near-you-taking-part-in-eat-out-to-help-out-080720","https://www.timeout.com/london/news/hallelujah-there-are-actually-some-new-bars-and-restaurants-in-london-092520","https://www.timeout.com/london/news/sohos-legendary-heavy-metal-nightspot-crobar-has-closed-092120","https://www.timeout.com/london/news/rip-dinerama-the-east-london-street-food-hangout-closes-for-good-100220","https://www.timeout.com/london/news/the-best-early-bird-deals-in-london-restaurants-and-bars-093020","https://www.timeout.com/london/news/restaurant-and-bar-industry-staff-set-to-protest-over-current-restrictions-101620","https://www.timeout.com/london/news/you-can-swim-beneath-the-stars-in-this-heated-london-swimming-pool-092820","https://www.timeout.com/london/news/the-very-best-of-battersea-as-chosen-by-a-local-102020","https://www.timeout.com/london/news/londons-bars-and-restaurants-are-calling-for-a-national-rent-freeze-to-help-them-survive-042820","https://www.timeout.com/london/restaurants/the-london-restaurants-and-bars-that-wont-reopen-after-lockdown","https://www.timeout.com/london/news/theres-a-new-fund-to-help-our-favourite-london-cinemas-to-survive-043020","https://www.timeout.com/london/news/the-future-of-londons-rio-cinema-is-in-doubt-062320","https://www.timeout.com/london/news/the-mayor-launches-emergency-fund-to-support-struggling-lgbtq-venues-in-london-050420","https://www.timeout.com/london/news/a-third-of-comedy-venues-say-theyll-close-within-the-next-six-months-070920","https://www.timeout.com/london/news/london-pub-the-french-house-is-now-crowdfunding-to-make-it-through-all-this-050420","https://www.timeout.com/london/news/village-underground-has-been-turned-into-a-cycle-park-until-it-reopens-to-clubbers-071020","https://www.timeout.com/london/news/london-bridge-venue-omeara-is-doing-a-raffle-to-raise-funds-051920","https://www.timeout.com/london/news/outdoor-performances-and-government-paid-vouchers-proposed-to-kickstart-london-theatreland-090320","https://www.timeout.com/london/news/soho-to-be-pedestrianised-for-outdoor-restaurants-and-bars-this-summer-070320","https://www.timeout.com/london/news/sadlers-wells-is-back-with-a-season-of-social-disdancing-100920","https://www.timeout.com/london/news/the-campaign-to-save-brixton-market-food-shop-nour-is-gaining-strength-061920","https://www.timeout.com/london/news/bao-is-opening-its-first-all-day-cafe-and-bakery-in-kings-cross-092420","https://www.timeout.com/london/news/this-new-brixton-beer-garden-has-amazing-djs-booked-for-the-summer-070320","https://www.timeout.com/london/news/the-gun-pub-in-hackney-needs-funds-to-survive-061020","https://www.timeout.com/london/news/when-will-your-local-cinema-reopen-071520","https://www.timeout.com/london/news/pay-it-forward-and-keep-local-london-businesses-in-business-061120 ...","https://www.timeout.com/london/news/hampstead-ponds-have-reopened-but-its-regular-swimmers-arent-happy-071620","https://www.timeout.com/london/news/help-jags-foundation-deliver-sunday-lunches-to-needy-londoners-070220","https://www.timeout.com/london/news/red-alert-london-arts-venues-light-up-in-support-of-the-live-events-industry-100120","https://www.timeout.com/london/news/hackneys-nts-radio-has-launched-a-membership-scheme-for-musos-070120 ...","https://www.timeout.com/london/news/the-jazz-cafe-is-reopening-to-socially-distanced-crowds-090220","https://www.timeout.com/london/news/the-uks-first-orange-wine-bar-has-opened-in-london-093020","https://www.timeout.com/london/news/the-very-best-of-leyton-picked-by-a-clued-up-local-092820","https://www.timeout.com/london/news/londons-original-speakeasy-bar-milk-honey-closes-for-good-092820","https://www.timeout.com/london/news/englands-pubs-and-restaurants-hit-with-10pm-curfew-092220","https://www.timeout.com/london/news/village-underground-is-transforming-into-a-giant-dj-bar-081920","https://www.timeout.com/london/news/jolene-is-opening-a-big-new-bakery-in-north-london-091820","https://www.timeout.com/london/news/the-team-behind-gloria-and-circolo-popolare-is-opening-a-massive-restaurant-in-covent-garden-082820","https://www.timeout.com/london/news/sign-this-petition-to-help-save-vauxhalls-nightlife-scene-051420","https://www.timeout.com/london/news/unbelievably-a-new-theatre-is-opening-in-camberwell-next-month-091120","https://www.timeout.com/london/news/the-royal-vauxhall-tavern-is-crowdfunding-to-survive-051520","https://www.timeout.com/london/news/londoners-will-gather-to-make-some-noise-as-elephant-castle-shopping-centre-closes-092420","https://www.timeout.com/london/news/sir-david-attenborough-is-coming-to-save-london-zoo-062220","https://www.timeout.com/london/news/londons-most-magical-and-eccentric-house-reopens-to-the-public-this-week-093020","https://www.timeout.com/london/news/dont-be-a-dick-no-shows-for-tables-put-london-restaurants-at-further-risk-071320","https://www.timeout.com/london/restaurants/london-restaurants-with-eat-out-to-help-out-offers-this-october","https://www.timeout.com/london/news/chefs-specials-max-venning-and-brodie-meahs-favourite-spots-in-finsbury-park-101920","https://www.timeout.com/london/news/the-southbank-centre-warns-it-could-remain-closed-until-april-2021","https://www.timeout.com/london/news/the-british-museum-will-reopen-in-august-with-a-pre-booking-system-080720","https://www.timeout.com/london/news/the-jazz-cafe-is-at-risk-of-closure-052920","https://www.timeout.com/london/news/hackneys-towpath-cafe-has-reopened-and-its-doing-dinner-091020","https://www.timeout.com/london/news/greenwich-market-is-reopening-on-thursday-june-11","https://www.timeout.com/london/news/victoria-parks-lovely-pavilion-cafe-is-finally-reopening-092420","https://www.timeout.com/london/news/heres-why-we-think-soho-is-londons-coolest-neighbourhood-right-now-100620","https://www.timeout.com/london/news/even-the-royal-albert-hall-says-its-future-is-now-at-risk-070320","https://www.timeout.com/london/news/peckham-rooftop-bar-franks-cafe-is-back-for-the-summer-080320","https://www.timeout.com/london/news/the-natural-history-museum-science-museum-and-v-a-are-all-reopening-in-august-071420","https://www.timeout.com/london/news/30-awesome-eat-out-to-help-out-restaurants-where-you-can-still-get-a-table-082420","https://www.timeout.com/london/news/flat-iron-square-is-reopening-its-giant-foodie-garden-this-week-080520","https://www.timeout.com/london/news/tfl-has-launched-a-walking-map-of-londons-most-interesting-streets-091720","https://www.timeout.com/london/news/everything-you-need-to-know-about-the-greenwich-and-docklands-international-festival-2020","https://www.timeout.com/london/news/the-very-best-of-highbury-holloway-and-finsbury-park-picked-by-a-beloved-local-restaurateur-092220","https://www.timeout.com/london/news/corsica-studios-is-curating-a-socially-distanced-beer-garden-in-peckham-082020","https://www.timeout.com/london/news/ready-made-sunday-sara-pascoes-favourite-crouch-end-spots-092520","https://www.timeout.com/london/news/club-mexicana-is-now-delivering-diy-vegan-taco-kits-plus-margaritas-101320","https://www.timeout.com/london/news/shop-safely-at-this-christmas-market-showcasing-south-londons-craft-makers-101220","https://www.timeout.com/london/news/london-zoo-warns-it-might-not-survive-the-current-crisis-050720","https://www.timeout.com/london/news/protests-from-london-nightlife-venues-denied-culture-recovery-funding-102020","https://www.timeout.com/london/news/help-save-dalston-eastern-curve-garden-070320","https://www.timeout.com/london/news/rudys-is-opening-a-vegan-butcher-102020","https://www.timeout.com/london/news/costa-del-tottenham-extends-its-outdoor-drinking-space-for-the-summer-071720","https://www.timeout.com/london/news/theres-a-new-day-dedicated-to-helping-record-stores-survive-these-tough-times-052920","https://www.timeout.com/london/news/the-hayward-gallery-is-reopening-next-week-072220","https://www.timeout.com/london/news/support-hackneys-concorde-youth-centre-and-made-up-kitchen-theyve-been-doing-good-things-for-people-062420","https://www.timeout.com/london/news/chefs-specials-cheese-toastie-queen-holly-chavess-favourite-spots-in-tottenham-093020","https://www.timeout.com/london/news/the-royal-vauxhall-tavern-is-set-to-triumphantly-reopen-on-july-4","https://www.timeout.com/london/news/greenwich-is-getting-a-magical-residents-rainbow-installation-082120","https://www.timeout.com/london/news/chefs-specials-ben-tishs-favourite-spots-in-limehouse-082420","https://www.timeout.com/london/news/clubs-suggest-face-masks-for-all-on-the-socially-distanced-dancefloor-082520","https://www.timeout.com/london/news/how-this-summers-pedestrianisation-is-changing-chinatown-080720","https://www.timeout.com/london/news/london-is-getting-its-first-new-flower-market-in-150-years-082820","https://www.timeout.com/london/news/a-bermondsey-brewery-is-giving-away-5-000-pints-of-cider-this-week-081020","https://www.timeout.com/london/news/chinatowns-lanterns-have-had-a-colourful-makeover-to-celebrate-the-hard-hit-neighbourhood-091820","https://www.timeout.com/london/news/these-london-restaurants-are-extending-eat-out-to-help-out-into-september-082620","https://www.timeout.com/london/news/inua-ellams-london-is-the-closest-ive-felt-to-a-home-092320","https://www.timeout.com/london/news/londons-giant-george-michael-mural-has-finally-been-unveiled-091720","https://www.timeout.com/london/news/the-street-that-changed-my-life-presenter-yinka-bokinni-on-rye-lane-092320","https://www.timeout.com/london/news/londons-new-orleans-themed-food-hall-and-hangout-is-back-092420","https://www.timeout.com/london/news/the-original-dishoom-in-covent-garden-is-finally-reopening-with-a-swish-new-look-100720","https://www.timeout.com/london/news/victim-of-the-10pm-curfew-canavans-pool-club-in-peckham-is-closing-for-ever-092520","https://www.timeout.com/london/news/black-owned-bookshops-in-london-you-can-currently-buy-from-101520","https://www.timeout.com/london/news/theres-going-to-be-an-outdoor-sculpture-trail-in-mayfair-092820","https://www.timeout.com/london/news/many-of-our-favourite-london-pubs-are-reopening-on-july-4","https://www.timeout.com/london/news/outdoor-dining-in-central-london-is-being-extended-into-october-092920","https://www.timeout.com/london/news/the-horniman-museum-has-announced-its-reopening-this-month-071020","https://www.timeout.com/london/news/actual-christmas-concerts-plus-the-nutcracker-return-to-the-royal-albert-hall-100120","https://www.timeout.com/london/news/bermondsey-beer-mile-could-be-next-to-pedestrianise-for-the-summer-071720","https://www.timeout.com/london/news/all-cineworld-and-picturehouse-cinemas-to-temporarily-close-100520","https://www.timeout.com/london/news/this-glorious-thamesside-cinema-is-reopening-early-072420","https://www.timeout.com/london/news/the-uks-biggest-beer-hall-is-opening-in-east-london-101320","https://www.timeout.com/london/news/you-can-dine-at-dishoom-for-half-the-price-this-august-080420","https://www.timeout.com/london/news/patty-bun-is-launching-a-new-range-of-budget-burgers-101620","https://www.timeout.com/london/news/soho-according-to-a-soho-stalwart-081420","https://www.timeout.com/london/news/nick-cave-has-donated-his-socks-to-help-save-a-london-venue-060520","https://www.timeout.com/london/news/how-the-buzziest-place-in-peckham-came-back-from-the-abyss-082820","https://www.timeout.com/london/news/bfi-southbank-to-remain-closed-for-the-summer-061920","https://www.timeout.com/london/news/its-not-a-caff-its-a-social-club-we-reunite-regulars-with-their-favourite-haunts-090720","https://www.timeout.com/london/news/10-of-the-best-eat-out-to-help-out-deals-from-our-favourite-restaurants-073120","https://www.timeout.com/london/news/how-londons-parks-saved-us-in-the-citys-weirdest-year-092120","https://www.timeout.com/london/news/london-zoo-needs-your-help-could-you-volunteer-073120","https://www.timeout.com/london/news/weve-been-served-a-death-sentence-london-hospitality-venues-react-to-10pm-curfew-092220","https://www.timeout.com/london/news/help-save-london-pub-royalty-the-queens-head-090720","https://www.timeout.com/london/news/hackney-is-trialling-a-new-street-food-market-100520","https://www.timeout.com/london/news/hoxtons-outdoor-ballet-has-been-saved-heres-how-you-can-see-it-in-action-091820","https://www.timeout.com/london/news/theres-an-auction-of-awesome-art-to-help-save-the-vagina-museum-092120","https://www.timeout.com/london/news/ally-pally-returns-with-an-autumn-season-of-indoor-comedy-gigs-and-theatre-092520","https://www.timeout.com/london/news/more-than-60-000-sign-petition-in-support-of-clubs-dance-music-and-nightlife-100220","https://www.timeout.com/london/news/duck-waffle-is-now-serving-bottomless-brunch-seven-days-a-week-100620","https://www.timeout.com/london/news/the-worlds-oldest-surviving-music-hall-is-reopening-in-london-100820","https://www.timeout.com/london/news/two-excellent-new-food-delivery-services-have-launched-in-london-101320"]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],["clapham grand","clapham-grand","Clapham","battersea park","battersea-park","shoreditch","shoreditch-foodhall","doorstop","delivery","deals","foodhall",46,"discount","discounts","money off","money-off",845,"community",478,"market","foodies","food lovers","food-lovers"]),r.ge(1)))),62199:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[498,497,552,553,627,"WWF","feed-the-children",605,"save-the-children",825,"food-bank",384,582,"human-rights",412,419,803,685,751,949,712,952,618,619]),r.os(r.s,["client","title"],[498,497,552,553,627,605,"funding","wwf","feed the children",582,825,384,"food bank","human rights",412,419,803,685,751,949,712,952,618,619])]),r.ge(1))),62273:r.q(r.itp("eyeota","35782",!1,"62273")),62592:r.q(r.ocq(r.cw(0,r.os(r.s,["client","title"],[946,824,737,221,703,704,922,923,462,463,550,549,485,397,905]),r.ge(1)),r.cw(0,r.os(r.s,["client","url"],[946,824,737,221,703,704,922,923,462,463,550,549,485,397,905]),r.ge(1)))),62593:r.q(r.cw(0,r.os(r.s,["client","title"],[611,"gardening","flowers","chelsea flower show","garden centre","plants","plant","green",50,"woodland","wetland","woods",81,82]),r.ge(1))),62613:r.q(r.itp("liveramp_ShareThis","1001010119",!1,"62613")),62627:r.q(r.cw(0,r.os(r.s,["client","title"],["poem","poetry","poems","literary","literature","fiction",836,40,"book shop",464,110,"readings","pulitzer","laureate","writer","writers"]),r.ge(1))),63018:r.q(r.ocq(r.cw("SlotViewable",r.pe(["campaign_id"],2810322386),r.ge(1)),r.cw(2,r.pe(["campaign_id"],2810322386),r.ge(1)))),65170:r.q(r.ocq(r.ocq(r.ocq(r.cw(2,r.pe(["campaign_id"],2449191106),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[155,489,"road trips",438,852,254,"drive in cinema",77,263,"designer good",809]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["road-trips",852,438,155,489,809,254,44,"drive-in-cinema",77,264]),r.ge(1))),r.cw(0,r.pe(["basket","total"],50),r.ge(1)))),71851:r.q(r.tw(r.cw(0,r.o([r.os(r.cx,["category","page_tags"],[191,10]),r.os(r.s,["client","url"],[10,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,239,201,191,"https://www.timeout.com/tokyo/news/the-tokyo-olympics-are-only-100-days-away-heres-what-we-know-so-far-041421","https://www.timeout.jp/tokyo/ja/news/the-tokyo-olympics-are-only-100-days-away-heres-what-we-know-so-far-4-15-2021-041521","https://www.timeout.com/tokyo/news/confirmed-tokyo-olympics-will-not-have-overseas-spectators-due-to-covid-19-risks-032021","https://www.timeout.com/tokyo/things-to-do/coronavirus-vs-the-olympics-how-will-the-covid-19-pandemic-affect-the-tokyo-2020-games","https://www.timeout.jp/tokyo/ja/news/ralph-lauren-us-national-team-uniforms-for-tokyo-olympics-041621",538,648,840,746]),r.os(r.s,["client","title"],[10,17,49,43,39,41,55,59,84,72,62,32,75,63,64,90,201,191,648,538,840,746,"The Tokyo Olympics are only 100 days away – here’s what we know so far","Confirmed: Tokyo Olympics will not have overseas spectators due to Covid-19 risks","Stratford: then and now - Stratford before the Olympics - Time Out London"])]),r.ge(1)),2592e6)),71852:r.q(r.ocq(r.ocq(r.cw(0,r.os(r.s,["client","url"],[70,207,172,171,220,175,174,195,596,173,95,89,576,666]),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],[70,207,220,956,195,174,175,173,595,171,172,957,958,95,89,115,287,576,666]),r.ge(1))),r.cw(0,r.os(r.s,["event","offerText"],[95,70,89,875,115,219]),r.ge(1)))),73622:r.q(r.ocq(r.cw(0,r.y(["category","primary_category"],31),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],["chinese food delivery","chinese food","chinese","chinese delivery","delivery me food","food near me","delivery near me","pizza delivery","pizza","delivery restaurants",51,"chinese near me","food for delivery","restaurant delivery","pizza hut delivery","pizza hut","delivery service","food delivery service","dominos delivery","dominos","thai food delivery","thai food","best food delivery","delivery food places","pizza near me","kebab","indian delivery","indian food","kebab delivery",46,557]),r.ge(1)))),74544:r.q(r.ocq(r.ocq(r.cw(2,r.pe(["campaign_id"],2449191106),r.ge(1)),r.cw(0,r.os(r.s,["client","title"],["Natural History Museum | Museums in South Kensington, London","Natural History Museum | Museums in USC/Exposition Park, Los Angeles",654,"Military History Tour of New York Harbor | Classic Harbor Line | Things to do in New York","Museum of Natural History\'s new gem hall finally has an official opening date","National Museum of Funeral History | Museums in Greater Houston, Houston","American Museum of Natural History | Museums in Upper West Side, New York","Most Famous Paintings in Art History Of All Time Ranked","100 best movie sex scenes in the history of film","Best Free Museums in NYC for Art, History and More","13 Best Boston Museums to Explore History, Science and Art","Butterfly Pavilion at the Natural History Museum | Natural History Museum | Things to do in Los Angeles","10 Best Parks in Amsterdam Are Steeped in History","10 Best Museums in Prague: Kafka, Art, Czech History and More","Best walking tours NYC has to offer from art to history","10 Best Museums in San Antonio for Art, Culture and History","The Viktor Wynd Museum of Curiosities, Fine Art & Natural History | Museums in Hackney, London","The Met is opening the largest Michelangelo exhibition in its history","‘Introducing Fantastic Beasts: The Wonder of Nature’ | Natural History Museum | Museums in London","Azul Histórico",653,"past"]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["https://www.timeout.com/london/museums/natural-history-museum",654,"https://www.timeout.com/los-angeles/art/a-brief-history-of-the-vagina-in-art-slide-show","https://www.timeout.com/los-angeles/museums/natural-history-museum","https://www.timeout.com/london/things-to-do/an-oral-history-of-rowans-tenpin-bowl","https://www.timeout.com/london/things-to-do/an-oral-history-of-rowans-tenpin-bowl?itm_source=parsely-api","https://www.timeout.com/newyork/things-to-do/military-history-tour-of-new-york-harbor","https://www.timeout.com/newyork/art/top-famous-paintings-in-art-history-ranked","https://www.timeout.com/houston/museums/national-museum-of-funeral-history","https://www.timeout.com/newyork/museums/american-museum-of-natural-history","https://www.timeout.com/newyork/art/top-impressionist-painters-in-art-history","https://www.timeout.com/los-angeles/things-to-do/free-museums-in-la-best-art-history-and-more-for-free","https://www.timeout.com/los-angeles/things-to-do/butterfly-pavilion-at-the-natural-history-museum","https://www.timeout.com/london/museums/the-viktor-wynd-museum-of-curiosities-fine-art-natural-history","https://www.timeout.com/newyork/blog/the-met-is-opening-the-largest-michelangelo-exhibition-in-its-history-050917",653]),r.ge(1)))),75203:r.q(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[264,77,44,169,"https://www.timeout.com/usa/things-to-do/best-couples-vacations-in-america","couples","https://www.timeout.com/newyork/things-to-do/best-couples-cooking-classes-in-nyc","https://www.timeout.com/newyork/news/showtime-series-couples-therapy-is-looking-for-nyc-couples-051221","relationship","boyfriend","girlfriend","wife","husband"]),r.os(r.s,["client","title"],[263,77,169,44]),r.pc_(["category","page_tags"],716),r.pc_(["category","page_tags"],44),r.pc_(["category","page_tags"],717)]),r.ge(1)),r.cw(0,r.pg(["basket","total"],50),r.ge(1)))),76178:r.q(r.ocq(r.ocq(r.ocq(r.tw(r.cw(0,r.os(r.s,["client","title"],[228,81,50,82,881,237,149,"beach day",150,"party","parties","house party",198,"socialising","day time","bars and pubs",449,"drinks"]),r.ge(1)),2592e6),r.cw(0,r.t,r.ge(1))),r.tw(r.cw(0,r.os(r.w,["category","primary_category"],[31,20,105,18,25,48,79]),r.ge(1)),2592e6)),r.cw(0,r.t,r.ge(1)))),77115:r.q(r.cw(0,r.ps(["client","url"],665),r.ge(1))),7809:r.q(r.cw(0,r.t,r.ge(1))),7827:r.q(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[11,"airport-transport","travel-information",918,181,26,9,271,149,932,935,"vacaiones",917,933,934,571,415,414,540,541,"desti"]),r.os(r.s,["client","title"],[11,"airport transport","travel information",918,181,26,9,271,149,932,935,"vacaciones",917,933,934,571,415,414,540,541,"destí","destins"]),r.pc_(["category","page_tags"],18),r.os(r.w,["category","primary_category"],[18,48]),r.pc_(["category","page_tags"],271),r.pc_(["category","page_tags"],176),r.pc_(["category","page_tags"],11),r.pc_(["category","page_tags"],181)]),r.ge(1)),r.itp("skimlinks","7310447",!1,"7827"))),7834:r.q(r.ocq(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[103,104,231,12,42,252,253,1,119,14,0,789,52,290,862,134,136,294,230,243,293]),r.os(r.s,["client","title"],[102,104,231,12,42,252,253,1,119,14,0,284,52,290,292,134,136,294,230,243,293]),r.y(["category","primary_category"],117),r.y(["category","primary_category"],112),r.pc_(["category","page_tags"],"film genres"),r.pc_(["category","page_tags"],1),r.pc_(["category","page_tags"],12),r.pc_(["category","page_tags"],14)]),r.ge(1)),r.itp("skimlinks","4823307",!1,"7834")),r.itp("skimlinks","4823539",!1,"7834"))),7835:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[1,15,40,159,"adult-entertainment",144,129,168,3,21,437,120,23,8,194,7,568,170,440,157,42,179,"harry-potter",848,901,51,780,760,761,724,719,533,608,434,534,598,"comedia",844]),r.os(r.s,["client","title"],[1,15,40,159,"adult entertainment",144,129,168,3,21,437,120,23,8,194,7,568,170,439,157,42,179,"harry potter",848,900,51,780,760,761,724,719,533,608,434,534,598,844])]),r.ge(1))),7836:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],["science-fiction",33,185,146,74,0,233,210,"cell-phone",523,544,607,283,302,309,753,"video-game",91,286,34,457,482,542,560,"early-adopter",166,570,257,266,118,121,789,225,800,300,301,880,"t-mobile",914,945,455,289,862]),r.os(r.s,["client","title"],["science fiction",33,185,146,74,0,233,210,"cell phone",523,544,607,283,302,309,753,936,91,286,34,457,482,542,560,"early adopter",166,570,257,266,118,121,284,225,800,300,301,880,"T-mobile",914,945,455,289,292])]),r.ge(1))),7838:r.q(r.ocq(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[107,111,66,113,69,76,125,78,128,45,126,116,61,106,135,776,783,450,581,45,259,285,278,796,735]),r.os(r.s,["client","title"],[107,111,66,113,69,76,125,78,128,45,126,116,61,106,135,776,783,450,581,"famílies",259,285,278,796,735])]),r.ge(1)),r.cw(0,r.o([r.y(["category","primary_category"],711),r.pc_(["category","page_tags"],"kids activities and themes"),r.pc_(["category","page_tags"],"101kids"),r.pc_(["category","page_tags"],69),r.pc_(["category","page_tags"],66),r.pc_(["category","page_tags"],"family-friendly"),r.pc_(["category","page_tags"],"babysitting"),r.pc_(["category","page_tags"],"parents"),r.pc_(["category","page_tags"],61),r.pc_(["category","page_tags"],"toddlers"),r.pc_(["category","page_tags"],45),r.pc_(["category","page_tags"],76)]),r.ge(1))),r.cw(0,r.y(["page_city"],140),r.ge(1)))),7843:r.q(r.tw(r.cw(0,r.o([r.os(r.s,["client","url"],[22,47,16,166,8,477,764,546,515]),r.os(r.s,["client","title"],[22,47,16,166,"sonar",515,8,477,546]),r.y(["category","primary_category"],127),r.pc_(["category","page_tags"],"music genres")]),r.ge(1)),2592e6)),7844:r.q(r.cw(0,r.o([r.ps(["client","url"],51),r.ps(["client","title"],51),r.y(["category","primary_category"],31),r.pc_(["category","page_tags"],"restaurant & bar facilities"),r.pc_(["category","page_tags"],"restaurants & cafes (venues)"),r.pc_(["category","page_tags"],845),r.pc_(["category","page_tags"],"food & drink (subject)"),r.ps(["category","primary_category"],46)]),r.ge(1))),7878:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[901,899,"que-fer","que-hacer"]),r.os(r.s,["client","title"],[900,899,"què fer","qué hacer"]),r.y(["category","primary_category"],20)]),r.ge(1))),7880:r.q(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[264,77,44,169]),r.os(r.s,["client","title"],[263,77,169,44]),r.pc_(["category","page_tags"],716),r.pc_(["category","page_tags"],44),r.pc_(["category","page_tags"],717)]),r.ge(1)),r.cw(0,r.pg(["basket","total"],50),r.ge(1)))),7881:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.o([r.os(r.s,["client","url"],[56,5,894,893]),r.os(r.s,["client","title"],[5,56,275,893,894])]),r.ge(1)),r.cw(0,r.o([r.y(["category","primary_category"],25),r.pc_(["category","page_tags"],25),r.pc_(["category","page_tags"],898)]),r.ge(1))),r.cw(1,r.os(r.s,["dest_url"],[273,274,276]),r.ge(1))),r.cw(0,r.os(r.s,["client","url"],["www.timeout.com/newyork/theater/the-phantom-of-the-opera-19","www.timeout.com/newyork/theater/five-reasons-to-see-david-byrnes-american-utopia","www.timeout.com/newyork/things-to-do/ways-and-places-to-cool-down-in-manhattan","www.timeout.com/newyork/theater/three-unique-country-western-experiences-in-manhattan","www.timeout.com/newyork/theater/five-reasons-you-should-see-the-ferryman","www.timeout.com/newyork/things-to-do/looking-for-fashion-inspo-check-out-brooklyn-museums-latest-exhibition","www.timeout.com/london/theatre/five-reasons-why-you-should-book-tickets-to-the-invitation","www.timeout.com/london/theatre/the-national-theatres-much-loved-production-of-peter-pan-is-back-this-summer","www.timeout.com/london/theatre/five-reasons-to-see-the-night-of-the-iguana","www.timeout.com/london/theatre/five-reasons-why-you-need-to-see-rosmersholm"]),r.ge(1)))),7894:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],["health-and-beauty",267,88,4,151,13,"Sport",2,6,24,124]),r.os(r.s,["client","title"],["health and beauty",267,88,4,13,10,2,6,24,124]),r.pc_(["category","page_tags"],305)]),r.ge(1))),7925:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[295,86]),r.os(r.s,["client","title"],[295,86]),r.pc_(["category","page_tags"],869),r.pc_(["category","page_tags"],86),r.y(["category","primary_category"],54),r.pc_(["category","page_tags"],308)]),r.ge(1))),7927:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[65,265,152,444,443,631,"gratuït"]),r.os(r.s,["client","url"],[65,265,152,444,443,631,"gratuit"]),r.pc_(["category","page_tags"],265)]),r.ge(3))),7981:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[718,715,615,453,911,832,827,"trans-",693,554,555,656]),r.os(r.s,["client","title"],[718,715,615,453,911,832,827,"trans",693,554,555,656]),r.pe(["category","primary_category"],"lgbt (category)")]),r.ge(1))),8015:r.q(r.cw(0,r.o([r.os(r.s,["client","url"],[15,40,159,144,129,168,3,21,120,23,194,7,170,440,157,179,5]),r.os(r.s,["client","title"],[15,40,159,144,129,168,3,21,120,23,194,7,170,439,157,179,5]),r.pc_(["category","page_tags"],762),r.pc_(["category","page_tags"],21),r.pc_(["category","page_tags"],5),r.os(r.s,["category","primary_category"],[5,21,762,7]),r.pc_(["category","page_tags"],3),r.pc_(["category","page_tags"],129),r.pc_(["category","page_tags"],23)]),r.ge(1))),8301:r.q(r.acq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("eyeota","229",!1,"8301"),r.itp("eyeota","294",!1,"8301")),r.itp("eyeota","6675",!1,"8301")),r.itp("eyeota","230",!1,"8301")),r.itp("eyeota","295",!1,"8301")),r.itp("eyeota","6676",!1,"8301")),r.ocq(r.ocq(r.itp("eyeota","242",!1,"8301"),r.itp("eyeota","300",!1,"8301")),r.itp("eyeota","6680",!1,"8301")))),8421:r.q(r.ocq(r.tw(r.cw(1,r.t,r.ge(5)),24192e5),r.cw(2,r.t,r.ge(3)))),8500:r.q(r.cw(0,r.o([r.y(["category","primary_category"],105),r.pc_(["category","page_tags"],21)]),r.ge(1))),8501:r.q(r.tw(r.cw(0,r.y(["category","primary_category"],236),r.ge(1)),2592e6)),8502:r.q(r.ocq(r.ocq(r.cw(0,r.o([r.pe(["category","primary_category"],"property (category)"),r.os(r.s,["client","title"],[828,"postcode","ownership","housemate","properties","live","rent","house","houses","flat","flats","area guide","letting","neighbours","neighbourhood"])]),r.ge(1)),r.itp("skimlinks","4823302",!1,"8502")),r.itp("skimlinks","5387377",!1,"8502"))),8679:r.q(r.cw(0,r.ps(["client","url"],897),r.ge(1))),9574:r.q(r.cw(0,r.y(["category","primary_category"],48),r.ge(1))),9697:r.q(r.cw(0,r.o([r.os(r.cx,["category","page_tags"],[57,35]),r.os(r.s,["client","title"],[35,57,930,927,269,745,928,811,931,791,744,810,929,"vegetarià","vegano","vegà","organico"]),r.os(r.s,["client","url"],[35,57,930,927,269,745,928,811,931,791,744,810,929,"vegetaria"]),r.pc_(["category","page_tags"],"vegetarian-friendly")]),r.ge(1))),9702:r.q(r.cw(0,r.o([r.pc_(["category","page_tags"],240),r.os(r.s,["client","title"],[240,246,585,502,636,503,441,"#foodporn",707,235,"steak",208,451,237,850,849,823,505,475,558,924,637,487,895,445,925,526,"costillas",822,494,819,820,486]),r.os(r.s,["client","url"],[240,246,585,502,636,503,441,707,235,208,451,237,850,849,823,505,475,558,924,637,487,486,895,925,445,526,"costilles",822,494,819,820]),r.pc_(["category","page_tags"],246),r.pc_(["category","page_tags"],421),r.os(r.s,["category","sub_category1"],[421,235,"burgers",208,432,"grils"]),r.pc_(["category","page_tags"],208),r.pc_(["category","page_tags"],432),r.pc_(["category","page_tags"],"grills")]),r.ge(1))),9704:r.q(r.acq(r.cw(0,r.o([r.pc_(["category","page_tags"],268),r.os(r.s,["client","title"],[268,119,"dress shops",642,492,621,874,860,896,830]),r.os(r.s,["client","url"],[268,119,642,492,621,874,860,896,830])]),r.ge(1)),r.scq(r.sw(3,r.t,["properties","aggregations","PageviewEngagement","engaged_time"]),r.vq(r.sw(4,r.t,["properties","engaged_time"])),r.ge(5)))),9705:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[342,954,622,539,858,512,270,750,960,774,775,766,767,"reis mags","reyes magos","noel"]),r.os(r.s,["client","url"],[342,954,622,539,858,512,270,750,960,774,775,766,767,"reis-mags","reyes-magos"]),r.pc_(["category","page_tags"],"christmas")]),r.ge(1))),9812:r.q(r.cw(0,r.o([r.os(r.s,["client","title"],[599,749,742,794,600,29,632,423,422,424,588,633,520]),r.os(r.w,["client","url"],[632,599,749,794,742,600,29,422,423,520,424,"amistat",588,633,"grupos"]),r.os(r.w,["category","primary_category"],[236,188]),r.pc_(["category","page_tags"],"city life (blog posts)"),r.pc_(["category","page_tags"],"going in a group"),r.pc_(["category","page_tags"],188),r.ps(["category","sub_category1"],29)]),r.ge(1))),9831:r.q(r.sq(r.cw(0,r.t,r.e(2)))),9835:r.q(r.ocq(r.ocq(r.cw(0,r.a([r.z(["page_country"],226),r.y(["geo_info","country"],28)]),r.ge(1)),r.cw(0,r.a([r.z(["page_country"],227),r.y(["geo_info","country"],100)]),r.ge(1))),r.cw(0,r.a([r.z(["page_country"],222),r.y(["geo_info","country"],142)]),r.ge(1)))),9837:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.a([r.y(["geo_info","city"],27),r.z(["page_city"],27),r.y(["geo_info","country"],28)]),r.ge(1)),r.cw(0,r.a([r.as(r.x,["page_city"],[381,140]),r.y(["geo_info","city"],381),r.y(["geo_info","country"],100)]),r.ge(1))),r.cw(0,r.a([r.y(["geo_info","city"],329),r.z(["page_city"],329),r.y(["geo_info","country"],142)]),r.ge(1))),r.cw(0,r.a([r.z(["page_city"],377),r.y(["geo_info","city"],377),r.y(["geo_info","country"],142)]),r.ge(1))))},s=["Pageview","LinkClick","SlotClicked","PageviewComplete","PageviewEngagement"],a=["netflix","film","fitness","gallery","health","theatre","yoga","dance","festival","getaway","sport","travel","cinema","gym","movie","museum","music","running","travel and hotels (category)","Experience","things to do (category)","art","concert","exhibition","pilates","theatre (category)","trip","London","United Kingdom","festivals","flight","restaurants (category)","sailing","science","streaming","vegan","TV","abroad","adventure","bicycle","books","climbing","comedy","cycling","designer","families","food","gig","hotels (category)","marathon","outdoor","restaurant","romantic","series","shopping and style (category)","swim","theater","vegetarian","weekend-break","-pool","Class","babies","boating","canoeing","cardio","cheap","children","directnow","exercise","family","football","hbo","horseback","hulu","iphone","kayaking","kids","luxury","mum","museums (category)","nowtv","park","parks","roku","rowing","season","shopping","slingtv","spa","stadium","strength","tech","television","ticket","weekendbreak","wembley","youtube","Food + Drink","HIIT","Music","United States","Workshop","amazon prime","amazon-prime","animation","art (category)","baby","babysit","body-build","bodybuild","book","child","cinemas (category)","dad","directv","emirates stadium","father","film (category)","gaming","horror","jazz","laptop","long-weekend","longweekend","mindful","mom","mother","music (category)","parent","show","spin-class","spinclass","spinning","techn","thriller","toddler","video","wellness","Classes + learning","Exhibition","New York Kids","Nightlife","Spain","Theatre","abstract","amazonprime","apple","avocado","band","beach","beaches","beauty","budget","business","calorie","car","checkout.timeout","classic","crunch","culture","dairy-free","dairyfree","dancing","date","dating","diet","electronic","equinox","event","expensive","experience","festival of football","festival-of-football","football club","football pitch","football-pitch","getaways","gluten-free","glutenfree","gourmet","grill","holiday","https://www.timeout.com/london/get-listed","juice","london/tickets","microsoft","murder","newyork/tickets","nightlife (category)","now-tv","ocean","olympics","personal-train","personaltrain","photograph","pitch","protein","quinoa","road trip","road-trip","roadtrip","rugby","run","salad","school","scotch","smoothie","soccer","steakhouse","sushi","technology","tequila","ticketing.timeout","tickets.timeout","vacations","weekend break","westend.timeout","whiskey","whisky","white hart lane","women-in-football","CBD","ES","Las Vegas","Onward","PC","UK","US","airbnb","alcohol","animate","anime","apparel","arcade","attractions (category)","barbecue","bars and pubs (category)","bbq","beer","boulders","burger","camp","class","clip","cocktail","comedy (category)","comfort food","dance (category)","direct-now","disney","disney+","disneyplus","documentary","drama","drive","education","escape room","esport","exhibit","familia","fashion","feminism","feminist","fine dining","fine-dining","free","gamer","hair","halloween","healthy","holidays","hotel","https://checkout.timeout.com/","https://ticketing.timeout.com/","https://westend.timeout.com/","https://www.timeout.com/london/tickets","https://www.timeout.com/london/tickets#","learn","madre","massage","moda","news","now tv","o2","online video","padre","phone","play-as-you-go","playstation","podcast","scenes","scenic","sci fi","screen","screening","shop","ski","skin","sling tv","sling-tv","smartphone","software","sony","space","spas","sport & fitness","sport and fitness (category)","stadium-tour","style","tablet","timeout","treatment","university","walking","women","work","/art and entertainment","/art and entertainment/comics and animation","/business and industrial","/family and parenting","/finance","/food and drink/healthy eating","/society/crime","/society/dating","/sydney","007","Animals","Aquatic","Artemis Fowl","Barcelona","Barking","Basketball","Berkshire","Bermondsey","Bexley","Black Panther","Bromley","Buckinghamshire","CH","Camberwell","Camden","Chelsea","Christmas","Classical Music","Coco","Conservatory","Cookery Class","Croydon","DE","Doctor Strange","East Sussex","Edinburgh","FR","Fair","Finding Dory","Fulham","Greenwich","Guardians of the Galaxy","H&M","Hackney","Hammersmith","Hampshire","Hampstead","Havering","Hillingdon","Hounslow","Incredibles 2","Inside Out","Islington","Kensington","Kent","Kingston","Lambeth","Letitia Wright","Lewisham","Leyton","MI5","Madrid","Manchester","Merton","Nature","New York","Newham","Outdoors","PETA","PT","Paddington","Plants","Redbridge","Restaurant","Richmond","Skiing","Southwark","Sports","Surrey","Sussex","Sutton","THC","Theatre and Comedy","Thor","Tour + Tasting","Tower Hamlets","Toy Story","WALL-E","Wandsworth","West Sussex","Westminster","Wildlife","Yoga","absenta","absinthe","accessor","activis","adidas","aeroport","aeropuerto","agatha christie","aguacate","alcohol free","altruis","alvocat","american","amics","amigos","amistad","amstel","anejo","animal","animales","animated","app","apps","argentinian","armani","arte","artist","attenborough","attraction","audi","avant garde","avant-garde","bacon","baixell","barat","barato","barbacoa","barca","barco","bargain","bars","bebe","beef","biolog","bisexual","black lives matter","blog","blog categories","blogger","blood","boat trip","bolders","bond","bong","bongs","book-shop","bookshops","boots","bourbon","boutique","brandy","brewery","budlight","budweiser","bulleit","bumble","butchers","buy","cabaret","cafe","cafés","calm","calorias","camera","campbeltown","camping","cannabis","carn","carne","carnival","cars","cat","catwalk","cemeteries","century21","cerdo","cervesa","cerveza","charities","charity","cheap eats","cheap-eats","checkout.timeout.com","cheese","cheeseburger","chemist","chicken","chocolate shops","clap-for-carers","clap-for-our-carers","class pass","class-pass","classes","claus","climate","clothing","club","co-work","co-working","coastal","coctel","colegas","comedian","competition","computer","corona","costa","costelles","cow","craftbeer","creuer","crucero","cruise ships","cruises","cultura","danza","date night","dates","deal","decathlon","december","destino","destinos","device","dietary","digital","dior","disco","disney +","disney plus","dispensaries","dispensary","dog","donate","donation","drag","drag queen","dram","drink","duck","dungeon","dvd","earth","easter","easter egg","easter-egg","egg hunt","egg-hunt","eharmony","entertainment","environment","ereader","escapada","escape","escaperoom","essential workers","essential-workers","euro 2020","events & festivals (blog posts)","exhibitions","extinct","facial","familias","famine","farm","farms","fast food","fauna","feminists","festivales","financ","flora","florists","food & drink events","food festival","food market","football-club","football-clubs","forever21","fotografía","friends","friendship","fro-yo","frontline workers","frontline-workers","froyo","fundraising","funny","gadget","galería","gambl","games","garden","gardens","gat","gato","gay","gelateria","gelato","generosity","generous","gerbil","ghost","gifts","gigs","ginebra","glenfiddich","goat","gofundme","gos","granges","granja","gratis","groups","grups","gucci","hairdressers","hamburger","hamburguesa","hamilton","hamster","happy hour","happy-hour","haunted","havana","healing","health and beauty (category)","heels","heineken","heptathlon","hiking","hilarious","hinge","hint","historical","history","home","homosexual","horse","https://clientcentre.timeout.com/e-commerce/","https://premium.timeout.com/","https://premiumprofiles.timeout.com/","https://www.timeout.com/about","https://www.timeout.com/about/commercial-opportunities","https://www.timeout.com/about/commercial-opportunities/uk/london/tickets-offers","https://www.timeout.com/about/contact-us","https://www.timeout.com/london","https://www.timeout.com/london/bars-pubs/football-pubs-in-london","https://www.timeout.com/london/blog/four-new-co-working-spaces-in-london-where-everyone-wants-a-desk-041317","https://www.timeout.com/london/blog/london-work-spots-for-every-kind-of-freelancer-030316","https://www.timeout.com/london/blog/the-best-laptop-friendly-cafes-in-bloomsbury-and-fitzrovia-for-actually-getting-some-work-done-033016","https://www.timeout.com/london/clubs/londons-best-student-club-nights-and-freshers-parties","https://www.timeout.com/london/film/the-100-best-animated-movies","https://www.timeout.com/london/food-and-drink/cheap-breakfasts-in-london?package_page=38427","https://www.timeout.com/london/food-drink/londons-best-cafes-and-coffee-shops","https://www.timeout.com/london/food-drink/londons-best-cheap-eats","https://www.timeout.com/london/get-listed-add-venue","https://www.timeout.com/london/hotels/best-hotels-wifi-in-london","https://www.timeout.com/london/hotels/the-best-business-hotels-in-london","https://www.timeout.com/london/offers","https://www.timeout.com/london/restaurants/londons-best-restaurants-for-business-lunches","https://www.timeout.com/london/restaurants/shoreditch-cheap-eats?package_page=43467","https://www.timeout.com/london/things-to-do/17-unexpected-places-for-freelancers-to-work-in-london","https://www.timeout.com/london/things-to-do/this-new-co-working-space-is-londons-fanciest-yet","https://www.timeout.com/london/things-to-do/time-out-student-guide-2011-2012-3","https://www.timeout.com/london/welcome-to-london-students","humanit","humor","humour","ice-cream","ice-cream parlours","icecream","impression","improv","intersex","jack the ripper","jagermeister","james bond","jameson","jardin","jardines","jardins","jewel","jimbean","joint","joints","joke","journey","junk food","key-worker","keyworker","keyworker discount","kids (category)","kind","lager","laugh","lesbian","level 3 - expensive","level 4 - luxury","lgbt","libro","licor","liqueur","liquor","liquour","llibre","long weekend","love","low alcohol","low-alcohol","make-up","maker\'s mark","maker\'s-mark","makers mark","manicure","mantra","mare","margarita","marijuana","maritime","marvel","mascota","match.com","mates","math","meat free","meat-free","medal","meditat","meditation","meeting","merry","minimum-wage","mndfl","mobile","mocktail","mocktails","monkey","monkey shoulder","monkey-shoulder","murder mystery","museo","museu","museums","music festivals","musical","mystery","nadal","nadales","nail","nails","national trust","national-trust","nationwide clap","natura","navidad","navidades","nens","nhs","nhs-blue","nhs-staff","nightlife","nike","nintendo","niños","non-alcoholic","oceanfront","oceano","offer","office","online-video","open-air","organic","outdoors","painting","pals","parcs","pare","parques","payment","pedicure","peripheral","perro","pet","philanthrop","photo","photography","physic","picnic","pig","pilgrimages","plant based","plant-based","plantas","plantes","platges","platja","play","playa","playas","pollastre","pollo","pop-up","porc","pork","pot","poverty","prada","pride","property","proteina","pumpkin","puzzle","queer","rabbit","re-purpose","re-use","reading","recreation","recycle","recycling","relay","reposado","repurpose","resorts","restaurante","restaurants","retail","reuse","review","rib","ribs","ripper","road","robo","rom","ron","runway","sambuca","santa","satire","scary","schnapps","sci-fi","seaside","second-hand","secondhand","sheep","sherlock","shoe","shops (venues)","skincare","snake","sneakers","spirits","spooky","stadium tour","stand-up","standup","star wars","star-wars","starmobile","staycation","stella","student","styl","style & shopping (blog posts)","submarinisme","submarinismo","summer","sustainability","sweepstake","swimming","takeaway","teatre","teatro","ternera","terror","the-cultural-tfl-map","theatre genres","thing","things to do","things-to-do","tik-tok","time-out-market","timeout.com","tinctures","tinder","tower","tower of london","trainers","tranquil","transgender","treatments","trend","tv","universit","universities","vacances","vacation","valentine","valentine\'s","valentines","vapes","vaping","veal","vedella","vedic","veg","veganism","vegetariano","veggie","veggie-friendly","viajar","viaje","viatge","viatjar","video game","vintage","vodka","voyage","walk","walks","waste","we work","wear","wearable","weed","welcome-to-london-students","welcome-to-the-wonderful-world-of-off-peak","welfare","well-being","wework","wholesome","wildlife","winter","woman","women in football","world cup","world-cup","www.timeout.com/melbourne","xmas","zoo","zumo"];const c={"!UpdateThirdPartyData":["10179","10463","10790","10853","10854","10855","10856","10857","10858","10859","10860","10861","10862","10863","10864","10865","10866","10867","10868","10869","10870","11893","11903","11904","12381","13108","13769","13825","13826","13827","13828","13829","13830","13831","13832","13852","14081","14282","14371","14748","20296","20553","22101","27712","42300","42301","42302","42303","42307","42308","62273","62613","7827","7834","8301","8502"],LinkClick:["10319","10463","13449","27457","29219","29579","29585","39266","7881","8421"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000056","10000058","10000059","10000060","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000090","10065","10115","10116","10117","10319","10339","10428","10463","10622","10798","10852","11122","11200","11201","11202","11893","12008","12198","12199","12200","12475","12668","13108","13132","13133","13183","13225","13445","13446","13520","13640","13833","13852","13855","13856","13857","14577","14808","14812","14816","14823","14830","14831","14848","14851","14853","14858","14867","14868","14918","14919","14921","14922","14923","14924","15072","15073","16243","17295","17299","17301","18029","18570","19810","19814","19815","20177","20463","20478","20707","21006","21068","21290","21542","21794","22101","22156","22629","22851","22995","23441","23694","24326","24408","25102","25111","25178","27457","27709","27712","27713","27734","28133","28160","28161","28391","28392","28415","28517","28518","28519","28520","28538","28540","28541","28566","29195","29223","29564","29567","29568","29569","29571","29572","29573","29574","29575","29576","29581","29582","29590","29591","29592","29593","29594","29595","29596","29598","29599","29694","30144","30164","30405","30406","30407","30408","30409","30410","30411","30412","30413","30414","30415","30416","30417","30418","31818","32319","32321","32324","32333","32334","32336","32337","32338","32339","32340","32341","32344","32347","32348","32627","33624","34114","34125","34165","39266","40114","40115","40428","40462","40928","40973","43608","46823","47117","47121","47127","47968","49915","50539","53156","54871","62199","62592","62593","62627","65170","71851","71852","73622","74544","75203","76178","77115","7809","7827","7834","7835","7836","7838","7843","7844","7878","7880","7881","7894","7925","7927","7981","8015","8500","8501","8502","8679","9574","9697","9702","9704","9705","9812","9831","9835","9837"],PageviewComplete:["13448","9704"],PageviewEngagement:["13448","9704"],SlotClicked:["13444","63018","65170","74544","8421"],SlotViewable:["63018"]}||{};return n(i||{},on(c,{SegmentEntry:Mt(ao)(c.SegmentEntry||[],c["!UpdateLookalikeModels"]||[]),SegmentExit:Mt(ao)(c.SegmentExit||[],c["!UpdateLookalikeModels"]||[])}))}();let cn={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};function un(e,t,o,n,r="event"){let i={diff:{},errors:[]};const s=n.length,a=(e,t,o)=>{switch(e){case"transition":return o===t-1?"transition":"event";default:return e}};for(let c=0;c<s;c++){const u=n[c],l=a(r,s,c),w=ln(Object.assign(Object.assign({},e),i.diff),t,o,u,l);i={diff:Object.assign(Object.assign({},i.diff),w.diff),errors:i.errors.concat(w.errors)}}return i}function ln(e,t,n,i,s="event"){const a=z,c=(e,t)=>{const{is_segment:o,id:s}=t,c=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(t,["is_segment","id"]),u=sn[e],l=u.lift(i,cn),w=r(eo(c.state||null),x(a)),m=r(eo(l),x(a),(e=>tn(w,e))),d=n[e],g=d?r(eo(d),x(a),(e=>tn(m,e))):m,p=Xt(m),f=u.interpret(Xt(g),cn),h=c.activations||{};return Object.assign(Object.assign(Object.assign({checksum:c.checksum},null===p?{}:{state:p}),!1===f.result?{}:{result:f}),0===Object.keys(h).length?{}:{activations:h})},u=[],l={},w=function(e,t,o,n){switch(e){case"event":return(null==an?void 0:an[n.name])||[];case"transition":return[...(null==an?void 0:an[n.name])||[],...an["!UpdateLookalikeModels"]||[]];case"bootstrap":return((null==an?void 0:an[n.name])||[]).filter((e=>void 0!==t[e]));case"updateExternalState":return Object.keys(o);case"updateEnvironment":return[...an["!UpdateLookalikeModels"]||[],...an["!UpdateSecondPartyData"]||[],...an["!UpdateThirdPartyData"]||[]]}}(s,e,n,i),m=w.length;!function(e){if(function(e){return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==e.properties.segment_number}(e)){const t=cn.getSegments(),o=Object.assign(Object.assign({},t),{"1p":Object.assign(Object.assign({},t["1p"]),{[e.properties.segment_number]:"SegmentEntry"===e.name})}),n=mn(o);return cn.getSegments=()=>o,void(cn.getSegmentsArray=()=>n)}o()}(i);for(let o=0;o<m;o++){const n=w[o],r=e[n]||{checksum:t[n]};let i=r;try{i=c(n,r)}catch(e){u.push(`Failed to interpret query ${n}. Got ${e}`)}l[n]=i}return{diff:l,errors:u}}function wn(e){return(t,o,i)=>{var s;return r((null===(s=e[i])||void 0===s?void 0:s.activations)||{},(e=>n(t in e,e)),(([e,n])=>n[t]=e?At(ao)(n[t],[o]):[o]))}}function mn(e){return Object.keys(e).reduce(((t,o)=>{const n=Object.keys(e[o]),r=[];return n.forEach((t=>{!0===e[o][t]&&r.push(t)})),t[o]=r,t}),{})}!function(e){const t=self;function o(e,o,n,r){function i(o){if("function"!=typeof t.postMessage)return e.ports[0].postMessage(o);t.postMessage(o)}if(!n)return i([o,null,r]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",n),i([o,n])}t.addEventListener("message",(function(t){if(n=t,!Array.isArray(n.data)||2!==n.data.length)return;var n;const r=t.data,[i,s]=r;if("function"==typeof e)return function(e,t,n,r){const i=function(e,t){try{return{res:e(t)}}catch(e){return{err:e}}}(t,r);return Boolean(null===(s=i)||void 0===s?void 0:s.err)?o(e,n,i.err):!(a=i.res)||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then?o(e,n,null,i.res):void i.res.then((function(t){o(e,n,null,t)}),(function(t){o(e,n,t)}));var s,a}(t,e,i,s);o(t,i,new Error("Please pass a function into register()."))}))}((function(e){switch(e.type){case"bootstrap":return function(e,t,o,n,r){const i=mn(n.segments);cn={getCurrentTime:()=>new Date,getCurrentSession:()=>n.sessionId,getCurrentView:()=>n.viewId,getSegments:()=>n.segments,getSegmentsArray:()=>i,getLookalikeModels:()=>n.lookalikeModels,setSegmentActivation:(e,t)=>{}};const s=(e,t)=>{const o=sn[e].interpret(null,cn);return Object.assign({checksum:t},!1===o.result?{}:{result:o})},a=nn(t,((t,o)=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.checksum)===o?wo:mo(s(t,o))}));if(0===r.length)return{diff:Object.assign(Object.assign({},e),a),errors:[]};if(0===Object.keys(a).length)return{diff:e,errors:[]};{const n=un(a,t,o,r,"bootstrap");return{diff:Object.assign(Object.assign({},e),n.diff),errors:n.errors}}}(e.stateMap,...e.payload);case"updateEnvironment":return function(e,t,o,n){const r=n.segments?dn.concat(cn.getSegments(),n.segments):cn.getSegments(),i=n.segments?mn(r):cn.getSegmentsArray();return cn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},cn),n.viewId?{getCurrentView:()=>n.viewId}:{}),n.sessionId?{getCurrentSession:()=>n.sessionId}:{}),n.lookalikeModels?{getLookalikeModels:()=>n.lookalikeModels}:{}),n.segments?{getSegments:()=>r,getSegmentsArray:()=>i,setSegmentActivation:wn(e)}:{}),ln(e,t,o,rn,"updateEnvironment")}(e.stateMap,...e.payload);case"updateExternalState":return function(e,t,o){return ln(e,t,o,rn,"updateExternalState")}(e.stateMap,...e.payload);case"process":return un(e.stateMap,...e.payload);case"processTransitions":return function(e,t,o,n){return un(e,t,o,n,"transition")}(e.stateMap,...e.payload);case"noop":return{diff:{},errors:[]}}}));const dn={empty:{},concat:(e,t)=>{const o=Object.assign({},e);for(const[e,n]of Object.entries(t))o[e]?o[e]=on(o[e],n):o[e]=n;return o}}})();',"Worker",void 0,void 0)}var a=n(70);const c=()=>({kind:"null",value:null}),u=e=>({kind:"string",value:e}),l=e=>({kind:"number",value:e}),d=e=>({kind:"array",value:e}),m=e=>({kind:"object",value:e}),f=e=>e,g=()=>({kind:"bottom"}),p=e=>({kind:"inner",a:e}),h=e=>({kind:"top",error:e}),w=e=>({kind:"unbounded",group:e}),_=(e,t)=>({kind:"windowed",key:t,group:e}),y=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),b=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),v=e=>({kind:"numberGroup",group:e}),k=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),q=e=>({state:e}),S=(e,t)=>({commands:e,payload:t});var T=n(276),O=n(3735);function x(e){switch(e.kind){case"null":return I.encode(e);case"string":return D.encode(e);case"number":return C.encode(e);case"array":return A.encode(e);case"object":return j.encode(e)}}function P(e){return null===e?I.decode(e):"number"==typeof e?C.decode(e):"string"==typeof e?D.decode(e):Array.isArray(e)?A.decode(e):j.decode(e)}const M=(e,t)=>(0,a.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),I={encode:e=>null,decode:e=>null===e?(0,a.F2)({kind:"null",value:null}):M(e,"SimpleNull")},D={encode:e=>e.value,decode:e=>"string"==typeof e?(0,a.F2)(u(e)):M(e,"SimpleString")},C={encode:e=>e.value,decode:e=>"number"==typeof e?(0,a.F2)(l(e)):M(e,"SimpleNumber")},A={encode:e=>e.value.map(x),decode:e=>{if(Array.isArray(e)){const t=(0,T.fw)(a.g1)(P)(e);return(0,a.UI)(d)(t)}return M(e,"SimpleArray")}},j={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:x(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,T.fw)(a.g1)((([e,t])=>(0,O.zG)(P(t),(0,a.UI)((t=>(0,O.bc)(e,t))))))(Object.entries(e));return(0,a.UI)((e=>m(new Map([...e]))))(t)}return M(e,"SimpleObject")}};var L=n(7209),R=n(2751);const U=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return p(t(e.a));case"top":return h(e.error)}},N=e=>(0,L.Zt)(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return R.Df.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var z=n(6567),G=n(1885),B=function(e){return-1===e?1:1===e?-1:0};function K(e,t){return(0,T.oA)(e.map(t))}function W(e,t,n,r){const i=(e,t)=>{if(0===e.length)return(0,T.oA)(t.map((e=>(0,z.G)({1:e[1],2:n(z.YP,(0,z.G)(e[2]))}))));if(0===t.length)return(0,T.oA)(e.map((e=>(0,z.G)({1:e[1],2:n((0,z.G)(e[2]),z.YP)}))));if(e.length>0&&t.length>0&&(0,L.lt)(r)(e[0][1],t[0][1])){const[r,...o]=e,s=r[1],a=r[2];return(0,T.Ce)({1:s,2:n((0,z.G)(a),z.YP)})(i(o,t))}if(e.length>0&&t.length>0&&(0,L.gt)(r)(e[0][1],t[0][1])){const[r,...o]=t,s=r[1],a=r[2];return(0,T.Ce)({1:s,2:n(z.YP,(0,z.G)(a))})(i(e,o))}if(e.length>0&&t.length>0){const[r,...o]=e,[s,...a]=t,c=r[1],u=r[2],l=s[2];return(0,T.Ce)({1:c,2:n((0,z.G)(u),(0,z.G)(l))})(i(o,a))}throw new Error("Non exhaustive match in mapOption2")},o=(0,L.Uz)((e=>e[1]))(r),s=(e=>{const t=K(e,(e=>(0,z.pC)(e[2])?(0,z.G)({1:e[1],2:e[2].value}):z.YP));return 0===t.length?z.YP:(0,z.G)(t)})(i((0,T.DY)(o)([...e].map((e=>({1:e[0],2:e[1]})))),(0,T.DY)(o)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,z.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function $(e,t,n,r){const i=(0,L.Uz)((e=>e[0]))(r),o=(0,T.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,a.nM)(e)){const r=n(t[1],e.left);return(0,z.pC)(r)?(0,a.t$)(r.value):(0,a.F2)(t[0])}return e}),(0,a.t$)(e));return(0,z.Uo)(o)}function F(e,t){return new Map([...e].map(t))}function H(e,t){return new Map([...e].filter(t))}var Y=n(4268),J=n(4011);function Q(e){return(0,z.UI)(ne)(function(e){switch(e.state.kind){case"top":return(0,z.G)(u(e.state.error));case"bottom":return z.YP;case"inner":return function(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return V(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,z.G)(d(function(e,t){const n=(0,z.UI)((e=>(0,T.Ce)(e)(t)))(e);return(0,z.fS)((()=>t))(n)}((0,z.UI)((e=>u(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return u(e.error);case"inner":return l(e.a)}},n=e=>K([Z,X,e=>(0,O.zG)(e,te,m,z.G)],(t=>t(e))),r=e=>K([Z,ee,e=>(0,O.zG)(e,te,(e=>F(e,(([e,t])=>[JSON.stringify(e),t]))),m,z.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return r(e.group)}}(e.payload)))):z.YP}(e.state.a)}}(e))}function V(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,z.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,z.pC)(e.limit)}}function Z(e){switch(e.kind){case"unbounded":return z.YP;case"windowed":return(0,z.G)(u("w"));case"countLimit":return(0,z.G)(u(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,z.G)(u(1===e.n?"u":`u${e.n}`))}}function X(e){switch(e.kind){case"unbounded":return z.YP;case"windowed":return(0,z.G)(u((0,z.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,z.G)(u((0,z.pC)(e.limit)?e.limit.value:""))}}function ee(e){switch(e.kind){case"unbounded":return z.YP;case"windowed":return(0,z.pC)(e.key)?(0,z.G)(l(e.key.value)):(0,z.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,z.pC)(e.limit)?(0,z.G)(l(e.limit.value)):(0,z.G)({kind:"null",value:null})}}function te(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function ne(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?ne(e.value[0]):d(e.value.map(ne));case"object":return(0,O.zG)(H(e.value,(([e,t])=>"null"!==t.kind)),(e=>F(e,(e=>[e[0],ne(e[1])]))),m);default:return e}}function re(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return z.YP;const[t,n,r,i]=e;if("string"===t.kind&&"string"===n.kind&&"object"===i.kind){const e=(0,z.DT)((e=>ie(e[1].value)&&oe(e[2].value)))({1:t,2:n});return(0,z.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:i.value})))(e)}return z.YP})(e);if((0,z.pC)(t)){const{prim:e,grp:n,cutoff:r,m:i}=t.value,o=se(r,i,ae(n));return"string"==typeof o?h(o):p(S(ce(e),o))}const n=(e=>{if(3!==e.length)return z.YP;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,z.DT)((e=>oe(e.value)))(t);return(0,z.UI)((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return z.YP})(e);if((0,z.pC)(n)){const{grp:e,cutoff:t,m:r}=n.value,i=se(t,r,ae(e));return"string"==typeof i?h(i):p(S(z.YP,i))}const r=(e=>{if(2!==e.length)return z.YP;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,z.DT)((e=>ie(e.value)))(t);return(0,z.UI)((e=>({prim:e.value,m:n.value})))(e)}return z.YP})(e);if((0,z.pC)(r)){const{prim:e,m:t}=r.value;return p(S(ce(e),k(w(t))))}const i=(e=>{if(1!==e.length)return z.YP;const[t]=e;return"object"===t.kind?(0,z.G)({m:t.value}):z.YP})(e);if((0,z.pC)(i)){const{m:e}=i.value;return p(S(z.YP,k(w(e))))}const o=(e=>{if(e.length<1)return z.YP;const[t,...n]=e;if("string"===t.kind){const e=(0,z.DT)((e=>ie(e.value)))(t);return(0,z.UI)((e=>({prim:e.value,rest:n})))(e)}return z.YP})(e);if((0,z.pC)(o)){const{prim:e,rest:t}=o.value;return p(S(ce(e),le(t)))}return p(S(z.YP,le(e)))},n=e=>{switch(e.kind){case"array":return(0,T.tS)(n)(e.value);default:return[e]}};switch(e.kind){case"null":return q({kind:"bottom"});default:return q(t(n(e)))}}function ie(e){const t=e.split("");switch(!0){case 0===t.length:return!1;default:{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}}function oe(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function se(e,t,n){switch(e.kind){case"string":return k(n({1:(0,z.G)(e.value),2:t}));case"number":case"null":return v(n({1:"null"===e.kind?z.YP:(0,z.G)(e.value),2:H(F(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function ae(e){const t=e=>t=>b(t[2],t[1],e),n=e=>t=>y(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>_(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function ce(e){return(0,z.UI)(f)((0,G.nI)(ue(e,(e=>{const t=e.split("");if(0===t.length)return z.YP;const[n,...r]=t,i=(e=>{switch(e){case"p":return(0,z.G)("add");case"m":return(0,z.G)("mul");case"v":return(0,z.G)("max");case"n":return(0,z.G)("min");default:return z.YP}})(n);return(0,z.UI)((e=>{const{init:t,rest:n}=(0,T.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(i)}))))}function ue(e,t){const n=t(e);return(0,z.fS)((()=>[]))((0,z.UI)((e=>[e[1]].concat(ue(e[2],t))))(n))}function le(e){return E(e.map(de))}function de(e){switch(e.kind){case"number":return p(e.value);case"string":return h(e.value);case"null":return{kind:"bottom"};case"object":return h("{object}");case"array":return h("{array}")}}const me={strategy:(e,t,n)=>r=>{if((0,z.Wi)(n))return t;if("delta"===e&&(0,z.Wi)(t))return z.YP;if((0,z.Wi)(t))return n;if((0,z.pC)(t)&&(0,z.pC)(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,i,o)=>{const s=(0,T.pR)(N(o));if("append"===e&&"add"===t)return(0,T.yL)(n,r,ye("append",i.plus));if("append"===e&&"mul"===t)return(0,T.yL)(n,r,ye("append",i.times));if("append"===e&&"max"===t)return(0,L.Fp)(s)(n,r);if("join"===e&&"add"===t)return(0,T.yL)(n,r,ye("join",(0,L.Fp)(o)));if("join"===e&&"mul"===t)return(0,T.yL)(n,r,ye("join",(0,L.Fp)(o)));if("join"===e&&"max"===t)return(0,L.Fp)(s)(n,r);if("min"===t)return me.operation(e,"max",n,r,i,function(e){return(0,L.Zt)(((t,n)=>B(e.compare(t,n))))}(o));if("delta"===e&&"max"===t)return(0,L.gt)(s)(n,r)?n:r.map(g);if("delta"===e)return(0,T.yL)(n,r,((e,t)=>(0,L.gt)(N(o))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return(0,L.gt)(R.Df)(n.error,r.error)?h(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return h((0,L.Fp)(R.Df)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},fe={plus:(e,t)=>e+t,times:(e,t)=>e*t};function ge(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,o=t.group;return(0,z.fS)(g)((0,z.UI)((e=>p(w(e))))(W(i,o,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,o=e.group,s=t.key,a=t.group,c=(0,L.Fp)((0,z.pR)(r))(i,s);return(0,z.fS)(g)((0,z.UI)((e=>p(_(e,c))))(W(o,a,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=(0,L.Fp)((0,z.pR)(r))(o,a);return(0,z.fS)(g)((0,z.UI)((e=>p(y(e,u,i))))(W(s,c,n,r)))}return h("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=(0,L.Fp)((0,z.pR)(r))(o,a);return(0,z.fS)(g)((0,z.UI)((e=>p(b(e,u,i))))(W(s,c,n,r)))}return h("Non matching counts")}return h("Non matching group types")}function pe(e,t,n){return(0,z.fS)(c)(he(e,z.YP)(t,n))}function he(e,t){const n=t=>(n,r)=>me.strategy(e,n,r)(he(e,t)),r=(t,r,i)=>{if("stringGroup"===r.kind&&"stringGroup"===i.kind){const e=ge(r.group,i.group,n(t),R.Df);return U(e,(e=>k(_e(e,R.Df))))}if("numberGroup"===r.kind&&"numberGroup"===i.kind){const e=ge(r.group,i.group,n(t),J.Df);return U(e,(e=>v(_e(e,J.Df))))}if("tuple"===r.kind&&"tuple"===i.kind){const n=(0,z.pC)(t)?t.value:[];return p(E(function(e,t,n,r,i,o){const s=(e,t)=>({1:(0,T.ke)(e)(t).concat((0,T.KB)(Math.max(0,e-t.length),g)),2:(0,T.md)(e)(t)}),a=(t,n,r)=>{if(0===t.length)return me.operation(e,"max",n,r,i,o);if(t.length>0){const[c,...u]=t,l=s(c[2],n),d=l[1],m=l[2],f=s(c[2],r),g=f[1],p=f[2];return me.operation(e,c[1],d,g,i,o).concat(a(u,m,p))}throw new Error("Non exhaustive match in recurse")};return(0,T.GY)((0,T.Qp)((e=>"bottom"===e.kind))((0,T.GY)(a(t,n,r))))}(e,n,r.tuple,i.tuple,fe,J.Df)))}throw new Error(`Non matching payload. Got ${r.kind} and ${i.kind}`)},i=(e,n)=>{if((0,z.Eh)((0,G.Eh)((0,Y.n_)({1:R.Eq,2:J.Eq}))).equals(e.commands,n.commands)){const i=(0,z.Wi)(e.commands)?t:e.commands,o=r(i,e.payload,n.payload);return U(o,(t=>S(e.commands,t)))}throw new Error(`Non matching primitive strings. Got ${JSON.stringify(e)} and ${JSON.stringify(n)}`)};return(t,n)=>Q(q(me.extend(e,i,re(t).state,re(n).state)))}function we(e,t,n){const r=(0,z.UI)((t=>H(e,(([e,r])=>(0,L.gf)(n)(e,t)))))(t);return(0,z.fS)((()=>e))(r)}function _e(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,z.Wi)(e.key)?e:_(we(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,i=e.group,o=$(r,i,((e,t)=>t<=1?z.YP:(0,z.G)(t-1)),t),s=(0,L.Fp)((0,z.pR)(t))(n,o);return y(we(i,s,t),s,r)}case"uniqueLimit":{const n=e.limit,r=e.n,i=e.group,o=(e,t)=>{switch(e.kind){case"object":{const n=[...e.value.keys(),...t.keys()],i=new Set(n);return i.size>=r?z.YP:(0,z.G)(i)}default:return z.YP}},s=$(new Set,i,o,t),a=(0,L.Fp)((0,z.pR)(t))(n,s);return b(we(i,a,t),a,r)}}}function ye(e,t){return(n,r)=>me.extend(e,((e,n)=>p(t(e,n))),n,r)}var be=n(7121);class ve{constructor(){this.queryCodesAsList=[],this.queryCodesAsMap={}}has(e){return e in this.queryCodesAsMap}add(e){return(0,O.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,O.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getStdAsList(){return this.queryCodesAsList.filter((e=>e>=1e7))}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((([e,r])=>{const i=parseInt(e),o=(null==r?void 0:r.result)||{result:!1},s=!0===(null==o?void 0:o.result)&&!(i in this.queryCodesAsMap),a=!1===(null==o?void 0:o.result)&&i in this.queryCodesAsMap;s?t.push(i):a&&n.push(i)})),{entered:t,left:n}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}var ke=n(5506),Ee=n(7183),qe=n(7545),Se=n(998);function Te(){return(0,Ee.h)(new s)}class Oe{constructor(e,t,n,i,o,s){this.logger=e,this._internals=t,this.permutive=n,this.queryWorker=i,this.transitionDebounceTime=o,this.transitionDebounceMaxTime=s,this.CACHED_SEGMENTS_STORAGE_KEY="_psegs",this.queryMetadata=(0,r.PM)({7809:"0c8b70cdb7",7827:"c4c50cfd83",7834:"20d9c16a82",7835:"ac319152cc",7836:"424a635541",7838:"e29f176f7b",7843:"0abf02cfc7",7844:"be8a9bae4f",7878:"f2aaee1205",7880:"717a6b45b3",7881:"a60c6b29df",7894:"1bffeb3477",7925:"39ad13166c",7927:"55013bbd04",7981:"ad94911d29",8015:"f67718459f",8301:"0c69eb38e0",8421:"3813f095c0",8500:"b35ce275e4",8501:"49a20952d7",8502:"fc9446fcb9",8679:"424c9c287a",9574:"c6e3922cd5",9697:"a14739ecdd",9702:"25d491145f",9704:"440b3eb82e",9705:"7ada3fec83",9812:"21a8a2546a",9831:"e8d96d95ff",9835:"5dc81b69aa",9837:"1b8afdec22",10065:"af74aa9437",10115:"3169d16b17",10116:"1bc53f4cd6",10117:"e084e09121",10179:"573c37ae98",10319:"a2c710a8b1",10339:"177c02719a",10428:"5f67debed9",10463:"23d5965bd7",10622:"582169f0f2",10790:"818c4a4cee",10798:"d524025abd",10852:"558236f618",10853:"1ed51fbdf9",10854:"83436be25c",10855:"b21a1328f2",10856:"a48dbb517d",10857:"4c9bea17f0",10858:"0bc6c0f5bb",10859:"aae15174fd",10860:"39fd3182ff",10861:"ff4141612d",10862:"cd3d474bb9",10863:"eaea8d4150",10864:"91c56521ed",10865:"67027d49f5",10866:"3c9f503b5b",10867:"8cc466146b",10868:"9d132cac28",10869:"b17b71daa7",10870:"0338020d5e",11122:"bcd36340ef",11200:"5d21d08b48",11201:"2887af6c57",11202:"db8eac6d08",11893:"06a56db132",11903:"0f0af83e4b",11904:"690a145780",12008:"bbc5fc6a38",12198:"d6d25ed62c",12199:"e8250c8897",12200:"49d95f4758",12381:"83436be25c",12475:"190e00793a",12668:"871294e9be",13108:"c303063a0a",13132:"667678da17",13133:"3bc75512b8",13183:"df3175455d",13225:"64671d52dc",13444:"a0b1e4511f",13445:"25b32e17c9",13446:"b9295c640a",13448:"6b1eeec91d",13449:"73fab045f6",13520:"22215388a0",13640:"4b66b22b44",13769:"9e28027d6a",13825:"d56f7a5456",13826:"072c7bb173",13827:"c2efc62eaf",13828:"3f2a906cd4",13829:"796a56ec6a",13830:"d785351b40",13831:"19a730d5f2",13832:"6d2787d327",13833:"4d2b598faf",13852:"d4588bb535",13855:"8d661148fc",13856:"caab8a7dbd",13857:"6e98532ec3",14081:"5b24c77cc5",14282:"65011f1c1e",14371:"0f5797071e",14577:"2e6225c09f",14748:"2321bc3d67",14808:"6bfd5b8f26",14812:"8573db81f8",14816:"3f3d74f0c1",14823:"abd941c6d7",14830:"d4de7ebf2a",14831:"4fe6688899",14848:"d19868d715",14851:"cc9df07ac7",14853:"93922b6649",14858:"85332ae5e6",14867:"73aa2e05f3",14868:"680b5de3df",14918:"1c305d5839",14919:"b0d203e2e6",14921:"e272154bf4",14922:"5a78eb5c2a",14923:"d9b65faecb",14924:"aa832f96db",15072:"b16c99cfd5",15073:"fa6396e0d4",16243:"a85266c7ef",17295:"2bc277af9b",17299:"ecedc4e458",17301:"59614b0740",18029:"e5febe963e",18570:"f919dec8ab",19810:"8bbe48bdfa",19814:"ff33e76341",19815:"362c849340",20177:"bd27d8fcc8",20296:"8bb8de439d",20463:"d155b56ab3",20478:"715c04b0cd",20553:"16d112f498",20707:"339f4f2177",21006:"f5617d4955",21068:"8bb613f9ed",21290:"7491ea155b",21542:"c3d98ea6fc",21794:"4bca7eab5d",22101:"90bd05eb4f",22156:"319d4faadb",22629:"2189ce0a04",22851:"659c914203",22995:"824026875e",23441:"5cd6db0ea7",23694:"ce5a97a7b6",24326:"c8a05af829",24408:"abd4dfaa16",25102:"13ca328eee",25111:"9874cb240d",25178:"d87e9488d4",27457:"0277837843",27709:"cfdcf0e578",27712:"3dd05f058a",27713:"c24263ca9f",27734:"9d4d8e970b",28133:"bb98b273af",28160:"7799ea78ac",28161:"659d10a72b",28391:"8479311e32",28392:"51d1e9cab9",28415:"6ceff3c27e",28517:"2919b36b93",28518:"5065978322",28519:"7167acfdf6",28520:"1839d840df",28538:"0c1e978936",28540:"f129216e83",28541:"378b77ebc8",28566:"3e6b2a5d84",29195:"346fe6107f",29219:"64c33c497b",29223:"b5ae1327ff",29564:"898dc9f5a2",29567:"c74aa15543",29568:"5801f7dead",29569:"c98e94b49e",29571:"6b0620432f",29572:"79fff59697",29573:"a9e1e18313",29574:"b6e0993561",29575:"9906eff264",29576:"cffc835354",29579:"da27411d66",29581:"565cc1c977",29582:"200f02b472",29585:"2c728e1a6b",29590:"9452c351cd",29591:"d146710f38",29592:"fe59168a81",29593:"c352970d3d",29594:"34a2a2c2e7",29595:"7913ef5244",29596:"5f229a5b1d",29598:"3abf365d43",29599:"0c73fcaf7d",29694:"04fc96848e",30144:"952673a3ce",30164:"3dead6eceb",30405:"1fc6080b39",30406:"e4013ce307",30407:"b7f88ee31d",30408:"9764f7f332",30409:"2dffb558f6",30410:"cbab76308b",30411:"cbab76308b",30412:"257d5b8899",30413:"0a2c477d25",30414:"a1dec31895",30415:"91c9afd948",30416:"ed4845a2f1",30417:"2546c41cc0",30418:"966629589b",31818:"8f17fab20b",32319:"1e1cb0d8c0",32321:"ca60f440d5",32324:"32e95eb132",32333:"cbe14ba5f3",32334:"ba68239c20",32336:"f2f864fdba",32337:"678c39457d",32338:"e36d6dfd31",32339:"d2a8cf4bb1",32340:"25203a123c",32341:"62e74bb3eb",32344:"f4282db095",32347:"43e170c24d",32348:"c12e9150f0",32627:"e0a8b88dbb",33624:"1ccf867e57",34114:"35ce6673c4",34125:"4f4f0a0662",34165:"23ce547a52",39266:"6535b58795",40114:"4d15291297",40115:"4642d18db6",40428:"7986400a10",40462:"39304175bd",40928:"1e2e024aed",40973:"dc303765f2",42300:"fb8a9b0197",42301:"22473d21e1",42302:"31ad8d8b9a",42303:"1838a76603",42307:"afdab489b4",42308:"366ac26363",43608:"d72723b499",46823:"765addcca2",47117:"2b41a41679",47121:"13b3f4ead9",47127:"c237d5e693",47968:"503b88057b",49915:"cd987aed3a",50539:"46c3c9fab7",53156:"ccca6a13c4",54871:"507fcf66a7",62199:"ad08b999e0",62273:"930c1628c8",62592:"4ab1a28af4",62593:"9d1cbac2d0",62613:"1387489364",62627:"3b98780d43",63018:"18e9344446",65170:"9e7dcf6e77",71851:"59c0d26b3f",71852:"dc09b599f2",73622:"7e700bcc65",74544:"c4875d6060",75203:"c0b4b9329b",76178:"b11e82c0ae",77115:"fbc367b64d",1e7:"ab2a79b4e1",10000001:"ea7eca3b49",10000002:"7a0b76bb2f",10000003:"49e502122c",10000004:"bc8d7e3d5e",10000005:"377db020e8",10000006:"6e71b87352",10000007:"12ed0bff2a",10000008:"4a72840eba",10000010:"a4cefa7f58",10000011:"aa7075e35b",10000012:"1ae8bddb93",10000013:"1e8886ad72",10000014:"f516ad362e",10000015:"9867900f2f",10000016:"3a6681d95b",10000017:"38ea08fad7",10000018:"12ed0bff2a",10000019:"e109f9b360",10000020:"90a178ea71",10000021:"04bbf8e635",10000022:"4734ac38ff",10000023:"f8f03f52a4",10000024:"3dd0f4235c",10000025:"9674e8f207",10000026:"6d37ba6b9a",10000035:"216792eaef",10000036:"d36ef645a5",10000037:"adf0bd9d7d",10000038:"ee56f69340",10000039:"9b0eb48861",10000040:"de880ed625",10000041:"5de582afdd",10000042:"1ccab119ee",10000043:"3cde49fc7f",10000044:"204ea1bd83",10000045:"87b257dec6",10000046:"5579a14726",10000047:"aca78f9e2e",10000048:"fa2ea1e2fa",10000049:"074fd09f55",10000050:"6f96f5278d",10000051:"d7f4837226",10000052:"629e4756ae",10000053:"cd9d4baf1b",10000054:"897ad1fa31",10000056:"36169adc34",10000058:"91ed3d5df9",10000059:"9975f2d18a",10000060:"291bb4c201",10000062:"8af22f787c",10000063:"13625d9512",10000064:"aa269c3192",10000065:"711a803835",10000066:"94d62b32e3",10000067:"a90790be86",10000068:"840b4c697a",10000069:"5b811cacf3",10000070:"26f90895bf",10000071:"ecfb5c1cab",10000072:"49ab120d1d",10000073:"8816deadae",10000074:"5c7a1ac24a",10000075:"0dc58fe713",10000076:"c791f64ecd",10000077:"fb2601505c",10000078:"ec0d63e687",10000079:"9f1a1f7510",10000080:"e51622030c",10000081:"c7a8cae6d0",10000082:"8ce761d02d",10000083:"7b6a42ef76",10000084:"479977505c",10000085:"930fdc5c22",10000086:"39e47fa144",10000087:"4524f8a1c5",10000088:"49bc2becff",10000090:"be04a0b54e"},{1e7:"ab2a79b4e1",10000001:"ea7eca3b49",10000002:"7a0b76bb2f",10000003:"49e502122c",10000004:"bc8d7e3d5e",10000005:"377db020e8",10000006:"6e71b87352",10000007:"12ed0bff2a",10000008:"4a72840eba",10000010:"a4cefa7f58",10000011:"aa7075e35b",10000012:"1ae8bddb93",10000013:"1e8886ad72",10000014:"f516ad362e",10000015:"9867900f2f",10000016:"3a6681d95b",10000017:"38ea08fad7",10000018:"12ed0bff2a",10000019:"e109f9b360",10000020:"90a178ea71",10000021:"04bbf8e635",10000022:"4734ac38ff",10000023:"f8f03f52a4",10000024:"3dd0f4235c",10000025:"9674e8f207",10000026:"6d37ba6b9a",10000035:"216792eaef",10000036:"d36ef645a5",10000037:"adf0bd9d7d",10000038:"ee56f69340",10000039:"9b0eb48861",10000040:"de880ed625",10000041:"5de582afdd",10000042:"1ccab119ee",10000043:"3cde49fc7f",10000044:"204ea1bd83",10000045:"87b257dec6",10000046:"5579a14726",10000047:"aca78f9e2e",10000048:"fa2ea1e2fa",10000049:"074fd09f55",10000050:"6f96f5278d",10000051:"d7f4837226",10000052:"629e4756ae",10000053:"cd9d4baf1b",10000054:"897ad1fa31",10000056:"36169adc34",10000058:"91ed3d5df9",10000059:"9975f2d18a",10000060:"291bb4c201",10000062:"8af22f787c",10000063:"13625d9512",10000064:"aa269c3192",10000065:"711a803835",10000066:"94d62b32e3",10000067:"a90790be86",10000068:"840b4c697a",10000069:"5b811cacf3",10000070:"26f90895bf",10000071:"ecfb5c1cab",10000072:"49ab120d1d",10000073:"8816deadae",10000074:"5c7a1ac24a",10000075:"0dc58fe713",10000076:"c791f64ecd",10000077:"fb2601505c",10000078:"ec0d63e687",10000079:"9f1a1f7510",10000080:"e51622030c",10000081:"c7a8cae6d0",10000082:"8ce761d02d",10000083:"7b6a42ef76",10000084:"479977505c",10000085:"930fdc5c22",10000086:"39e47fa144",10000087:"4524f8a1c5",10000088:"49bc2becff",10000090:"be04a0b54e"}),this.socioDemoSegmentsConfig={10000029:{},10000030:{},10000031:{},10000032:{},10000033:{},10000034:{}},this.isWorkerReady=!1,this.extStateMap={},this.userSegments=new ve,this.segmentTransitionEdgeOnly=(new ke.A).getConfigByKey("web")("segment_transition_edge_only",!0),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.scheduler=new qe.b(this.transitionDebounceTime,this.transitionDebounceMaxTime);this.debouncedProcessTransitions=this.scheduler.scheduleAccumulated((e=>this.processImpl(e,!1)),{concat:(e,t)=>e.concat(t),empty:[]});const a=this._internals.getExternalData(this.CACHED_SEGMENTS_STORAGE_KEY),c=(JSON.parse(a)||[]).filter((e=>(0,be.UC)(e,this.queryMetadata,this.socioDemoSegmentsConfig)));this.userSegments.add(c);const u=this._internals.state.getPermutiveData("internal_query_states")||{},l=this._internals.state.getPermutiveData("external_query_states")||{},d=Object.keys(this.queryMetadata),m=Object.keys(u);this.hasNewOrModifiedQueries=d.length!==m.length||d.filter((e=>{var t;return this.queryMetadata[e]!==(null===(t=u[e])||void 0===t?void 0:t.checksum)})).length>0,e.log("QueryManager has new or modified queries",this.hasNewOrModifiedQueries);const f=this.hasNewOrModifiedQueries?(0,r.fl)(u,(e=>{var t;return(null===(t=u[e])||void 0===t?void 0:t.checksum)===this.queryMetadata[e]})):u;this.extStateMap=this.hasNewOrModifiedQueries?(0,O.zG)((0,r.fl)(l,(e=>e in f)),(e=>(this._internals.state.setPermutiveData("external_query_states",e),e))):l,this.stateMap={value:f,promise:Promise.resolve(f)};this._internals.state.getPermutiveData("query_states")&&this._internals.state.setPermutiveData("query_states",null)}bootstrap(e){const t=(0,Se.G)("worker_bootstrap");return this.postMessage((t=>this.queryWorker.postMessage({type:"bootstrap",payload:[this.queryMetadata,this.extStateMap,{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this._internals.sessionManager.getSessionId(),viewId:this._internals.state.viewId,lookalikeModels:{}},e],stateMap:t}))).then((e=>(t.finish(),e)))}updateEnvironment(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateEnvironment",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}process(e,t){return(0,be.AG)(e)?this.debouncedProcessTransitions([e]):this.processImpl([e],t)}updateExternalState(e){const t=(0,r.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,z.Uo)(P(t[n])):z.YP})),n=(0,r.b0)(this.extStateMap,((e,t)=>(0,z.Uo)(P(t)))),i=(e,t)=>(0,O.zG)((0,z.Y3)((()=>pe("join",e,t))),(0,z.fS)((()=>(this._internals.network.error(`Failed to join external state. Had ${JSON.stringify(t)}, received ${JSON.stringify(e)}}`,this._internals.state.userId),t)))),o=(0,r.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,z.G)(x(i(t,n[e]))):(0,z.G)(x(t))));this._internals.state.setPermutiveData("external_query_states",o),this.extStateMap=o;return this.postMessage((e=>this.queryWorker.postMessage({type:"updateExternalState",payload:[this.queryMetadata,this.extStateMap],stateMap:e})))}trackCloudSegmentResults(e){const{entered:t,left:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n);(t.length>0||n.length>0)&&this._internals.messages.emit("permutive:segments:updated")}processImpl(e,t,n){const r=t=>({payload:(0,O.bc)(this.queryMetadata,this.extStateMap,e),stateMap:t});return this.postMessage(!0===n?e=>this.queryWorker.postMessage(Object.assign({type:"processTransitions"},r(e))):e=>this.queryWorker.postMessage(Object.assign({type:"process"},r(e)))).then((n=>(0,O.zG)(t?this.setAsRealTimeifNeeded(e):(0,O.Q1)(),(e=>n))))}postMessage(e){return new Promise((t=>{this.stateMap.promise=this.stateMap.promise.then(e).then((({diff:e,errors:n})=>(0,O.zG)(t(e),(t=>this.onStateChange(e,n))))).catch((e=>(0,O.zG)(this._internals.network.error(`Error during query execution. Got ${e}`,this._internals.state.userId),(e=>t({})),(e=>this.stateMap.value))))}))}onStateChange(e,t){return(0,O.zG)(t.length>0?this._internals.network.error(`QL error(s). Got ${t.join("; ")}`,this._internals.state.userId):{},(t=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?this.onStateChangeReady(e):e))}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this._internals.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this._internals.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){this.userSegments.add(e),this.userSegments.remove(t),this._internals.setExternalData(this.CACHED_SEGMENTS_STORAGE_KEY,JSON.stringify(this.userSegments.getAllAsList()))}onStateChangeReady(e){const{entered:t,left:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logger.log("Writing new segment and query state cache",e),this._internals.state.setPermutiveData("internal_query_states",e);const r=t.length>0||n.length>0;return(0,O.zG)(r,(e=>e?this._internals.messages.emit("permutive:segments:updated"):{}),(t=>e))}trackTransition(e,t){const n=this.segmentTransitionEdgeOnly?this._internals.customProperties.getCustomProps():{},r=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?this.segmentEntryQueryCodes.add(t):this.segmentExitQueryCodes.add(t),this.permutive.track(e?"SegmentEntry":"SegmentExit",r)}setAsRealTimeifNeeded(e){return!this._internals.isRealtime&&e.filter((e=>"Pageview"===e.name)).length>0?Promise.resolve(this._internals.setAsRealtime()):Promise.resolve()}reset(){this._internals.removeExternalData(this.CACHED_SEGMENTS_STORAGE_KEY),this._internals.state.setPermutiveData("internal_query_states",{}),this._internals.state.setPermutiveData("external_query_states",{}),this.userSegments=new ve,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this._internals.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}}},7121:(e,t,n)=>{n.d(t,{UC:()=>o,Yh:()=>s,AG:()=>a});var r=n(5090),i=n(6567);const o=(e,t,n={})=>e in t||e in n,s=e=>(0,r.b0)(e,((e,t)=>t.state?(0,i.G)({[t.checksum]:t.state}):i.YP));function a(e){return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==e.properties.segment_number}},7738:(e,t,n)=>{n.d(t,{L:()=>r});class r{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},8649:(e,t,n)=>{n.d(t,{N:()=>g,e:()=>m});var r=n(70),i=n(5090),o=n(7121),s=n(3735),a=n(7545),c=n(477),u=n.n(c);function l(){return u()('/*! permutive-javascript-sdk v15.3.1 (web) (built 2021-09-13T06:13:40.299Z) */(()=>{"use strict";function n(n){return n}function r(n){return function(){return n}}function t(n,r,t,e,u,i,o,c,a,f,s,l,d,p,m,g,v,h,k,w){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));case 10:return f(a(c(o(i(u(e(t(r(n)))))))));case 11:return s(f(a(c(o(i(u(e(t(r(n))))))))));case 12:return l(s(f(a(c(o(i(u(e(t(r(n)))))))))));case 13:return d(l(s(f(a(c(o(i(u(e(t(r(n))))))))))));case 14:return p(d(l(s(f(a(c(o(i(u(e(t(r(n)))))))))))));case 15:return m(p(d(l(s(f(a(c(o(i(u(e(t(r(n))))))))))))));case 16:return g(m(p(d(l(s(f(a(c(o(i(u(e(t(r(n)))))))))))))));case 17:return v(g(m(p(d(l(s(f(a(c(o(i(u(e(t(r(n))))))))))))))));case 18:return h(v(g(m(p(d(l(s(f(a(c(o(i(u(e(t(r(n)))))))))))))))));case 19:return k(h(v(g(m(p(d(l(s(f(a(c(o(i(u(e(t(r(n))))))))))))))))));case 20:return w(k(h(v(g(m(p(d(l(s(f(a(c(o(i(u(e(t(r(n)))))))))))))))))))}}function e(n){return function(r){return function(t){return n.map(t,(function(n){return n(r)}))}}}var u=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},i=function(n){return"Some"===n._tag},o={_tag:"None"},c=function(n){return{_tag:"Some",value:n}},a=function(n){return"Left"===n._tag},f=[],s=(Object.prototype.hasOwnProperty,function(n){return u([n[0]],n.slice(1))}),l=function(n){return{_tag:"Left",left:n}},d=function(n){return{_tag:"Right",right:n}},p=function(n,r){return t(n,v(r))},m=function(n,r){return t(n,w(r))},g="Either",v=function(n){return function(r){return b(r)?r:d(n(r.right))}},h={URI:g,map:p},k=d,w=function(n){return function(r){return b(r)?r:b(n)?n:d(r.right(n.right))}},y={URI:g,map:p,ap:m,of:k},b=a,x=function(n){return function(r){return b(r)?n(r.left):r.right}};e(h);k(f);const j=()=>({kind:"null",value:null}),N=n=>({kind:"string",value:n}),q=n=>({kind:"number",value:n}),L=n=>({kind:"array",value:n}),M=n=>({kind:"object",value:n}),O=n=>n,R=()=>({kind:"bottom"}),S=n=>({kind:"inner",a:n}),I=n=>({kind:"top",error:n}),E=n=>({kind:"unbounded",group:n}),A=(n,r)=>({kind:"windowed",key:r,group:n}),G=(n,r,t)=>({kind:"countLimit",n:t,limit:r,group:n}),U=(n,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:n}),_=n=>({kind:"numberGroup",group:n}),$=n=>({kind:"stringGroup",group:n}),C=n=>({kind:"tuple",tuple:n}),J=n=>({state:n}),z=(n,r)=>({commands:n,payload:r});var F=function(n){return{equals:function(r,t){return r===t||n(r,t)}}},P=function(n){return F((function(r,t){for(var e in n)if(!n[e].equals(r[e],t[e]))return!1;return!0}))},W=function(n){return function(r,t){return r===t||0===n(r,t)}},B=function(n){return{equals:W(n),compare:function(r,t){return r===t?0:n(r,t)}}},T=function(n){return function(r){return B((function(t,e){return r.compare(n(t),n(e))}))}},D=(r(0),function(n){return function(r,t){return-1===n.compare(r,t)}}),H=function(n){return function(r,t){return 1===n.compare(r,t)}},K=function(n){return function(r,t){return r===t||n.compare(r,t)>-1?r:t}};var Q;Q=void 0;var V=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},X=f,Y=function(n){return function(r){return V(V([],r),[n])}},Z=Y;var nn=function(n,r){return t(n,rn(r))},rn=function(n){return tn((function(r,t){return n(t)}))},tn=function(n){return function(r){for(var t=[n(0,cn(r))],e=1;e<r.length;e++)t.push(n(e,r[e]));return t}},en=function(n){return n[0]},un="ReadonlyNonEmptyArray",on={URI:un,map:nn},cn=(e(on),en);var an=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},fn=function(n){return n.length>0},sn=function(n,r){return n<0||n>=r.length},ln=function(n){return function(r){return an([n],r)}},dn=ln,pn=function(n){return function(r){return an(an([],r),[n])}},mn=pn,gn=s,vn=function(n){return fn(n)?c(n):o},hn=function(n){return function(r){for(var t=Math.max(0,Math.floor(r)),e=[n(0)],u=1;u<t;u++)e.push(n(u));return e}};var kn=gn;var wn=function(n){return function(r){var e=Math.max(1,n);return e>=r.length?[kn(r),[]]:[t(r.slice(1,e),dn(Ln(r))),r.slice(e)]}},yn=function(n,r){return t(n,bn(r))},bn=function(n){return xn((function(r,t){return n(t)}))},xn=function(n){return function(r){for(var t=[n(0,Ln(r))],e=1;e<r.length;e++)t.push(n(e,r[e]));return t}},jn="NonEmptyArray",Nn=function(n){return F((function(r,t){return r.length===t.length&&r.every((function(r,e){return n.equals(r,t[e])}))}))},qn={URI:jn,map:yn},Ln=(e(qn),cn);var Mn={equals:function(n,r){return n===r}},On={equals:Mn.equals,compare:function(n,r){return n<r?-1:n>r?1:0}},Rn=function(n,r){return{left:n,right:r}},Sn=function(n){return function(r){return Rn(En(r),n(An(r)))}},In="Separated",En=(e({URI:In,map:function(n,r){return t(n,Sn(r))}}),function(n){return n.left}),An=function(n){return n.right};function Gn(n,r){return function(t){var e=n.traverse(t);return function(n,u){return t.map(e(n,u),r.separate)}}}function Un(n,r){return function(t){var e=n.traverse(t);return function(n,u){return t.map(e(n,u),r.compact)}}}var _n=Z;var $n=function(n,r){return t(n,Wn(r))},Cn=function(n,r,e){return t(n,Qn(r,e))},Jn=function(n){var r=Vn(n);return function(n,e){return t(n,r(e))}},zn=function(n,r,e){return t(n,Yn(r,e))},Fn=function(n){var r=nr(n);return function(n,e){return t(n,r(e))}},Pn=function(){return cr},Wn=function(n){return function(r){return r.map((function(r){return n(r)}))}},Bn=function(n){for(var r=[],t=[],e=0,u=n;e<u.length;e++){var i=u[e];"Left"===i._tag?r.push(i.left):t.push(i.right)}return Rn(r,t)},Tn=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);i(u)&&t.push(u.value)}return t}},Dn=function(n){return Tn((function(r,t){return n(t)}))},Hn=Dn(n),Kn=function(n){return function(r){return function(t){return t.reduce((function(t,e,u){return n.concat(t,r(u,e))}),n.empty)}}},Qn=function(n,r){return Xn(n,(function(n,t,e){return r(t,e)}))},Vn=function(n){var r=Kn(n);return function(n){return r((function(r,t){return n(t)}))}},Xn=function(n,r){return function(t){for(var e=t.length,u=n,i=0;i<e;i++)u=r(i,u,t[i]);return u}},Yn=function(n,r){return Zn(n,(function(n,t,e){return r(t,e)}))},Zn=function(n,r){return function(t){return t.reduceRight((function(n,t,e){return r(e,t,n)}),n)}},nr=function(n){var r=tr(n);return function(n){return r((function(r,t){return n(t)}))}},rr=function(n){return function(r){return Cn(r,n.of(Pn()),(function(r,e){return n.ap(n.map(r,(function(n){return function(r){return t(n,_n(r))}})),e)}))}},tr=function(n){return function(r){return Xn(n.of(Pn()),(function(e,u,i){return n.ap(n.map(u,(function(n){return function(r){return t(n,_n(r))}})),r(e,i))}))}},er="ReadonlyArray",ur={URI:er,map:$n},ir=(e(ur),{URI:er,compact:Hn,separate:Bn}),or={URI:er,map:$n,reduce:Cn,foldMap:Jn,reduceRight:zn,traverse:Fn,sequence:rr},cr=(Un(or,ir),Gn(or,ir),X),ar=function(n){return 0===n.length},fr=fn,sr=dn,lr=mn,dr=function(n,r){return n<=0?[]:hn(r)(n)};var pr=sn,mr=function(n){return function(r){return pr(n,r)?hr(r):r.slice(0,n)}};var gr=function(n,r){for(var t=n.length,e=0;e<t&&r(n[e]);e++);return e};var vr=function(n){return function(r){return n<=0||ar(r)?hr(r):n>=r.length?[]:r.slice(n,r.length)}};var hr=function(n){return n.slice()},kr=function(n){return ar(n)?[]:n.slice().reverse()},wr=function(n){return function(r){return r.length<=1?hr(r):r.slice().sort(n.compare)}},yr=function(n,r,t){for(var e=[],u=Math.min(n.length,r.length),i=0;i<u;i++)e[i]=t(n[i],r[i]);return e};var br=function(n){return function(r){return n>=1&&fr(r)?wn(n)(r):ar(r)?[hr(r),[]]:[[],hr(r)]}};var xr=function(n,r){return t(n,Mr(r))},jr=function(n,r,e){return t(n,Gr(r,e))},Nr=function(n){var r=Ar(n);return function(n,e){return t(n,r(e))}},qr=function(n,r,e){return t(n,_r(r,e))},Lr=function(n){var r=$r(n);return function(n,e){return t(n,r(e))}},Mr=function(n){return function(r){return r.map((function(r){return n(r)}))}},Or=function(n){return function(r){return t(r,function(n){return function(r){for(var t=[],e=0;e<r.length;e++)t.push.apply(t,n(e,r[e]));return t}}((function(r,t){return n(t)})))}},Rr=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);i(u)&&t.push(u.value)}return t}},Sr=function(n){return Rr((function(r,t){return n(t)}))},Ir=Sr(n),Er=function(n){for(var r=[],t=[],e=0,u=n;e<u.length;e++){var i=u[e];"Left"===i._tag?r.push(i.left):t.push(i.right)}return Rn(r,t)},Ar=Vn,Gr=Qn,Ur=Xn,_r=Yn,$r=function(n){var r=Jr(n);return function(n){return r((function(r,t){return n(t)}))}},Cr=function(n){return function(r){return jr(r,n.of([]),(function(r,e){return n.ap(n.map(r,(function(n){return function(r){return t(n,lr(r))}})),e)}))}},Jr=function(n){return function(r){return Ur(n.of([]),(function(e,u,i){return n.ap(n.map(u,(function(n){return function(r){return t(n,lr(r))}})),r(e,i))}))}},zr="Array",Fr=function(n){return B((function(r,t){for(var e=r.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=n.compare(r[o],t[o]);if(0!==c)return c}return On.compare(e,u)}))},Pr={URI:zr,map:xr},Wr=(e(Pr),{URI:zr,compact:Ir,separate:Er}),Br={URI:zr,map:xr,reduce:jr,foldMap:Nr,reduceRight:qr,traverse:Lr,sequence:Cr};Un(Br,Wr),Gn(Br,Wr);function Tr(n){switch(n.kind){case"null":return Kr.encode(n);case"string":return Qr.encode(n);case"number":return Vr.encode(n);case"array":return Xr.encode(n);case"object":return Yr.encode(n)}}function Dr(n){return null===n?Kr.decode(n):"number"==typeof n?Vr.decode(n):"string"==typeof n?Qr.decode(n):Array.isArray(n)?Xr.decode(n):Yr.decode(n)}const Hr=(n,r)=>l(`Failed to decode. Input was ${JSON.stringify(n)}. Codec type was ${r}`),Kr={encode:n=>null,decode:n=>null===n?d({kind:"null",value:null}):Hr(n,"SimpleNull")},Qr={encode:n=>n.value,decode:n=>"string"==typeof n?d(N(n)):Hr(n,"SimpleString")},Vr={encode:n=>n.value,decode:n=>"number"==typeof n?d(q(n)):Hr(n,"SimpleNumber")},Xr={encode:n=>n.value.map(Tr),decode:n=>{if(Array.isArray(n)){const r=$r(y)(Dr)(n);return v(L)(r)}return Hr(n,"SimpleArray")}},Yr={encode:n=>{const r=[...n.value.entries()];return Object.assign({},...Array.from(r,(([n,r])=>({[n]:Tr(r)}))))},decode:n=>{if(n&&n.constructor===Object){const r=$r(y)((([n,r])=>t(Dr(r),v((r=>function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n}(n,r))))))(Object.entries(n));return v((n=>M(new Map([...n]))))(r)}return Hr(n,"SimpleObject")}};var Zr=o,nt=c;function rt(n){return function(r){return n(r)?nt(r):Zr}}var tt=function(n){return"Left"===n._tag?Zr:nt(n.right)},et=function(n){return{equals:function(r,t){return r===t||(ft(r)?ft(t):!ft(t)&&n.equals(r.value,t.value))}}},ut=function(n){return{equals:et(n).equals,compare:function(r,t){return r===t?0:at(r)?at(t)?n.compare(r.value,t.value):1:-1}}},it=function(n){return function(r){return ft(r)?Zr:nt(n(r.value))}},ot=nt,ct=tt,at=i,ft=function(n){return"None"===n._tag},st=function(n){return function(r){return ft(r)?n():r.value}};ot(f);function lt(n,r){const t=Object.keys(n),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=r(e,n[e]);at(o)&&(u[e]=o.value)}return u}var dt={equals:function(n,r){return n===r}},pt={equals:dt.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};const mt=(n,r)=>{switch(n.kind){case"bottom":return{kind:"bottom"};case"inner":return S(r(n.a));case"top":return I(n.error)}},gt=n=>B(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return pt.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return n.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var vt=function(n){return-1===n?1:1===n?-1:0};function ht(n,r){return Ir(n.map(r))}function kt(n,r,t,e){const u=(n,r)=>{if(0===n.length)return Ir(r.map((n=>nt({1:n[1],2:t(Zr,nt(n[2]))}))));if(0===r.length)return Ir(n.map((n=>nt({1:n[1],2:t(nt(n[2]),Zr)}))));if(n.length>0&&r.length>0&&D(e)(n[0][1],r[0][1])){const[e,...i]=n,o=e[1],c=e[2];return sr({1:o,2:t(nt(c),Zr)})(u(i,r))}if(n.length>0&&r.length>0&&H(e)(n[0][1],r[0][1])){const[e,...i]=r,o=e[1],c=e[2];return sr({1:o,2:t(Zr,nt(c))})(u(n,i))}if(n.length>0&&r.length>0){const[e,...i]=n,[o,...c]=r,a=e[1],f=e[2],s=o[2];return sr({1:a,2:t(nt(f),nt(s))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=T((n=>n[1]))(e),o=(n=>{const r=ht(n,(n=>at(n[2])?nt({1:n[1],2:n[2].value}):Zr));return 0===r.length?Zr:nt(r)})(u(wr(i)([...n].map((n=>({1:n[0],2:n[1]})))),wr(i)([...r].map((n=>({1:n[0],2:n[1]}))))));return it((n=>new Map(n.map((n=>[n[1],n[2]])))))(o)}function wt(n,r,t,e){const u=T((n=>n[0]))(e),i=wr(u)([...r]).reduceRight(((n,r)=>{if(b(n)){const e=t(r[1],n.left);return at(e)?l(e.value):d(r[0])}return n}),l(n));return ct(i)}function yt(n,r){return new Map([...n].map(r))}function bt(n,r){return new Map([...n].filter(r))}function xt(n){return it(Ot)(function(n){switch(n.state.kind){case"top":return nt(N(n.state.error));case"bottom":return Zr;case"inner":return function(n){return function(n){switch(n.kind){case"numberGroup":case"stringGroup":return jt(n.group);case"tuple":return n.tuple.length>0}}(n.payload)?nt(L(function(n,r){const t=it((n=>sr(n)(r)))(n);return st((()=>r))(t)}(it((n=>N(function(n){const r=n=>{switch(n){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=n=>1===n[2]?r(n[1]):r(n[1])+JSON.stringify(n[2]);return n.map(t).join("")}(n))))(n.commands),function(n){const r=n=>{switch(n.kind){case"bottom":return{kind:"null",value:null};case"top":return N(n.error);case"inner":return q(n.a)}},e=n=>ht([Nt,qt,n=>t(n,Mt,M,nt)],(r=>r(n))),u=n=>ht([Nt,Lt,n=>t(n,Mt,(n=>yt(n,(([n,r])=>[JSON.stringify(n),r]))),M,nt)],(r=>r(n)));switch(n.kind){case"tuple":return n.tuple.map(r);case"stringGroup":return e(n.group);case"numberGroup":return u(n.group)}}(n.payload)))):Zr}(n.state.a)}}(n))}function jt(n){switch(n.kind){case"unbounded":return n.group.size>0;case"windowed":return n.group.size>0||at(n.key);case"countLimit":case"uniqueLimit":return n.group.size>0||at(n.limit)}}function Nt(n){switch(n.kind){case"unbounded":return Zr;case"windowed":return nt(N("w"));case"countLimit":return nt(N(1===n.n?"x":`x${n.n}`));case"uniqueLimit":return nt(N(1===n.n?"u":`u${n.n}`))}}function qt(n){switch(n.kind){case"unbounded":return Zr;case"windowed":return nt(N(at(n.key)?n.key.value:""));case"countLimit":case"uniqueLimit":return nt(N(at(n.limit)?n.limit.value:""))}}function Lt(n){switch(n.kind){case"unbounded":return Zr;case"windowed":return at(n.key)?nt(q(n.key.value)):nt({kind:"null",value:null});case"countLimit":case"uniqueLimit":return at(n.limit)?nt(q(n.limit.value)):nt({kind:"null",value:null})}}function Mt(n){switch(n.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return n.group}}function Ot(n){switch(n.kind){case"array":return 0===n.value.length?{kind:"null",value:null}:1===n.value.length?Ot(n.value[0]):L(n.value.map(Ot));case"object":return t(bt(n.value,(([n,r])=>"null"!==r.kind)),(n=>yt(n,(n=>[n[0],Ot(n[1])]))),M);default:return n}}function Rt(n){const r=n=>{if(0===n.length)return{kind:"bottom"};const r=(n=>{if(4!==n.length)return Zr;const[r,t,e,u]=n;if("string"===r.kind&&"string"===t.kind&&"object"===u.kind){const n=rt((n=>St(n[1].value)&&It(n[2].value)))({1:r,2:t});return it((n=>({prim:n[1].value,grp:n[2].value,cutoff:e,m:u.value})))(n)}return Zr})(n);if(at(r)){const{prim:n,grp:t,cutoff:e,m:u}=r.value,i=Et(e,u,At(t));return"string"==typeof i?I(i):S(z(Gt(n),i))}const t=(n=>{if(3!==n.length)return Zr;const[r,t,e]=n;if("string"===r.kind&&"object"===e.kind){const n=rt((n=>It(n.value)))(r);return it((n=>({grp:n.value,cutoff:t,m:e.value})))(n)}return Zr})(n);if(at(t)){const{grp:n,cutoff:r,m:e}=t.value,u=Et(r,e,At(n));return"string"==typeof u?I(u):S(z(Zr,u))}const e=(n=>{if(2!==n.length)return Zr;const[r,t]=n;if("string"===r.kind&&"object"===t.kind){const n=rt((n=>St(n.value)))(r);return it((n=>({prim:n.value,m:t.value})))(n)}return Zr})(n);if(at(e)){const{prim:n,m:r}=e.value;return S(z(Gt(n),$(E(r))))}const u=(n=>{if(1!==n.length)return Zr;const[r]=n;return"object"===r.kind?nt({m:r.value}):Zr})(n);if(at(u)){const{m:n}=u.value;return S(z(Zr,$(E(n))))}const i=(n=>{if(n.length<1)return Zr;const[r,...t]=n;if("string"===r.kind){const n=rt((n=>St(n.value)))(r);return it((n=>({prim:n.value,rest:t})))(n)}return Zr})(n);if(at(i)){const{prim:n,rest:r}=i.value;return S(z(Gt(n),_t(r)))}return S(z(Zr,_t(n)))},t=n=>{switch(n.kind){case"array":return Or(t)(n.value);default:return[n]}};switch(n.kind){case"null":return J({kind:"bottom"});default:return J(r(t(n)))}}function St(n){const r=n.split("");switch(!0){case 0===r.length:return!1;default:{const[n,...t]=r;return-1!=="pmvn".indexOf(n)&&t.every((n=>-1!=="pmvn0123456789".indexOf(n)))}}}function It(n){const r=n.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[n,...t]=r;return-1!=="ux".indexOf(n)&&-1===t.map((n=>!isNaN(parseInt(n)))).indexOf(!1)}}}function Et(n,r,t){switch(n.kind){case"string":return $(t({1:nt(n.value),2:r}));case"number":case"null":return _(t({1:"null"===n.kind?Zr:nt(n.value),2:bt(yt(r,(([n,r])=>[Number(n),r])),(n=>!isNaN(n[0])))}));default:return"{bad cutoff}"}}function At(n){const r=n=>r=>U(r[2],r[1],n),t=n=>r=>G(r[2],r[1],n),e=n.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return n=>A(n[2],n[1]);case"u"===e[0]&&void 0===e[1]:return r(1);case"u"===e[0]&&void 0!==e[1]:return r(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Gt(n){return it(O)(vn(Ut(n,(n=>{const r=n.split("");if(0===r.length)return Zr;const[t,...e]=r,u=(n=>{switch(n){case"p":return nt("add");case"m":return nt("mul");case"v":return nt("max");case"n":return nt("min");default:return Zr}})(t);return it((n=>{const{init:r,rest:t}=(u=n=>{return"number"==typeof(r=parseInt(n))&&isFinite(r)&&Math.floor(r)===r;var r},function(n){var r=br(gr(n,u))(n);return{init:r[0],rest:r[1]}})(e);var u;return{1:{1:n,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(u)}))))}function Ut(n,r){const t=r(n);return st((()=>[]))(it((n=>[n[1]].concat(Ut(n[2],r))))(t))}function _t(n){return C(n.map($t))}function $t(n){switch(n.kind){case"number":return S(n.value);case"string":return I(n.value);case"null":return{kind:"bottom"};case"object":return I("{object}");case"array":return I("{array}")}}const Ct={strategy:(n,r,t)=>e=>{if(ft(t))return r;if("delta"===n&&ft(r))return Zr;if(ft(r))return t;if(at(r)&&at(t))return e(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,t,e,u,i)=>{const o=Fr(gt(i));if("append"===n&&"add"===r)return yr(t,e,Dt("append",u.plus));if("append"===n&&"mul"===r)return yr(t,e,Dt("append",u.times));if("append"===n&&"max"===r)return K(o)(t,e);if("join"===n&&"add"===r)return yr(t,e,Dt("join",K(i)));if("join"===n&&"mul"===r)return yr(t,e,Dt("join",K(i)));if("join"===n&&"max"===r)return K(o)(t,e);if("min"===r)return Ct.operation(n,"max",t,e,u,function(n){return B(((r,t)=>vt(n.compare(r,t))))}(i));if("delta"===n&&"max"===r)return H(o)(t,e)?t:e.map(R);if("delta"===n)return yr(t,e,((n,r)=>H(gt(i))(n,r)?n:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(n,r,t,e)=>{if("delta"===n&&"top"===t.kind&&"top"===e.kind)return H(pt)(t.error,e.error)?I(t.error):{kind:"bottom"};if("delta"===n&&"bottom"===e.kind)return t;if("delta"===n&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return I(K(pt)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return r(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Jt={plus:(n,r)=>n+r,times:(n,r)=>n*r};function zt(n,r,t,e){if("unbounded"===n.kind&&"unbounded"===r.kind){const u=n.group,i=r.group;return st(R)(it((n=>S(E(n))))(kt(u,i,t,e)))}if("windowed"===n.kind&&"windowed"===r.kind){const u=n.key,i=n.group,o=r.key,c=r.group,a=K(ut(e))(u,o);return st(R)(it((n=>S(A(n,a))))(kt(i,c,t,e)))}if("countLimit"===n.kind&&"countLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,o=n.group,c=r.limit,a=r.group,f=K(ut(e))(i,c);return st(R)(it((n=>S(G(n,f,u))))(kt(o,a,t,e)))}return I("Non matching counts")}if("uniqueLimit"===n.kind&&"uniqueLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,o=n.group,c=r.limit,a=r.group,f=K(ut(e))(i,c);return st(R)(it((n=>S(U(n,f,u))))(kt(o,a,t,e)))}return I("Non matching counts")}return I("Non matching group types")}function Ft(n,r,t,e,u,i){const o=(n,r)=>({1:mr(n)(r).concat(dr(Math.max(0,n-r.length),R)),2:vr(n)(r)}),c=(r,t,e)=>{if(0===r.length)return Ct.operation(n,"max",t,e,u,i);if(r.length>0){const[a,...f]=r,s=o(a[2],t),l=s[1],d=s[2],p=o(a[2],e),m=p[1],g=p[2];return Ct.operation(n,a[1],l,m,u,i).concat(c(f,d,g))}throw new Error("Non exhaustive match in recurse")};return kr((a=n=>"bottom"===n.kind,function(n){return n.slice(gr(n,a))})(kr(c(r,t,e))));var a}function Pt(n,r,t){return st(j)(Wt(n,Zr)(r,t))}function Wt(n,r){const t=r=>(t,e)=>Ct.strategy(n,t,e)(Wt(n,r)),e=(e,u)=>{if(et(Nn(P({1:dt,2:Mn}))).equals(e.commands,u.commands)){const i=((r,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const n=zt(e.group,u.group,t(r),pt);return mt(n,(n=>$(Tt(n,pt))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const n=zt(e.group,u.group,t(r),On);return mt(n,(n=>_(Tt(n,On))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=at(r)?r.value:[];return S(C(Ft(n,t,e.tuple,u.tuple,Jt,On)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)})(ft(e.commands)?r:e.commands,e.payload,u.payload);return mt(i,(n=>z(e.commands,n)))}throw new Error(`Non matching primitive strings. Got ${JSON.stringify(e)} and ${JSON.stringify(u)}`)};return(r,t)=>xt(J(Ct.extend(n,e,Rt(r).state,Rt(t).state)))}function Bt(n,r,t){const e=it((r=>bt(n,(([n,e])=>{return(u=t,function(n,r){return-1!==u.compare(n,r)})(n,r);var u}))))(r);return st((()=>n))(e)}function Tt(n,r){switch(n.kind){case"unbounded":return n;case"windowed":return ft(n.key)?n:A(Bt(n.group,n.key,r),n.key);case"countLimit":{const t=n.limit,e=n.n,u=n.group,i=wt(e,u,((n,r)=>r<=1?Zr:nt(r-1)),r),o=K(ut(r))(t,i);return G(Bt(u,o,r),o,e)}case"uniqueLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>{switch(n.kind){case"object":{const t=[...n.value.keys(),...r.keys()],u=new Set(t);return u.size>=e?Zr:nt(u)}default:return Zr}},o=wt(new Set,u,i,r),c=K(ut(r))(t,o);return U(Bt(u,c,r),c,e)}}}function Dt(n,r){return(t,e)=>Ct.extend(n,((n,t)=>S(r(n,t))),t,e)}function Ht(n,r){const e=t((n=>lt(n,((n,r)=>r.state?nt({[r.checksum]:r.state}):Zr)))(n),Dr,x((n=>M(new Map)))),u=t(Dr(r),x((n=>M(new Map))));return t(function(n,r){return Pt("delta",n,r)}(e,u),(n=>Tr(n)))||{}}!function(n){const r=self;function t(n,t,e,u){function i(t){if("function"!=typeof r.postMessage)return n.ports[0].postMessage(t);r.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}r.addEventListener("message",(function(r){if(e=r,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=r.data,[i,o]=u;if("function"==typeof n)return function(n,r,e,u){const i=function(n,r){try{return{res:n(r)}}catch(n){return{err:n}}}(r,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(n,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(n,e,null,i.res):void i.res.then((function(r){t(n,e,null,r)}),(function(r){t(n,e,r)}));var o,c}(r,n,i,o);t(r,i,new Error("Please pass a function into register()."))}))}((function(n){switch(n.type){case"delta":return Ht(n.stateMap,n.lastSentStateMapWithChecksum);case"noop":return{}}}))})();',"Worker",void 0,void 0)}var d=n(7183);function m(){return(0,d.h)(new l)}const f={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class g{constructor(e,t,n,r){this.api=e,this._internals=t,this.models=n,this.stateWorker=r,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new a.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),f),this.fetchUnseenState=!!p.includes("67cbf6c5-d926-407b-a684-a0606570ff08")||this._internals.sessionManager.sessionHasChanged(),this.stateOffset=this._internals.state.getPermutiveData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,o.Yh)(this._internals.state.getPermutiveData("internal_query_states")||{}),this.stateWorker.postMessage({type:"noop"})}sync(e){return(0,s.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen").then(s.Q1)}syncIfNotEmpty(e,t){const[n,r,i]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this._internals.queryManager.stateMap.value,!0]:[0,{},!0],o=this._internals.metrics.startTimer("sdk_compute_delta_seconds",{}),a=this.stateWorker.postMessage({type:"delta",stateMap:r,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum}).then((e=>(this._internals.metrics.stopTimer("sdk_compute_delta_seconds",o),e))),c=e=>{this.fetchUnseenState=!1;const t=(0,s.ls)((e=>this._internals.network.error(`Error sending state delta. Got ${JSON.stringify(e)}`,this._internals.state.userId)),(e=>({})));return this.api.state(this._internals.state.userId,this._internals.state.eventSourceId,e,n,i).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return a.then((e=>i||Object.keys(e).length>0?c(e):Promise.resolve({})))}resetSync(){return(0,s.zG)(this.reset(),(e=>Promise.all([this.syncIfNotEmpty("reset"),this._internals.thirdParty.segments(),this.models.getModels()]).then((([e,t,n])=>this._internals.queryManager.bootstrap([]).then((e=>this._internals.queryManager.updateEnvironment({segments:(0,i.PM)({"1p":this._internals.queryManager.userSegments.getAllAsMap()},t),lookalikeModels:n})))))))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,r.Y3)((()=>JSON.parse(e.state)),(e=>this._internals.network.error(`Failed to parse State API response, got ${e}`,this._internals.state.userId))),n=e=>e?this._internals.queryManager.updateExternalState(e):(0,s.Q1)();return(0,r.tO)(t)?(0,s.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this._internals.state.setPermutiveData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const p=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},2206:(e,t,n)=>{n.d(t,{u:()=>z});var r=n(3629);class i{constructor(e,t,n,r,i,o,s){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=o,this.workspaceLevelConfig=s}activateEveryTime(){return"EveryTime"===this.triggerType}activateOnEntry(){return"OnEntry"===this.triggerType}activateOnExit(){return"OnExit"===this.triggerType}trackImpression(e){const t={reaction_id:this.id,type:"impression"};this.permutive.track("Reaction",t,e),this.logger.log("impression: ",t)}trackConversion(e){const t={reaction_id:this.id,type:"conversion"};this.permutive.track("Reaction",t,e),this.logger.log("conversion: ",t)}}var o=n(5506);class s{constructor(e,t,n){this.logger=e,this.permutive=t,this.context=n,this.addons=new o.A,this.optimisedActivationsConfig={dfp:{dfp:[14831,77115,9837,8500,71851,71852,73622,29579,74544,62199,10798,13183,13769,10428,13108,12381,12668,20177,14081,14808,13132,14812,13133,14816,14918,14919,14921,18029,14922,14923,14924,8502,14823,9812,10852,13825,13826,13520,13827,10860,10463,13828,13830,13829,9831,13831,13832,13833,13852,9835,9574,10179,12008,8501,8679,14830,8421,10622,32334,75203,40973,13855,11893,13856,13857,20296,11122,10319,11904,14371,11903,12198,10339,12199,12200,13444,13445,13446,13449,13448,10115,10116,10117,7809,7827,7834,7835,7836,7838,7843,7844,7878,7880,7881,7894,7925,7927,7981,8015,8301,9705,13225,14848,17295,14282,14853,19810,14851,19814,19815,14858,13640,12475,16243,11200,14867,17299,11201,14748,14868,11202,32627,17301,14577,10790,9697,9702,9704,20478,10870,10869,18570,20553,20707,21006,21068,21542,21290,21794,22156,22629,22851,22101,23441,23694,30412,24326,24408,30413,25102,25178,30416,27457,30418,30417,27709,27712,27713,27734,10855,29223,15073,29219,15072,28392,32341,28133,28160,28161,32333,28517,28518,28519,32336,28538,28540,28541,28566,32347,32319,32348,32337,31818,25111,32340,32338,30414,22995,28520,32321,30411,30415,30406,32339,30405,20463,32324,30410,29195,30407,10853,49915,28415,28391,10856,10857,30408,29564,29567,29568,29569,29571,29572,29573,29574,29575,29576,29581,29585,29590,29591,29592,29593,29594,29595,29596,29598,29599,29694,30409,10065,32344,30144,30164,10868,33624,34114,34165,47117,39266,40114,40115,42300,42301,42302,42303,42307,42308,43608,47968,53156,46823,40462,54871,47127,62273,62592,62593,62613,62627,63018,65170],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[71851,71852,39266,74544,14282,7878,7835,29567,7827,9812,7838,7834,7836,23694,75203,19814,21794]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return this.addons.getConfigByKey(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new i(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.context[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}class a{constructor(e){this._internals=e,this.queue=[],this.nextNotify=null,e.messages.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this._internals.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];if(i.complete)n+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}var c=n(6567),u=n(5090),l=n(3735),d=n(276),m=n(7545);const f="permutive-events-cache";var g=n(550),p=n(70),h=n(1763);class w{constructor(e){this.namespace=e}put(e,t){return(0,l.zG)(this.namespace.getNamespacedStorageKey(String(t)),(t=>window.localStorage.setItem(t,JSON.stringify(e))),(e=>Promise.resolve(t)))}get(e){return(0,l.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>JSON.parse(window.localStorage.getItem(e))),(e=>Promise.resolve(e)))}delete(e){return(0,l.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>Promise.resolve(window.localStorage.removeItem(e))))}deleteStore(){return Promise.resolve()}migrateIfRequired(){return Promise.resolve()}}let _,y;const b=new WeakMap,v=new WeakMap,k=new WeakMap,E=new WeakMap,q=new WeakMap;let S={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return v.get(e);if("objectStoreNames"===t)return e.objectStoreNames||k.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function T(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(y||(y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(P(this),t),x(b.get(this))}:function(...t){return x(e.apply(P(this),t))}:function(t,...n){const r=e.call(P(this),t,...n);return k.set(r,t.sort?t.sort():[t]),x(r)}}function O(e){return"function"==typeof e?T(e):(e instanceof IDBTransaction&&function(e){if(v.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));v.set(e,t)}(e),t=e,(_||(_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,S):e);var t}function x(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(x(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&b.set(t,e)})).catch((()=>{})),q.set(t,e),t}(e);if(E.has(e))return E.get(e);const t=O(e);return t!==e&&(E.set(e,t),q.set(t,e)),t}const P=e=>q.get(e);function M(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=x(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(x(s.result),e.oldVersion,e.newVersion,x(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}const I=["get","getKey","getAll","getAllKeys","count"],D=["put","add","delete","clear"],C=new Map;function A(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(C.get(t))return C.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=D.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!I.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&o.done]))[0]};return C.set(t,o),o}S=(e=>({...e,get:(t,n,r)=>A(t,n)||e.get(t,n,r),has:(t,n)=>!!A(t,n)||e.has(t,n)}))(S);class j{constructor(e,t,n,r,i,o,s){this.namespace=e,this._internals=t,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=i,this.keyObjectStore=o,this.keyObjectKey=s,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.cryptoKey=this.getOrGenerateKey()}static initialise(e,t,n,r,i,o,s,a){const c=["development"===t.config.environment?window.isSecureContext:"https:"===window.location.protocol,!((0,u.G6)(navigator.userAgent)&&["f036e56c-2514-4246-bf83-1659326fe3f8","5f42864d-a421-4f37-9478-00266f871d68"].indexOf("67cbf6c5-d926-407b-a684-a0606570ff08")>-1)].every((e=>!0===e)),d=(e,t,n)=>t.includes(n)?(0,l.Q1)():e.createObjectStore(n),m=c?(0,p.Y3)((()=>M(r,a,{upgrade:e=>{const t=[...e.objectStoreNames];d(e,t,i),d(e,t,o)}})),(e=>String(e))):(0,p.t$)("Connection not attempted. Default to localStorage");return(0,p.g_)((e=>(0,h.t$)(e)),(r=>(0,h.Y3)((()=>r.then((r=>new j(e,t,n,r,i,o,s)))),(e=>String(e)))))(m)}put(e,t){return this.cryptoKey.then((n=>(0,l.zG)(JSON.stringify(e),(e=>new Promise(((r,i)=>{this.cryptoAlg.encrypt(n,e).then((e=>(0,l.zG)(this.namespace.getNamespacedStorageKey(String(t)),(n=>this.resetIfRequired(this.puts++).then((i=>this.idb.put(this.mainObjectStore,e,n).then((e=>r(t)))))))),(e=>i(e)))}))))))}get(e){return this.cryptoKey.then((t=>(0,l.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.get(this.mainObjectStore,e).then((e=>e?this.cryptoAlg.decrypt(t,e):null)).then(JSON.parse)))))}delete(e){return(0,l.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}migrateIfRequired(){return(0,l.zG)(this._internals.getExternalData(f),(e=>e?(0,h.F2)(JSON.parse(e)):(0,h.t$)(null)))().then((0,p.g_)(l.Q1,(e=>(0,l.zG)(e.forEach((e=>this._internals.state.eventsCache.add((0,g.kJ)(e),{persistOnDisk:!1}))),(e=>this._internals.removeExternalData(f))))))}deleteStore(){return Promise.resolve(this.idb.close()).then((e=>function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),x(n).then((()=>{}))}(this.idb.name)))}getOrGenerateKey(){return(0,l.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(e=>this.idb.get(this.keyObjectStore,e).then((e=>e||this.storeGivenOrGeneratedKey()))))}storeGivenOrGeneratedKey(e){return(e||this.cryptoAlg.generateKey(!1)).then((e=>(0,l.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(t=>this.idb.put(this.keyObjectStore,e,t)),(t=>e))),(e=>Promise.reject(e)))}resetIfRequired(e){const t=this.idb.name,n=this.idb.version;return(0,u.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.deleteStore().then((e=>M(t,n,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}))).then((e=>{this.idb=e,this.storeGivenOrGeneratedKey(this.cryptoKey)})):Promise.resolve()}}class L{constructor(e,t,n,r,i,o,s){this.namespace=e,this._internals=t,this.cryptoAlg=n,this.dbName=r,this.mainObjectStore=i,this.keyObjectStore=o,this.keyObjectKey=s,this.version=3,this.db=j.initialise(this.namespace,this._internals,this.cryptoAlg,this.dbName,this.mainObjectStore,this.keyObjectStore,this.keyObjectKey,this.version)().then((0,p.fS)((e=>new w(this.namespace))))}put(e,t){return(0,h.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>String(e)))}get(e){return(0,h.Y3)((()=>this.db.then((t=>t.get(e))).then(c.ij)),(e=>String(e)))}delete(e){return(0,h.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,h.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}migrateIfRequired(){return(0,h.Y3)((()=>this.db.then((e=>e.migrateIfRequired()))),(e=>String(e)))}}class R{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]}_decrypt(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var U=n(998);class N{constructor(e,t,n,r,i){this.namespace=e,this.logger=t,this.state=n,this._internals=r,this.permutive=i,this.EVENTS_CACHE_OBJECT_STORE="events",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="events",this.eventPutQueue=Promise.resolve(),this.eventCacheSizeInBytes=0,this.eventsTTLInMilliseconds=(0,l.zG)((0,c.ij)(this._internals.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventStore=new L(this.namespace,this._internals,new R,"67cbf6c5-d926-407b-a684-a0606570ff08",`${this.EVENTS_CACHE_OBJECT_STORE}_${this.state.userId}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${this.state.userId}`,this.CRYPTO_KEY_OBJECT_KEY),this.eventsCache=(0,u.PQ)((()=>{const e=(0,U.G)("load_event_cache");return this.loadFromDisk().then((t=>(this.logger.log("Event cache loaded, #e",t.length),e.finish(),t)))}))}all(){return this.eventsCache}resetIfNeeded(){return Promise.resolve()}add(e,t){const{persistOnDisk:n}=t;return this.eventsCache.then((t=>(0,l.zG)(t.push(e),(e=>n?this.flush():(0,l.Q1)()),(t=>e))))}loadFromDisk(){this.logger.log("Loading event caching...");const e=[];return this.eventStore.migrateIfRequired()().then((0,p.g_)((t=>(this._internals.network.error(`Failed to migrate events cache. Got ${JSON.stringify(t)}`),this.reset().then((t=>e)))),(()=>{const t=this._internals.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{});return this.eventStore.get(f)().then((n=>{this._internals.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",t);const r=(0,c.g_)((()=>Promise.resolve(e)),(e=>(0,l.zG)(this.eventCacheSizeInBytes=2*JSON.stringify(e).length,(t=>{this._internals.metrics.track({name:"sdk_events_cache_byte_total",value:this.eventCacheSizeInBytes,labels:{}}),this._internals.metrics.track({name:"sdk_events_cache_size_total",value:e.length,labels:{}})}),(t=>e.map(g.kJ)),(e=>(0,c.g_)((()=>e),(t=>e.filter((e=>t>Date.now()-e.time.getTime()))))(this.eventsTTLInMilliseconds)),(e=>Promise.resolve(e)))));return(0,p.g_)((t=>(this._internals.network.error(`Error fetching data from store. Got ${t}`),this.reset().then((t=>e)))),r)(n)}))})))}reset(){return this.logger.log("Resetting Events Cache"),this.eventsCache=Promise.resolve([]),this.eventCacheSizeInBytes=0,this.eventStore.deleteStore()().then((()=>(this.eventStore=new L(this.namespace,this._internals,new R,"67cbf6c5-d926-407b-a684-a0606570ff08",`${this.EVENTS_CACHE_OBJECT_STORE}_${this.state.userId}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${this.state.userId}`,this.CRYPTO_KEY_OBJECT_KEY),this.flush())))}flush(){return this.eventsCache.then((e=>{let t=JSON.stringify(e),n=1;for(;t.length>this._internals.config.eventsCacheLimitBytes/2;)e.splice(0,n),n*=2,t=JSON.stringify(e);this.logger.log("Writing cache (#e)",e.length),this.eventCacheSizeInBytes=2*t.length,this.eventPutQueue=this.eventPutQueue.then((t=>this.eventStore.put(e.map(g.XO),f)().then(l.Q1)))}))}getStateSizeInBytes(){return this.eventCacheSizeInBytes}}class z{constructor(e,t,n,r,i){this.namespace=e,this.logger=t,this._internals=n,this.permutive=r,this.context=i,this.permutiveData={},this.permutiveDataSize=0,this.taskQueue=new a(this._internals),this.localStorageQueue=new Set,this.localStorageScheduler=new m.b(n.config.localStorageWriteDelay,n.config.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(n.config.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.getPermutiveDataAndMigrateIfNeeded();const o=(0,c.fS)((()=>(0,c.fS)(u.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie());this.setUserId(o),this.viewId=(0,u.k$)(),this.context.view_id=this.viewId,this.eventSourceId=this.getPermutiveData("event-source-id")||this.generateAndStoreEventSourceId(),this.eventsCache=new N(this.namespace,this.logger,this,this._internals,this.permutive),this.activationManager=new s(this.logger,this.permutive,this.context)}setUserId(e){this._internals.setCookie(this._internals.config.cookieName,e,!0),this._internals.setExternalData(this._internals.config.cookieName,e),this.userId=e}getPermutiveData(e){return this.permutiveData[e]}setPermutiveData(e,t){this.permutiveData[e]=t,this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writePermutiveData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writePermutiveData(e);this.localStorageQueue.clear()}writePermutiveData(e){this.logger.log(`Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return this._internals.makeSafe((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))))()}getClient(){let e="";return e=document.title?document.title:"",{type:"web",user_agent:navigator.userAgent||"",url:(0,r.bk)(window.location.href),domain:window.location.hostname||"",title:e,referrer:(0,r.bk)(document.referrer)}}getStateSizeInBytes(){return this.permutiveDataSize+this.eventsCache.getStateSizeInBytes()}reset(){return this.logger.log("Resetting State"),Promise.resolve((0,l.zG)(this._internals.deleteCookie(this._internals.config.cookieName),(e=>this._internals.removeExternalData(this._internals.config.cookieName)),(e=>this._internals.queryManager.reset()),(e=>this.permutiveData={}),(e=>this.eventSourceId=this.generateAndStoreEventSourceId()),(e=>window.localStorage.removeItem(this._internals.config.permutiveDataModelsKey)),(e=>window.localStorage.removeItem(this._internals.config.permutiveDataQueriesKey)),(e=>window.localStorage.removeItem(this._internals.config.permutiveDataTPDKey)),(e=>window.localStorage.removeItem(this._internals.config.permutiveDataEnrichersKey)),(e=>window.localStorage.removeItem(this._internals.config.permutiveDataMiscKey))))}getPermutiveDataAndMigrateIfNeeded(){const e=(e,t)=>{this.setPermutiveData(e,t)},t=t=>{const n=this.namespace.getNamespacedStorageKey(this._internals.config.permutiveDataKey);return window.localStorage.removeItem(n),[G,B,K,W,$].forEach((n=>(0,l.zG)(((e,t)=>(0,l.zG)(Array(...e),(0,d.Ew)((e=>void 0!==t[e]))))(n,t),(0,c.UI)((n=>e(n,t[n])))))),t};return(0,l.zG)(this.getPermutiveDataChunk("legacy"),(e=>Object.keys(e).length>0?t(e):Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getPermutiveDataChunk("misc")),this.getPermutiveDataChunk("models")),this.getPermutiveDataChunk("queries")),this.getPermutiveDataChunk("tpd")),this.getPermutiveDataChunk("enrichers"))))}getPermutiveDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t);return null===n?{}:(this.permutiveDataSize+=2*n.length,JSON.parse(n))}dataKeyToChunkInfo(e){const t=e=>(0,u.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(G)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(B)];case"third-party-data":case"third-party-data-session-id":case"third-party-data-usage":return[this.chunkKeyToStorageKey("tpd"),t(K)];case"enricher:geoip":case"enricher:watson":return[this.chunkKeyToStorageKey("enrichers"),t(W)];case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:twitter_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t($)];default:return(0,u.Fi)(e)}}chunkKeyToStorageKey(e){switch(e){case"legacy":return this._internals.config.permutiveDataKey;case"models":return this._internals.config.permutiveDataModelsKey;case"queries":return this._internals.config.permutiveDataQueriesKey;case"tpd":return this._internals.config.permutiveDataTPDKey;case"enrichers":return this._internals.config.permutiveDataEnrichersKey;case"misc":return this._internals.config.permutiveDataMiscKey;default:return(0,u.Fi)(e)}}generateAndStoreEventSourceId(){const e=(0,u.k$)();return this.setPermutiveData("event-source-id",e),e}getUserIdFromStorageIfValid(e){const t=(0,c.DT)(u.Gz);return(0,l.zG)("cookie"===e?this._internals.getCookie(this._internals.config.cookieName):this._internals.getExternalData(this._internals.config.cookieName),c.ij,(0,c.tS)(t))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}}const G=["models_data","models_last_updated"],B=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],K=["third-party-data","third-party-data-session-id","third-party-data-usage"],W=["enricher:geoip","enricher:watson"],$=["identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:twitter_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","pubmatic","lotame"]},1032:(e,t,n)=>{n.d(t,{X:()=>a});var r=n(655),i=n(5090);class o{constructor(e,t){this.userId=e,this.aliases=t,this.resource="userTPD",this.query=()=>{const e=this.aliases.map((({id:e,tag:t,priority:n})=>`{id: "${e}", tag: "${t}", priority: ${n}}`)).join(",");return`\n      userTPD: user(user_id: "${this.userId}") {\n        identity(aliases: [${e}]) {\n          tpd {\n            name\n            segments\n          }\n        }\n      }\n    `}}}var s={equals:function(e,t){return e===t}};class a{constructor(e,t,n,r,i,o){this.logger=e,this.api=t,this.graphql=n,this._internals=r,this.permutive=i,this.network=o,this.logger.log("Enabling tpd reporting"),this._internals.messages.on("permutive:segments:updated",(()=>{this.reportUsage()})),this.userSegments=this._internals.state.getPermutiveData("third-party-data")||{},this.lastCheckedSession=this._internals.state.getPermutiveData("third-party-data-session-id")||""}segments(){if(this.segmentsPromise)return this.segmentsPromise;const e=this._internals.sessionManager.getSessionId();if(this.lastCheckedSession===e)return Promise.resolve(this.userSegments);const t=(0,i.b2)();this.lastCheckedSession=e;const n=this._internals.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),r=Object.assign(Object.assign({},this._internals.identities.getCustomerDefinedIdentitiesMap()),this._internals.identities.getTPDIdentitiesMap());if(Object.keys(r).length>0){const e=new o(this._internals.state.userId||(0,i.k$)(),this._internals.identities.getPrioritizedIdentities(r));this.graphql.register(e).then((e=>{const n=this.graphQLTPDResponseToSegmentMap(e);this.updateCache(n),t.resolve(n)})).catch((e=>{this.network.error(`Third Party Data segments retrieval failed with reason: ${e}`,this._internals.state.userId),t.resolve({})}))}else t.resolve({});const a=t.promise.then((e=>this.userSegments));return a.then((t=>{this._internals.state.setPermutiveData("third-party-data-session-id",e),this._internals.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n);const r=this._internals.state.getPermutiveData("third-party-data"),o=(0,i.rB)((0,i.rB)(s)),a=(0,i.rB)(s);if(!r||!o.equals(r,t)){this._internals.state.setPermutiveData("third-party-data",this.userSegments);const e=Object.entries(t||{});(r?e.filter((([e,t])=>!a.equals(r[e]||{},t))):e).forEach((([e,t])=>this.fireSegments(e,Object.keys(t))))}})),this.segmentsPromise=a,this.segmentsPromise}addSegments(e,t){this.updateCache({[e]:this.listToSegmentMap(t)})}updateCache(e){this.userSegments=(0,i.PM)(this.userSegments,e)}fireSegments(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t})}reportUsage(){const e=this.tpdUsage(this._internals.queryManager.stateMap.value),t=(0,i.vp)(JSON.stringify(e));if(this._internals.state.getPermutiveData("third-party-data-usage")!==t&&Object.keys(e).length>0){this._internals.state.setPermutiveData("third-party-data-usage",t);const n={user_id:this._internals.state.userId,time:new Date,tpd_segments:e};this.api.tpdUsage(n)}}graphQLTPDResponseToSegmentMap(e){return e.identity.tpd.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.name]:this.listToSegmentMap(t.segments)})),{})}listToSegmentMap(e){return e.reduce(((e,t)=>(e[t]=!0,e)),{})}tpdUsage(e){const t={},n=Object.keys(e),i=n.length;for(let o=0;o<i;o++){const i=n[o],s=e[i],{activations:a}=s;(0,r._T)(s,["activations"]);a&&Object.keys(a).length>0&&(t[i]=a)}return t}}},4725:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(655);const i=(0,n(6745).H)([[{name:"dfp",import:Promise.resolve().then(n.bind(n,2613))}],[],[],[],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,8726))}],[],[],[],[],[{name:"facebook_pixel_v2",import:Promise.resolve().then(n.bind(n,1361))}],[],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,718))}],[],[],[],[],[],[],[{name:"rubicon_ssp",import:Promise.resolve().then(n.bind(n,2404))}],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,7926))}],[],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,2586))}],[],[{name:"twitter_pixel",import:Promise.resolve().then(n.bind(n,7791))}],[{name:"web",import:Promise.resolve().then(n.bind(n,6362))}],[]]),o=({_internals:e,logger:t,network:n,permutiveMethods:o,q:s})=>{const a=Object.entries(i).map((([i,a])=>(0,r.mG)(void 0,void 0,void 0,(function*(){return t.log(`Loading addon ${i}`),(yield a).load(s,o,e,n)}))));return Promise.all(a)}},8726:(e,t,n)=>{n.r(t),n.d(t,{load:()=>s,CleanRoomAddon:()=>c});var r=n(276),i=n(2751),o=n(4011);const s=(e,t,n)=>{e.push({functionName:"addon",arguments:["clean_room",{}]})},a=(e,t)=>({direct_buy:(0,r.G0)(i.Eq)(e.direct_buy,t.direct_buy),programmatic:(0,r.G0)(i.Eq)(e.programmatic,t.programmatic)});class c{constructor(e){this._internals=e._internals,this.api=e.api;const t=this._internals.sessionManager.sessionHasChanged();this.makeRequest(t)}makeRequest(e){this.getQueries(e).then((t=>{if(e){const e=this.getOrEmpty(t.queries);this.cacheLocally(e),this.emitUpdated(e)}else{const e=this.getOrEmpty(t.queries),n=this.getCache(),r=a(e,n);this.cacheLocally(r),this.emitUpdated(r)}}))}getQueries(e){const t=this._internals.queryManager.userSegments.getStdAsList(),n=this._internals.queryManager.userSegments.getAllAsList(),i=(0,r.e5)(o.Eq)(n,t);return this.api.cleanRoom(e,{stds:t,fps:i,userId:this._internals.state.userId})}getCache(){const e=JSON.parse(this._internals.getExternalData("_pcrdbs")),t=JSON.parse(this._internals.getExternalData("_pcrprs"));return{direct_buy:null!=e?e:[],programmatic:null!=t?t:[]}}cacheLocally(e){this._internals.setExternalData("_pcrdbs",JSON.stringify(e.direct_buy)),this._internals.setExternalData("_pcrprs",JSON.stringify(e.programmatic))}emitUpdated(e){this._internals.messages.emit("permutive:cleanroom:db:updated",(0,r.G0)(i.Eq)(e.programmatic,e.direct_buy))}getOrEmpty(e){var t,n;return{direct_buy:null!==(t=e.direct_buy)&&void 0!==t?t:[],programmatic:null!==(n=e.programmatic)&&void 0!==n?n:[]}}}},2613:(e,t,n)=>{n.r(t),n.d(t,{load:()=>h,DFPAddon:()=>w});var r=n(276),i=n(2751),o=n(5506),s=(n(8757),n(5090));const a="_pdfps",c={},u=new o.A,l=u.getConfigByKey("dfp"),d=u.getConfigByKey("web"),m=()=>l("track_slot_rendered",!0),f=()=>l("track_slot_clicked",!0),g=()=>d("slotrendered_aggregated",!1),p=[],h=(e,t,n)=>{e.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){t.ready(n.makeSafe((()=>{let e=0;googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().length>0&&googletag.pubads().getSlots().forEach((function(t){t.getResponseInformation()&&e++}));const t=0===e?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";n.metrics.track({name:t,value:1,labels:{target:"dfp"}})})),"realtime");const e=function(){const e=n.getExternalData(a);return e?JSON.parse(e):[]}();googletag.cmd.push((function(){const t=googletag.pubads().getTargeting("permutive")||[];googletag.pubads().setTargeting("permutive",e.map(String).concat(t))}));const r=function(e){const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return l("track_targeting_keys",!1)?Object.assign(Object.assign({},t),(()=>{const t={targeting_keys:[]},n={},r=e.getTargetingKeys();for(let i=0;i<r.length;i++){const o=r[i],s=[],a=e.getTargeting(o);for(let e=0;e<a.length;e++)s.push(a[e].toString());s.length>0&&(n[o]=1,t.targeting_keys.push({key:o,value:s}))}const i=googletag.pubads().getTargetingKeys();for(let e=0;e<i.length;e++){const r=i[e],o=[];if(void 0===n[r]){const n=googletag.pubads().getTargeting(i[e]);for(let e=0;e<n.length;e++)o.push(n[e].toString());o.length>0&&t.targeting_keys.push({key:r,value:o})}}return t})()):t},i=function(e){try{let n=!1;window.addEventListener("blur",(function(){if(n){const n=c[e];n&&f()&&t.track("SlotClicked",n)}})),document.getElementById(e).addEventListener("mouseover",(function(){n=!0})),document.getElementById(e).addEventListener("mouseout",(function(){n=!1}))}catch(e){}};googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().forEach((function(e){const n=e.getResponseInformation();if(n){const o=e.getSlotElementId(),a={advertiser_id:(0,s.ke)(n.advertiserId),campaign_id:(0,s.ke)(n.campaignId),line_item_id:(0,s.ke)(n.lineItemId),creative_id:(0,s.ke)(n.creativeId),is_empty:!1,service_name:"publisher_ads",slot:r(e)};c[o]=a,m()&&(t.track("SlotRendered",Object.assign(Object.assign({},a),g()?{rendered_timestamp:Date.now()}:{})),g()&&p.push(a)),i(o)}})),googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){const n=e,o=n.slot.getSlotElementId(),a={advertiser_id:(0,s.ke)(n.advertiserId),campaign_id:(0,s.ke)(n.campaignId),line_item_id:(0,s.ke)(n.lineItemId),creative_id:(0,s.ke)(n.creativeId),is_empty:n.isEmpty,service_name:n.serviceName,slot:r(e.slot)};if(n.size){const[e,t,...r]=n.size;"number"==typeof e&&"number"==typeof t&&(a.width=e,a.height=t)}c[o]=a,m()&&(t.track("SlotRendered",Object.assign(Object.assign({},a),g()?{rendered_timestamp:Date.now()}:{})),g()&&p.push(a)),i(o)})),l("track_slot_viewable",!1)&&googletag.pubads().addEventListener("impressionViewable",(function(e){const n=e.slot.getResponseInformation();n&&t.track("SlotViewable",{advertiser_id:(0,s.ke)(n.advertiserId),campaign_id:(0,s.ke)(n.campaignId),line_item_id:(0,s.ke)(n.lineItemId),creative_id:(0,s.ke)(n.creativeId),service_name:e.serviceName,slot:r(e.slot)})}))})),window.addEventListener("message",(function(e){try{const n=JSON.parse(e.data);if(n.permutive_type&&"google_ad_click"===n.permutive_type){const e=n.data.ad_unit_path,r=(0,s.ke)(n.data.creative_id);let i;Object.keys(c).forEach((t=>{void 0!==c[t].slot&&c[t].slot.ad_unit_path===e&&c[t].creative_id===r&&(i=c[t])})),i=i||{line_item_id:(0,s.ke)(n.data.line_item_id),advertiser_id:(0,s.ke)(n.data.advertiser_id),campaign_id:(0,s.ke)(n.data.order_id),creative_id:(0,s.ke)(r),is_empty:!1},f()&&t.track("SlotClicked",i)}}catch(e){}}),!1)}))};class w{constructor(e){this.trackedTargetingLimitMetric=!1,this.trackedRenderedSlots=p,this._internals=e._internals,this.logger=e.logger,this.api=e.api;const t=this._internals.getExternalData(a);this.liveSegments=t?JSON.parse(t):[],this.cleanRoomSegments=this.getCachedCleanRoomSegments(),this.eligibleSegments={};const n=this._internals.state.activationManager.getSpecializedActivations("dfp");for(let e=0;e<n.dfp.length;e++){const t=n.dfp[e];this.eligibleSegments[t]=t}for(const e in n.dfp_legacy)if(n.dfp_legacy.hasOwnProperty(e)){const t=n.dfp_legacy[e];this.eligibleSegments[e]=t}const r=this._internals.queryManager.userSegments.getAllAsList();this.updateSegments(this.filterSegments(r)),this._internals.messages.emit("permutive:dfp:ready"),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe((()=>{const e=this._internals.queryManager.userSegments.getAllAsList();this.updateIfNecessary(e)}))),this._internals.messages.on("permutive:cleanroom:db:updated",(e=>{this.cleanRoomSegments=e,this.updateWithCurrent()})),this._internals.messages.on("permutive:reset",this._internals.makeSafe((()=>{this._internals.removeExternalData(a),this._internals.deleteCookie(a),this.liveSegments=[]})))}getCachedCleanRoomSegments(){var e,t;const n=null!==(e=JSON.parse(this._internals.getExternalData("_pcrdbs")))&&void 0!==e?e:[],o=null!==(t=JSON.parse(this._internals.getExternalData("_pcrprs")))&&void 0!==t?t:[];return(0,r.G0)(i.Eq)(n)(o)}updateIfNecessary(e){const t=this.filterSegments(e);(0,s.cO)(t,this.liveSegments)||this.updateSegments(t)}updateWithCurrent(){this.updateSegments(this.liveSegments)}updateSegments(e){var t;const n=e.map(String).concat(this.cleanRoomSegments);if(0===n.length)return void this.logger.debug("DFP has no targeting values, skipping update");this.logger.debug("DFP is updating with targeting values",n),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],this.trackedTargetingLimitMetric||(this.adTargetingTruncatedListener=null!==(t=this.adTargetingTruncatedListener)&&void 0!==t?t:({slot:e})=>{const t=(0,s.g8)(e,"getContentUrl");if(!t||"function"!=typeof t)return;t().endsWith("&trunc=1")&&(this.logger.debug("DFP content URL has been truncated!"),this.trackTargetingLimitExceeded(),googletag.pubads().removeEventListener("slotRenderEnded",this.adTargetingTruncatedListener),delete this.adTargetingTruncatedListener)},googletag.pubadsReady&&googletag.pubads().addEventListener("slotRenderEnded",this.adTargetingTruncatedListener)),window.googletag.cmd.push((()=>{const e=googletag.pubads().getTargeting("permutive")||[],t=(0,r.uK)((e=>Object.values(this.eligibleSegments).map(String).concat(this.cleanRoomSegments).concat("rts").includes(e)))(e).left,i=n.concat(t).concat("rts");this.logger.debug("DFP setting GPT targeting to",i),googletag.pubads().setTargeting("permutive",i)}));let i=JSON.stringify(n);this._internals.setExternalData(a,i),l("sync_segments_cookie",!1)&&this.api.segmentSync({key:a,value:i}),this.liveSegments=e,this.logger.debug("DFP live segments updated to",this.liveSegments)}trackTargetingLimitExceeded(){this.trackedTargetingLimitMetric||(this._internals.metrics.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),this.trackedTargetingLimitMetric=!0,this.logger.debug("DFP has exceeded targeting limit"))}filterSegments(e){return e.filter((e=>e in this.eligibleSegments)).map((e=>this.eligibleSegments[e]))}}},1361:(e,t,n)=>{n.r(t),n.d(t,{load:()=>a,FacebookPixelV2Addon:()=>c});var r=n(5090);const i="facebookPixelAddonLoadingtime",o="facebookPixelAddonInitStart",s="facebookPixelAddonInitEnd",a=(e,t,n)=>{performance.mark(o),(0,r.a4)((()=>{(()=>{performance.mark(s),performance.measure(i,o,s);const e=performance.getEntriesByName(i)[0].duration;n.metrics.track({name:"sdk_addon_init_duration_seconds",value:e,labels:{addon:"facebook_pixel_v2"}})})(),t.addon("facebook_pixel_v2",{})}),(()=>"undefined"!=typeof fbq),{waitTimeInMs:1e3,maxAttempts:3})};class c{constructor(e){this.permutive=e.permutive,this._internals=e._internals;const t=this._internals.state.getPermutiveData("addon:facebook_pixel_v2")||!1,n=this._internals.queryManager.userSegments.getAllAsMap(),r=this._internals.state.activationManager.getActivations("facebook_pixel_v2"),i=!t;for(let e=0;e<r.length;e++){const t=r[e],o=t.segmentCode;this.permutive.trigger(t.segmentCode,"",(e=>{this.firePixel(e.result?"PermutiveSegmentEntry":"PermutiveSegmentExit",t)})),i&&o in n&&this.firePixel("PermutiveSegmentEntry",t)}i&&this._internals.state.setPermutiveData("addon:facebook_pixel_v2",!0),this._internals.messages.on("permutive:reset",(()=>{this._internals.state.setPermutiveData("addon:facebook_pixel_v2",!1)}))}firePixel(e,t){fbq("trackCustom",e,{segment_id:t.segmentCode}),t.trackImpression()}}},718:(e,t,n)=>{n.r(t),n.d(t,{load:()=>r,OverlaysAddon:()=>i});const r=(e,t,n)=>{e.unshift({functionName:"addon",arguments:["overlays",{}]})};class i{constructor(e){const t=this;this.permutive=e.permutive,this._internals=e._internals,this.activations=this._internals.state.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let e=0;e<this.activations.length;e++){const n=this.activations[e],r=n.config,i=this.buildOverlayCss(r,e);document.head.insertAdjacentHTML("beforeend",i);const o=this.buildOverlayBody(r,e);document.body.insertAdjacentHTML("beforeend",o);const s=`permutive-overlay-${e}`,a=document.getElementById(s),c=a.getElementsByClassName("close")[0],u=a.getElementsByClassName("content")[0],l=()=>{a.style.visibility="hidden",a.style.opacity="0"},d=e=>{u.contains(e.target)||(l(),a.removeEventListener("click",d))};c.addEventListener("click",l),a.addEventListener("click",d);[].slice.call(a.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){n.trackConversion({useBeacon:!0})}))}));const m=a.getElementsByTagName("form")[0];m&&m.addEventListener("submit",(function(e){e.preventDefault(),n.trackConversion({success:function(){m.submit()}})}));const f=function(e,n){t.showOverlay(e),n.trackImpression()};n.activateEveryTime()?this.permutive.segment(n.segmentCode,this._internals.makeSafe((e=>{e?f(s,n):this.permutive.trigger(n.segmentCode,"result",(function(e){e.result&&f(s,n)}))}))):n.activateOnEntry()?this.permutive.trigger(n.segmentCode,"result",this._internals.makeSafe((function(e){e.result&&f(s,n)}))):n.activateOnExit()&&this.permutive.trigger(n.segmentCode,"result",this._internals.makeSafe((function(e){e.result||f(s,n)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const n=this._internals.config.windowKey;let r="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(r='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):r=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",r).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`),n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},r=t.getElementsByTagName("img");if(r.length>0){let t=0;const i=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<r.length)?(t+=1,setTimeout(i,500)):n()};i()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},2404:(e,t,n)=>{n.r(t),n.d(t,{load:()=>o,RubiconSspAddon:()=>s});var r=n(5090);const i="_prubicons",o=(e,t,n)=>{e.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class s{constructor(e){this._internals=e._internals;const t=this._internals.getExternalData(i);this.liveSegments=t?JSON.parse(t):[],this.eligibleSegments={};const n=this._internals.state.activationManager.getSpecializedActivations("rubicon_ssp");for(let e=0;e<n.length;e++)this.eligibleSegments[n[e]]=!0;const r=this._internals.queryManager.userSegments.getAllAsList();this.updateIfNecessary(r),this._internals.messages.on("permutive:segments:updated",(()=>{const e=this._internals.queryManager.userSegments.getAllAsList();this.updateIfNecessary(e)})),this._internals.messages.on("permutive:reset",this._internals.makeSafe((()=>{localStorage.removeItem(i),this.liveSegments=[]})))}updateIfNecessary(e){const t=this.filterSegments(e);(0,r.cO)(t,this.liveSegments)||this._internals.setExternalData(i,JSON.stringify(t)),this.liveSegments=t}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}},7926:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{load:()=>load,ScriptRunnerAddon:()=>ScriptRunnerAddon});const load=(e,t,n)=>{e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this._internals=options._internals,this.network=options.network,this.activations=this._internals.state.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],run=activation=>{const script=activation.config.script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e.message="Error running custom script: "+e.message,this.network.error(e,this._internals.state.userId)}};activation.activateEveryTime()?this.permutive.segment(activation.segmentCode,(e=>{e?run(activation):this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result&&run(activation)}))})):activation.activateOnEntry()?this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result&&run(activation)})):activation.activateOnExit()&&this.permutive.trigger(activation.segmentCode,"result",(function(e){e.result||run(activation)}))}}}},2586:(e,t,n)=>{n.r(t),n.d(t,{load:()=>r,PixelAddon:()=>i});const r=(e,t,n)=>{e.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class i{constructor(e){const t=this;this._internals=e._internals,this.latestStateByDomain=this._internals.state.getPermutiveData("addon:tracking_pixel")||{},this.activations=this._internals.state.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.segmentCode,r=t.config.pixel_url,i=this.extractPixelType(r);t.activateOnEntry()?(i in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[i]={}),this.eligibleSegmentsForEntries[i][n]=t):t.activateOnExit()&&(i in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[i]={}),this.eligibleSegmentsForExits[i][n]=t)}const r=this._internals.queryManager.userSegments.getAllAsList();n&&this._internals.makeSafe((()=>this.firePixelsIfNecessary(r))),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe((()=>{const e=this._internals.queryManager.userSegments.getAllAsList();t.firePixelsIfNecessary(e)}))),this._internals.messages.on("permutive:reset",this._internals.makeSafe((()=>{t.latestStateByDomain={},this._internals.state.setPermutiveData("addon:tracking_pixel",{})})))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys(Object.assign(Object.assign({},this.eligibleSegmentsForEntries),this.eligibleSegmentsForExits)),n={},r=this.eligibleSegmentsForEntries,i=this.eligibleSegmentsForExits;t.forEach((t=>{n[t]=n[t]||[];for(let o=0;o<e.length;o++){const s=e[o];(r[t]&&r[t][s]||i[t]&&i[t][s])&&n[t].push(e[o])}})),t.forEach((e=>{var t,o;const s=n[e]||[],a=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let n=0;n<s.length;n++){const i=s[n];if(-1===a.indexOf(i)){const n=r[e]&&r[e][i];(null===(t=null==n?void 0:n.activateOnEntry)||void 0===t?void 0:t.call(n))&&this.firePixel(n)}}for(let t=0;t<a.length;t++){const n=a[t];if(-1===s.indexOf(n)){const t=i[e]&&i[e][n];(null===(o=null==t?void 0:t.activateOnExit)||void 0===o?void 0:o.call(t))&&this.firePixel(t)}}})),this.latestStateByDomain=n,this._internals.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){(new Image).src=e.config.pixel_url,e.trackImpression()}}},7791:(e,t,n)=>{n.r(t),n.d(t,{load:()=>r,TwitterAddon:()=>i});const r=(e,t,n)=>{e.push({functionName:"addon",arguments:["twitter_pixel",{}]})};class i{constructor(e){const t=this;this._internals=e._internals,this.firedSegments=this._internals.state.getPermutiveData("addon:twitter_pixel")||{},this.activations=this._internals.state.activationManager.getActivations("twitter_pixel");const n=0===Object.keys(this.firedSegments).length;this.eligibleSegments={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.segmentCode;this.eligibleSegments[n]=t}n&&this.firePixelsIfNecessary(this._internals.queryManager.userSegments.getAllAsList()),this._internals.messages.on("permutive:segments:updated",(()=>{t.firePixelsIfNecessary(this._internals.queryManager.userSegments.getAllAsList())})),this._internals.messages.on("permutive:reset",(()=>{t.firedSegments={},this._internals.state.setPermutiveData("addon:twitter_pixel",{})}))}firePixelsIfNecessary(e){for(let t=0;t<e.length;t++){const n=e[t];n in this.eligibleSegments&&!(n in this.firedSegments)&&(this.firePixel(this.eligibleSegments[n]),this.firedSegments[n]=1)}this._internals.state.setPermutiveData("addon:twitter_pixel",this.firedSegments)}firePixel(e){(new Image).src=`https://analytics.twitter.com/i/adsct?txn_id=${e.config.audience_tag_id}&p_id=Twitter`,e.trackImpression()}}},6362:(e,t,n)=>{n.r(t),n.d(t,{load:()=>l,WebAddon:()=>d});var r=n(5090),i=n(6567),o=n(5506),s=n(479);const a=["mousemove","click","scroll"],c=["email","tel","submit","reset","button","file","password","radio","checkbox"],u=["email","e-mail","password","tel","telephone","phone"],l=(e,t,n)=>{e.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class d{constructor(e){this.dirtyState=!1,this.initialised=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.webAddonConfig=(new o.A).getConfigByKey("web"),this.engagementEdgeOnly=this.webAddonConfig("engagement_edge_only",!0),this.segmentTransitionEdgeOnly=this.webAddonConfig("segment_transition_edge_only",!0),this.trackPageviewEngagement=this.webAddonConfig("track_pageview_engagement",!0),this.trackPageviewComplete=this.webAddonConfig("track_pageview_complete",!0),this.trackFormSubmission=this.webAddonConfig("track_form_submission",!0),this.trackLinkClick=this.webAddonConfig("track_link_click",!0),this.addAlchemyTaxonomy=this.webAddonConfig("add_alchemy_taxonomy",!1),this.addAlchemyEntities=this.webAddonConfig("add_alchemy_entities",!1),this.prebidAggregated=this.webAddonConfig("prebid_aggregated",!1),this.slotRenderedAggregated=this.webAddonConfig("slotrendered_aggregated",!1),this.pageviewCompleteTimeoutDuration=6e5,this.hasPageviewCompleteFired=!1,this.permutive=e.permutive,this._internals=e._internals,this.graphql=e.graphql,this.context=e.context,this.eventInterval=e.eventInterval||5,this.logger=e.logger,this._internals.customProperties.overrideCustomProps(e.page||{}),this.sendPageviewEvent(),(e.dirtyEvents||a).map((e=>{window.addEventListener(e,(()=>{this.dirtyState=!0,this.trackPageviewComplete&&this.resetTimeout()}))})),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners,!1),this.trackPageviewEngagement&&(this.timerHandle=this.registerEngagementInterval(this.eventInterval)),this.trackPageviewComplete&&(this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration),(0,r.aq)((()=>this.hasPageviewCompleteFired?null:this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion)),navigator.userAgent)),this.initialised=!0}sendPageviewEvent(){const e=Object.assign(Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),{}),this.enrichmentProperties(this.context.isArticle)),this._internals.customProperties.getCustomProps()),t={success:()=>{this.initialised||this._internals.metrics.trackTimeSinceInit("sdk_first_event_tracked_task_duration_seconds",{})}};this.permutive.track("Pageview",e,t).then((e=>{this._internals.messages.emit("permutive:event:pageview",e)}))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}sendEngagementEvent(e){const{engaged_time:t,total_engaged_time:n,completion:r,total_completion:i}=this.updateState(e),o=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:t,total_engaged_time:n},this._internals.customProperties.getCustomProps()),{completion:r,total_completion:i});this.permutive.track("PageviewEngagement",o)}sendPageviewCompleteEvent(e,t,n=!0){var r,i,o,s;const a=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},this._internals.customProperties.getCustomProps()),this.enrichmentProperties(this.context.isArticle)),{aggregations:Object.assign(Object.assign(Object.assign({PageviewEngagement:Object.assign({engaged_time:e},{completion:t})},this.segmentTransitionEdgeOnly?{SegmentEntry:Array.from(this._internals.queryManager.segmentEntryQueryCodes),SegmentExit:Array.from(this._internals.queryManager.segmentExitQueryCodes)}:{}),this.prebidAggregated?{PrebidBids:null===(i=null===(r=this._internals.addons)||void 0===r?void 0:r.prebid)||void 0===i?void 0:i.trackedBids}:{}),this.slotRenderedAggregated?{SlotsRendered:null===(s=null===(o=this._internals.addons)||void 0===o?void 0:o.dfp)||void 0===s?void 0:s.trackedRenderedSlots}:{})});this.permutive.track("PageviewComplete",a,{useBeacon:n}),this.hasPageviewCompleteFired=!0}reset(e){this.trackPageviewComplete&&(this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion,!1),this.hasPageviewCompleteFired=!1),this._internals.state.viewId=(0,r.k$)(),this._internals.customProperties.overrideCustomProps(e.page||{}),this.totalCompletion=0,this.totalEngagedTime=0,(0,s.h)("watson",{logger:this.logger,_internals:this._internals,context:this.context,graphql:this.graphql}).then((()=>this.graphql.run())).then((()=>{this.sendPageviewEvent(),this.trackPageviewEngagement&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.eventInterval))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==c.indexOf(e.type.toLowerCase())||-1!==u.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}enrichmentProperties(e){return Object.assign(Object.assign(Object.assign(Object.assign({},e&&this.addAlchemyTaxonomy?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&this.addAlchemyEntities?{entity_names:"$alchemy_entity_names"}:{}),{classifications_watson:{taxonomy_labels:"$taxonomy_labels"}}),{})}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.sendEngagementEvent(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=n=>e(n)?(0,i.G)(n):n.parentElement?e(n.parentElement)?(0,i.G)(n.parentElement):t(n.parentElement):i.YP;this.trackFormSubmission&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>{e.addEventListener("submit",this._internals.makeSafe(this.sendFormSubmissionEvent.bind(this)))})),this.trackLinkClick&&document.body.addEventListener("click",(e=>{if(e.target instanceof Element){const n=t(e.target);return(0,i.g_)((()=>{}),(t=>this.sendLinkClickEvent(t,((e,t)=>!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,t))))(n)}}))}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e}setPageviewCompleteTimeout(e){return window.setTimeout((()=>this.sendPageviewCompleteEvent(this.totalEngagedTime,this.totalCompletion,!1)),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration)}}},6384:(e,t,n)=>{n.r(t),n.d(t,{DemographicSegmentsV2:()=>s,load:()=>a});var r=n(3735),i=n(6567),o=n(5090);class s{constructor(e,t,n){this.config=e,this.api=t,this.internals=n}cloudSegmentation(){const e=this.createFeatureVector();return(0,i.EQ)((0,r.a9)(Promise.resolve()),(e=>{const t=Object.keys(this.config).map((e=>parseInt(e))).filter((e=>{var t;const n=(0,i.fS)((()=>0))((0,i.ij)(null===(t=this.config[e])||void 0===t?void 0:t.sampling_rate));return this.shouldBeSampled(this.internals.state.userId,n)}));if(0==t.length)return Promise.resolve();{const n={target_segments:t,features:e};return this.api.inferDemographicSegmentsV2(n).then((e=>{const n=t.map((t=>[t.toString(),{result:{result:e.includes(t)}}])),r=(0,o.m8)(...n);this.internals.queryManager.trackCloudSegmentResults(r)})).catch((e=>this.internals.network.error(`Error while calling demographic/infer endpoint: got ${e}`)))}}))(e)}shouldBeSampled(e,t){if(t>=0&&t<=1){const n=Math.round(100*t);return Math.abs((0,o.vp)(e))%101<n}return!1}createFeatureVector(){var e,t,n,r,o;const s=new Date,a=this.internals.state.getClient(),c=a.user_agent||"",[u,l]=this.internals.enrichers.enrich([{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},!0]);return l?(0,i.G)({referrer:a.referrer,domain:a.domain,device_type:this.userAgentToDeviceType(c),browser_type:this.userAgentToBrowserType(c),isp:null===(e=u.isp_info)||void 0===e?void 0:e.isp,hour_of_day:s.getHours(),day_of_week:s.getDay(),geo_info:{continent:null===(t=u.geo_info)||void 0===t?void 0:t.continent,country:null===(n=u.geo_info)||void 0===n?void 0:n.country,province:null===(r=u.geo_info)||void 0===r?void 0:r.province,city:null===(o=u.geo_info)||void 0===o?void 0:o.city}}):i.YP}userAgentToDeviceType(e){return e.includes("iPad")||e.includes("Tablet")?"Tablet":e.includes("Phone")||e.includes("Mobile")?"Mobile":"Desktop"}userAgentToBrowserType(e){return e.includes("Firefox")?"Firefox":e.includes("CriOS")||e.includes("Chrome")?"Chrome":e.includes("MSIE")||e.includes("Trident")?"IE":e.includes("iPhone")?"iPhone Safari":e.includes("iPad")?"iPad Safari":e.includes("Opera")?"Opera":e.includes("BlackBerry")?"BlackBerry":e.includes("Android")?"Android":e.includes("Safari")?"Safari":null}}const a=({_internals:e,api:t})=>{const n=new s({10000029:{},10000030:{},10000031:{},10000032:{},10000033:{},10000034:{}},t,e);e.messages.on("permutive:graphql:ready",(e=>n.cloudSegmentation()))}},9372:(e,t,n)=>{n.d(t,{b:()=>r,J:()=>i});class r{}class i{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.replacementMap)}enrich(e){const t=[{},!0];for(let n=0;n<Object.keys(e[0]).length;n++){const r=Object.keys(e[0])[n],i=e[0][r];switch(!0){case"string"==typeof i&&"$"===i[0]:const[e,n]=this.isPropertyReplaceable(i);t[0][r]=e?n:i,t[1]=!!e&&t[1];break;case null!==i&&"object"==typeof i&&i.constructor===Object:const o=this.enrich([i,t[1]]);t[0][r]=o[0],t[1]=t[1]&&o[1];break;default:t[0][r]=i}}return t}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},479:(e,t,n)=>{n.d(t,{h:()=>ne,Y:()=>re});var r=n(655),i=n(7341),o=(n(4268),n(3735)),s=n(9384),a=n(4870),c=n(2751),u=n(5605),l=function(e){return function(t){return Object.keys(t).sort(e.compare)}};c.Df;var d={};function m(e){return function(t){var n={};for(var r in t)s.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function f(e){return m((function(t,n){return e(n)}))}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return g(c.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length,a=0;a<s;a++){var c=o[a];i=t(c,i,r[c])}return i}}}function p(e){if("compare"in e){var t=l(e);return function(e){return function(n){return function(r){for(var i=e.empty,o=t(r),s=o.length,a=0;a<s;a++){var c=o[a];i=e.concat(i,n(c,r[c]))}return i}}}}return p(c.Df)(e)}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return h(c.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length-1;s>=0;s--){var a=o[s];i=t(a,r[a],i)}return i}}}function w(e){return T(c.Df)(e)}var _=function(e,t){return(0,o.zG)(e,f(t))},y=function(e){var t=x(e);return function(e,n,r){return(0,o.zG)(e,t(n,r))}},b=function(e){return function(t){var n=P(e)(t);return function(e,t){return(0,o.zG)(e,n(t))}}},v=function(e){var t=M(e);return function(e,n,r){return(0,o.zG)(e,t(n,r))}},k=function(e){var t=g(e);return function(e,n,r){return(0,o.zG)(e,t(n,r))}},E=function(e){var t=p(e);return function(e){var n=t(e);return function(e,t){return(0,o.zG)(e,n(t))}}},q=function(e){var t=h(e);return function(e,n,r){return(0,o.zG)(e,t(n,r))}},S=function(e){var t=O(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,o.ls)(o.SK,t))}}},T=function(e){var t=S(e);return function(e){var n=t(e);return function(e){return n(e,o.yR)}}},O=function(e){return function(t){var n=l(e);return function(e,r){var i=n(e);if(0===i.length)return t.of(d);for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}};function x(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=g(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return x(c.Df).apply(void 0,e)}function P(e){if("compare"in e){var t=p(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return P(c.Df)(e)}function M(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=h(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return M(c.Df).apply(void 0,e)}var I=function(e){var t={};for(var n in e)if(s.e$.call(e,n)){var r=e[n];s.pC(r)&&(t[n]=r.value)}return t},D=function(e){var t={},n={};for(var r in e)if(s.e$.call(e,r)){var i=e[r];s.nM(i)?t[r]=i.left:n[r]=i.right}return(0,a.s4)(t,n)},C="ReadonlyRecord";var A={URI:C,map:_},j=((0,i.OV)(A),{URI:C,compact:I,separate:D}),L=(y(c.Df),b(c.Df),v(c.Df),y(c.Df),b(c.Df),v(c.Df),k(c.Df),E(c.Df),q(c.Df),{URI:C,map:_,reduce:y(c.Df),foldMap:b(c.Df),reduceRight:v(c.Df),traverse:S(c.Df),sequence:w});y(c.Df),b(c.Df),v(c.Df),k(c.Df),E(c.Df),q(c.Df),S(c.Df),O(c.Df),(0,u.BL)(L,j),(0,u.Fj)(L,j),y(c.Df),b(c.Df),v(c.Df),S(c.Df);y(c.Df),b(c.Df),v(c.Df),S(c.Df),k(c.Df),E(c.Df),q(c.Df),O(c.Df);var R=function(e){return function(t){return Object.keys(t).sort(e.compare)}},U=R(c.Df);function N(e){return w(e)}var z=_,G=y,B=b,K=v,W=k,$=E,F=q,H=S,Y=function(e){return function(t){var n=R(e);return function(e,r){var i=n(e);if(0===i.length)return t.of({});for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}};var J=I,Q=D,V="Record";var Z={URI:V,map:z},X=((0,i.OV)(Z),{URI:V,compact:J,separate:Q}),ee=(G(c.Df),B(c.Df),K(c.Df),G(c.Df),B(c.Df),K(c.Df),W(c.Df),$(c.Df),F(c.Df),{URI:V,map:z,reduce:G(c.Df),foldMap:B(c.Df),reduceRight:K(c.Df),traverse:H(c.Df),sequence:N});G(c.Df),B(c.Df),K(c.Df),W(c.Df),$(c.Df),F(c.Df),H(c.Df),Y(c.Df),(0,u.BL)(ee,X),(0,u.Fj)(ee,X),G(c.Df),B(c.Df),K(c.Df),H(c.Df),G(c.Df),B(c.Df),K(c.Df),H(c.Df),W(c.Df),$(c.Df),F(c.Df),Y(c.Df);const te=(0,n(6745).H)([[{name:"geoip",import:Promise.resolve().then(n.bind(n,3659))}],[{name:"watson",import:Promise.resolve().then(n.bind(n,3205))}]]),ne=(e,{logger:t,_internals:n,context:i,graphql:o})=>(0,r.mG)(void 0,void 0,void 0,(function*(){const r=yield te[e];return r?(t.log(`Registering enricher ${e}`),r.load({logger:t,_internals:n,context:i,graphql:o})):t.log(`Failed to register enricher ${e}, it is not enabled!`)})),re=e=>{const t=U(te).map((t=>ne(t,e)));return Promise.all(t)}},3659:(e,t,n)=>{n.r(t),n.d(t,{GraphQLGeoIP:()=>s,load:()=>a});var r=n(5090),i=n(9372);class o extends i.b{constructor(e){super(),this.replacementMap={$ip_geo_info:e.geo,$ip_isp_info:e.isp,$ip_address:e.ip,$ip_address_hash:e.ip_hash}}}class s{constructor(e){this.resource="geoip",this.query=()=>`geoip { ${[this.config.includeGeo?"geo { continent country city province postal_code }":"",this.config.includeISP?"isp { isp organization autonomous_system_number autonomous_system_organization }":"",this.config.includeIP?"ip":"",this.config.includeIPHash?"ip_hash":""].join(" ")} }`,this.config=e}}const a=({_internals:e,context:t,graphql:n})=>{const i="enricher:geoip",a=e=>{e.isp&&(t.isp=e.isp.isp,t.organization=e.isp.organization,t.autonomous_system_number=e.isp.autonomous_system_number,t.autonomous_system_organization=e.isp.autonomous_system_organization),e.geo&&(t.continent=e.geo.continent,t.country=e.geo.country,t.city=e.geo.city,t.province=e.geo.province,t.postal_code=e.geo.postal_code)},c=e.state.getPermutiveData(i);if(c&&c.session_id===e.sessionManager.getSessionId())a(c.data),e.enrichers.register(new o(c.data));else{const t={includeGeo:(0,r.g8)({classifications_watson:{categories_enabled:!0,properties_to_hide:["classifications_watson"],std_segments_enabled:!0,event_enrichment_enabled:!1},geoip:{}},"geoip","include_geo")||!0,includeISP:(0,r.g8)({classifications_watson:{categories_enabled:!0,properties_to_hide:["classifications_watson"],std_segments_enabled:!0,event_enrichment_enabled:!1},geoip:{}},"geoip","include_isp")||!0,includeIPHash:(0,r.g8)({classifications_watson:{categories_enabled:!0,properties_to_hide:["classifications_watson"],std_segments_enabled:!0,event_enrichment_enabled:!1},geoip:{}},"geoip","include_ip_hash")||!0,includeIP:(0,r.g8)({classifications_watson:{categories_enabled:!0,properties_to_hide:["classifications_watson"],std_segments_enabled:!0,event_enrichment_enabled:!1},geoip:{}},"geoip","include_ip")||!1};n.register(new s(t)).then((t=>{a(t),e.state.setPermutiveData(i,{session_id:e.sessionManager.getSessionId(),data:t}),e.enrichers.register(new o(t))})).catch((t=>e.network.error(`Error while registering the geoip enricher: got ${t}`)))}}},3205:(e,t,n)=>{n.r(t),n.d(t,{enumerateAllValidHierarchies:()=>c,GraphQLWatson:()=>u,load:()=>l});var r=n(5090),i=n(9372),o=n(276),s=n(2751);class a extends i.b{constructor(e){super(),this.replacementMap={$alchemy_concepts:(0,r.g8)(e,"concepts")||"$alchemy_concepts",$alchemy_entities:(0,r.g8)(e,"entities")||"$alchemy_entities",$alchemy_keywords:(0,r.g8)(e,"keywords")||"$alchemy_keywords",$alchemy_taxonomy:(0,r.g8)(e,"taxonomies")||"$alchemy_taxonomy",$alchemy_document_emotion:(0,r.g8)(e,"emotion","document","emotion")||"$alchemy_document_emotion",$alchemy_document_sentiment:(0,r.g8)(e,"sentiment","document")||"$alchemy_document_sentiment",$alchemy_taxonomy_labels:c(e.taxonomies)||"$taxonomy_labels",$alchemy_entity_names:e.entities.map((e=>e.text))||"$alchemy_entities_names",$taxonomy_labels:c(e.taxonomies)||"$taxonomy_labels"}}}function c(e){const t=(0,o.xH)(e.filter(Boolean).map((e=>(e=>{const t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/"+t.slice(0,n+1).join("/")))})(e.label))));return(0,o.jj)(s.Eq)(t)}class u{constructor(){this.resource="classification",this.query=()=>`\n      classification(url: "${window.location.href}") {\n        url\n        updated\n        entities {\n          text\n          relevance\n        }\n        keywords {\n          text\n          relevance\n        }\n        concepts {\n          text\n          relevance\n        }\n        taxonomies {\n          label\n          score\n        }\n        emotion {\n          document {\n            emotion {\n              anger\n              disgust\n              fear\n              joy\n              sadness\n            }\n          }\n        }\n        sentiment {\n          document {\n            label\n            score\n          }\n        }\n      }\n    `}}const l=({logger:e,_internals:t,context:n,graphql:r})=>{r.register(new u).then((e=>{var r;r=e,n.watson=r,t.enrichers.register(new a(e))})).catch((n=>{e.log(`Error while registering the watson enricher: got ${n}`),t.metrics.track({name:"sdk_watson_classification_fail_count",value:1,labels:{}})}))}},3739:(e,t,n)=>{n.r(t),n.d(t,{AppNexusIdentityProvider:()=>s,load:()=>a});var r=n(6567),i=n(3735),o=n(5090);class s{constructor(e,t,n){this._internals=e,this.network=t,this.api=n,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["0","-1"]}getId(){return(0,o.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>({type:"attempted",result:(0,i.zG)((0,r.DT)((e=>e.uid&&this.isValidAlias(e.uid)))(e),(0,r.UI)((e=>e.uid)))})),(e=>(0,i.zG)(this.network.error(`Failed to retrieve third-party identity for ${this.tag}. Got ${e}`,this._internals.state.userId),(e=>({type:"attempted",result:r.YP})))))}reset(){return Promise.resolve()}isValidAlias(e){return-1===this.invalidAliases.indexOf(e)}}const a=({_internals:e,network:t,api:n})=>Promise.resolve((0,r.G)(new s(e,t,n)))},1998:(e,t,n)=>{n.r(t),n.d(t,{PxidIdentityProvider:()=>s,load:()=>a});var r=n(5090),i=n(3735),o=n(6567);class s{constructor(e,t,n){this._internals=e,this.network=t,this.api=n,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://67cbf6c5-d926-407b-a684-a0606570ff08.${this._internals.config.pxidHost}/${this._internals.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return(0,r.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>({type:"attempted",result:(0,o.ij)(e.uid)})),(e=>(0,i.zG)(this.network.error(`Failed to retrieve third-party identity for ${this.tag}. Got ${e}`,this._internals.state.userId),(e=>({type:"attempted",result:o.YP})))))}reset(){return(0,r.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const a=({_internals:e,network:t,api:n})=>Promise.resolve((0,o.G)(new s(e,t,n)))},8799:(e,t,n)=>{n.d(t,{X:()=>o});var r=n(655);const i=(0,n(6745).H)([[{name:"std_segments",import:Promise.resolve().then(n.bind(n,5840))}]]),o=e=>{var{logger:t}=e,n=(0,r._T)(e,["logger"]);const o=Object.entries(i).map((([e,i])=>(0,r.mG)(void 0,void 0,void 0,(function*(){return t.log(`Registering segment ${e}`),(yield i).load(Object.assign({logger:t},n))}))));return Promise.all(o)}},5840:(e,t,n)=>{n.r(t),n.d(t,{PermutiveAudienceMarketLocalStorage:()=>i,load:()=>o});var r=n(655);class i{constructor(e,t){this.segmentsWithPAM=e,this.internals=t,this.PUSH_TO_MARKETPLACE_STD_SEGMENTS_KEY="_ppam"}storeStdSegmentsToLocalStorage(e){const t=[];for(const n in e)n in this.segmentsWithPAM&&t.push(parseInt(n));const n=JSON.stringify(t);this.internals.setExternalData(this.PUSH_TO_MARKETPLACE_STD_SEGMENTS_KEY,n)}}const o=e=>{var{_internals:t}=e,o=(0,r._T)(e,["_internals"]);[Promise.resolve().then(n.bind(n,6384))].forEach((e=>e.then((e=>e.load(Object.assign({_internals:t},o))))));const s=new i({},t);t.messages.on("permutive:std_segments:updated",(e=>{s.storeStdSegmentsToLocalStorage(e)}))}},4762:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(3735),i=n(6567);class o{constructor(e,t,n,r){this.urls=e,this.config=t,this.network=n,this._internals=r}graphql(e){return this.reqWithMetrics("sdk_http_graphql_seconds")({url:this.urls.getEndpointUrl("/graphql",i.YP),method:"POST",payload:{query:e},contentType:"text/plain",dataType:"json",withCredentials:!0})}identify(e,t){return this.reqWithMetrics("sdk_http_identify_seconds")({url:this.urls.getEndpointUrl("/identify",(0,i.G)(this.config.apiVersion)),method:"POST",payload:{user_id:e,aliases:t},contentType:"text/plain",dataType:"json",withCredentials:!0})}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",(0,i.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}track(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!1});return this.reqWithMetrics("sdk_http_events_seconds")({url:n,method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics("sdk_http_events_seconds")({url:t,method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}tpdUsage(e){return this.reqWithMetrics("sdk_http_tpd_usage_seconds")({url:this.urls.getEndpointUrl("/tpd/usage",(0,i.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}reset(){return this.reqWithMetrics("sdk_http_reset_seconds")({url:this.urls.getEndpointUrl("/reset",(0,i.G)(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(){return this.reqWithMetrics("sdk_http_models_seconds")({url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(){return this.reqWithMetrics("sdk_http_models_seconds")({url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,r,o){return this.reqWithMetrics("sdk_http_reset_seconds")({url:this.urls.getEndpointUrl("/state",(0,i.G)("v1.0"),[["fetch_unseen",JSON.stringify(o)]]),method:"POST",payload:{group_id:e,event_source_id:t,state:JSON.stringify(n),last_seen_offset:r},contentType:"text/plain",dataType:"json",withCredentials:!1})}inferDemographicSegmentsV1(e){return this.inferDemographicSegmentsImpl("/demographic/infer",e)}inferDemographicSegmentsV2(e){return this.inferDemographicSegmentsImpl("/demographic/infer/v2.0",e)}cleanRoom(e,t){return this.network.req({url:this.urls.getAdvertiserEndpointUrl("/segment",(0,i.G)(this.config.advertiserApiVersion),[["new-session",e.toString()]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){return this.network.req({url:`https://${this._internals.config.cdnBaseUrl}/67cbf6c5-d926-407b-a684-a0606570ff08-amp.json`,withCredentials:!1,dataType:"json",method:"GET"})}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}inferDemographicSegmentsImpl(e,t){return this.network.req({url:this.urls.getEndpointUrl(e,(0,i.G)(this.config.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e){const t=this._internals.metrics.startTimer(e,{});return n=>this.network.req(n).then((n=>(0,r.zG)(this._internals.metrics.stopTimer(e,t),(e=>n))))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:r}=t,o=Array.isArray(e),s=!n;return this.urls.getEndpointUrl(o?"/batch/events":"/events",(0,i.G)(this.config.apiVersion),[["enrich",JSON.stringify(s)],["sdkp",JSON.stringify(!r)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/67cbf6c5-d926-407b-a684-a0606570ff08-models.bin`;case"json":return`${t}/models/67cbf6c5-d926-407b-a684-a0606570ff08-models.json`}}}},550:(e,t,n)=>{n.d(t,{kJ:()=>r,XO:()=>i,mh:()=>o,bk:()=>s,sv:()=>a});const r=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},c(e)),i=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},c(e)),o=(e,t)=>Object.assign({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},c(t)),s=e=>void 0!==e.request_id,a=e=>void 0!==e.properties,c=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},8110:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(6567);class i{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t,n=[]){return this.getUrl("base",e,t,n)}getAdvertiserEndpointUrl(e,t,n=[]){return this.getUrl("adv",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrl(e,t,n,i){const o="base"===e?"":"/adv",s=(0,r.g_)((()=>""),(e=>`/${e}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${o}${s}${t}`;return this.makeUrlWithQueryParams(a,i.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((([e,t])=>`${e}=${t}`)).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}},9215:(e,t,n)=>{n.d(t,{P:()=>s});var r=n(5090),i=n(70),o=n(998);class s{constructor(e,t){this.api=e,this._internals=t,this.queries={},this.promises={}}register(e){const t=(0,r.b2)();return this.queries[e.resource]=e.query(),this.promises[e.resource]=t,t.promise}run(){if(0===Object.keys(this.queries).length)return Promise.resolve();const e=(0,o.G)("graphql_req"),t=(0,r.b2)();return this.api.graphql(this.toQueryString(this.queries)).then((n=>{Object.keys(this.promises).forEach((e=>{const t=n.data[e];t?this.promises[e].resolve(t):this.promises[e].reject(`Could not find a graphql response for resource ${e}`)})),e.finish(),t.resolve()})).catch((e=>{console.error(e),Object.keys(this.promises).forEach((e=>this.promises[e].reject())),t.reject(e)})),t.promise.then((()=>{this._internals.messages.emit("permutive:graphql:ready",(0,i.F2)(void 0))})).catch((e=>{this._internals.messages.emit("permutive:graphql:ready",(0,i.t$)(e))})).finally((()=>{this.queries={},this.promises={}}))}toQueryString(e){return`{ ${Object.keys(e).map((t=>e[t])).join(" ")} }`}}},7558:(e,t,n)=>{n.d(t,{b:()=>M});var r=n(5090),i=n(7084);class o{constructor(e,t={}){this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.description=t.description||"",this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var s=n(6567);const a=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))})),c={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,lotame:95};var u=n(3735),l=n(998),d=n(550),m=n(5506);const f=(e,t,n)=>n?"deferred":g(e.name,t),g=(e,t)=>P.has(e)?"memoryOnly":x.has(e)?"never":t?"immediate":"response",p=({event:e,requestData:t,requestOptions:n,queryManager:r,eventsBatch:i,stateSync:o,metrics:s})=>Promise.all([E(e,s,r),i.add(t,n,"immediate")]).then((([e])=>o.sync(e))),h=({event:e,metrics:t,queryManager:n})=>E(e,t,n).then(u.Q1),w=({requestData:e,requestOptions:t,queryManager:n,eventsCache:r,eventHandler:i,api:o,metrics:s})=>o.track(e,!1).then((i=>b(i,e,t,r,s,n))).then((({event:e,error:t})=>q(i,e,t))),_=({event:e,isEventFullyEnriched:t,requestData:n,api:r,eventHandler:i})=>Promise.all([r.trackBeacon(n,t),q(i,e,s.YP)]).then(u.Q1),y=({requestData:e,requestOptions:t,eventsBatch:n})=>n.add(e,t,"never"),b=(e,t,n,r,i,o)=>(0,d.bk)(e)?v(e,t,n):k(e,t,n,r,i,o),v=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:new Date};return(0,u.zG)(n.error(e.error.message),(t=>Promise.resolve({event:r,error:(0,s.G)(e)})))},k=(e,t,n,r,i,o)=>{const a=(0,d.sv)(e)?(0,d.kJ)(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):(0,d.mh)(e,t);return E(a,i,o).then((e=>(0,u.zG)(n.success(a),(e=>r.add(a,{persistOnDisk:!0})),(e=>({event:a,error:s.YP})))))},E=(e,t,n)=>{const r=t.startTimer("sdk_events_querylanguage_seconds",{});return n.process(e,!0).then((e=>(0,u.zG)(t.stopTimer("sdk_events_querylanguage_seconds",r),(t=>e))))},q=(e,t,n)=>{e.newEvent((0,d.XO)(t),(0,s.fS)((()=>null))(n))},S=(new m.A).getConfigByKey("web"),T=S("engagement_edge_only",!0),O=S("segment_transition_edge_only",!0),x=new Set(["ThirdPartySegments","SlotRendered","Reaction"]),P=new Set([...T?["PageviewEngagement"]:[],...O?["SegmentEntry","SegmentExit"]:[]]);class M{constructor(e,t,n,r,i,o,s,a){this.logger=e,this.eventsBatch=t,this.api=n,this.graphql=r,this.eventHandler=i,this._internals=o,this.network=s,this.context=a,this.initialisedAddons=[]}identify(e){this.logger.log("<call> identify",e);const t=(0,r.b2)(),n=this._internals.identities.parseCustomerDefinedIdentities(e),s=Object.assign(Object.assign({},this._internals.identities.getIdentitiesMap()),n.reduce(((e,{tag:t,id:n,priority:r,expiry:i})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},void 0!==r?{priority:r}:{}),void 0!==i?{expiry:i}:{})})),{})),a=Object.values(s).map((e=>e.id)),c=this._internals.identities.getPrioritizedIdentities(s);if("string"==typeof e&&(0,i.Bt)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",a,window.location.hostname,this._internals.state.userId))return t.resolve(),t.promise;return this._internals.state.taskQueue.add(new o((e=>{this.logger.log("<task> identify ",n);const r=this._internals.state.userId;this.api.identify(this._internals.state.userId,c).then((i=>i.user_id===r?(0,u.zG)(this.logger.log("<done> identify ",n),(t=>e()),(e=>t.resolve())):this._internals.state.reset().then((e=>(0,u.zG)(this._internals.state.setUserId(i.user_id),(e=>this._internals.state.eventsCache.reset()),(e=>this.context.user_id=i.user_id),(e=>this._internals.stateSync.resetSync())))).then((r=>{this.logger.log("<done> identify",n),e(),t.resolve()})))).then((e=>this._internals.identities.setIdentities(n)))}),{wait_prev:!0,block_next:!0})),t.promise}on(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!1})}once(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!0})}track(...e){const[t,n,i]=[e[0],e[1]||{},e[2]||{}],s=(0,l.G)("track_event");this.logger.log("<call> track",t);const a=(0,r.b2)();if(!this.api)return this.network.error("The API hasn't been loaded."),a.reject(),a.promise;const c=this._internals.sessionManager.getSessionId(),u=this._internals.state.viewId,d={success:i.success||(e=>{}),error:i.error||((e,t)=>{})};return this._internals.state.taskQueue.add(new o((e=>{var r;this.logger.log("<task> track",t);const[o,l]=this._internals.enrichers.enrich([n,!0]);this._internals.metrics.track({name:l?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const m=Object.assign(Object.assign({},o),{client:this._internals.state.getClient()}),g={user_id:this._internals.state.userId,name:t,segments:this._internals.queryManager.userSegments.getAllAsList(),properties:m,session_id:c,view_id:u},b={name:t,properties:m,session_id:c,view_id:u,time:new Date};return((e,t)=>{switch(f(e.event,e.isEventFullyEnriched,t)){case"immediate":return p(e);case"memoryOnly":return h(e);case"response":return w(e);case"deferred":return _(e);case"never":return y(e)}})({event:b,requestData:g,isEventFullyEnriched:l,requestOptions:d,queryManager:this._internals.queryManager,stateSync:this._internals.stateSync,eventsCache:this._internals.state.eventsCache,eventHandler:this.eventHandler,metrics:this._internals.metrics,eventsBatch:this.eventsBatch,api:this.api},null!==(r=i.useBeacon)&&void 0!==r&&r).then((t=>{this.logger.log("<done> track",b.name),a.resolve(b),e(),s.finish()})).catch((e=>{d.error(e),this.network.error(e,this._internals.state.userId)}))}))),a.promise}trigger(e,t,n){const i=(0,r.b2)();this.logger.log("<call> trigger",e),this._internals.triggerListeners=this._internals.triggerListeners||[];return this._internals.state.taskQueue.add(new o((t=>{this.logger.log("<task> trigger",e);const r=this._internals.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))}));this._internals.triggerListeners.push(r),this.logger.log("<done> trigger",e),t()}))),i.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,r.b2)();this.logger.log("<call> segment",e);return this._internals.state.taskQueue.add(new o((r=>{var i;this.logger.log("<task> segment",e);const o=this._internals.queryManager.stateMap.value[e];o&&(t((null===(i=null==o?void 0:o.result)||void 0===i?void 0:i.result)||!1),n.resolve()),this.logger.log("<done> segment",e),r()}))),n.promise}segments(e,t="all"){const n=(0,r.b2)();this.logger.log("<call> segments");return this._internals.state.taskQueue.add(new o((r=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),n.resolve(i),this.logger.log("<done> segments ("+t+")"),r()};"dfp"===t?this._internals.messages.once("permutive:dfp:ready",(()=>{i(this._internals.addons.dfp.liveSegments)})):i(this._internals.queryManager.userSegments.getAllAsList())}))),n.promise}reset(){return Promise.all([this.api.reset(),this._internals.identities.reset(),this._internals.state.reset(),this._internals.stateSync.reset(),this._internals.queryManager.bootstrap([])]).then((([e])=>(0,u.zG)(this._internals.state.setUserId(e.id),(e=>this._internals.state.eventsCache.reset())))).then((()=>{this._internals.messages.emit("permutive:reset")})).catch((e=>{this.network.error(`Error resetting internals. Got ${e}`)}))}addon(e,t){if(-1===this.initialisedAddons.indexOf(e)){this.initialisedAddons.push(e);const r=Object.assign(Object.assign({},t),{_internals:this._internals,permutive:this,api:this.api,graphql:this.graphql,network:this.network,context:this.context,logger:this.logger});switch(e){case"web":Promise.resolve().then(n.bind(n,6362)).then((e=>this._internals.addons.web=new e.WebAddon(r)));break;case"publishers":0;break;case"overlays":Promise.resolve().then(n.bind(n,718)).then((e=>this._internals.addons.overlays=new e.OverlaysAddon(r)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,7926)).then((e=>this._internals.addons.scriptrunner=new e.ScriptRunnerAddon(r)));break;case"dfp":Promise.resolve().then(n.bind(n,2613)).then((e=>this._internals.addons.dfp=new e.DFPAddon(r)));break;case"smart":case"nativo":case"freewheel":case"facebook_pixel":0;break;case"facebook_pixel_v2":Promise.resolve().then(n.bind(n,1361)).then((e=>this._internals.addons.facebook_pixel_v2=new e.FacebookPixelV2Addon(r)));break;case"eyeota_pixel":case"rubicon":0;break;case"rubicon_ssp":Promise.resolve().then(n.bind(n,2404)).then((e=>this._internals.addons.rubicon_ssp=new e.RubiconSspAddon(r)));break;case"aol":0;break;case"tracking_pixel":Promise.resolve().then(n.bind(n,2586)).then((e=>this._internals.addons.tracking_pixel=new e.PixelAddon(r)));break;case"twitter_pixel":Promise.resolve().then(n.bind(n,7791)).then((e=>this._internals.addons.twitter_pixel=new e.TwitterAddon(r)));break;case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":0;break;case"clean_room":Promise.resolve().then(n.bind(n,8726)).then((e=>this._internals.addons.clean_room=new e.CleanRoomAddon(r)));break;case"gam_log":case"tradedesk":0;break;case"ddp":case"dbm":case"appnexus":case"pubmatic":case"lotame":0}}else"web"===e&&!0!==t.auto_init&&this._internals.addons.web.reset(t)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this._internals.addons.tradedesk=new e.Addon(t);break;case"ddp":this._internals.addons.ddp=new e.Addon(t);break;case"appnexus":this._internals.addons.appnexus=new e.Addon(t);break;case"pubmatic":this._internals.addons.pubmatic=new e.Addon(t);break;case"lotame":this._internals.addons.lotame=new e.Addon(t)}},i=t=>t[c[e.key]]?n():(0,u.Q1)();return(e=>{const t=e.__tcfapi,n={type:"aborted"},i=["tcloaded","useractioncomplete"];return t?(0,r.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&i.includes(null==e?void 0:e.eventStatus))))).then((0,s.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})})(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,u.Q1)();case"loaded":return(0,u.zG)((t=e.data).gdprApplies?(0,s.G)(t.vendor.consents):s.YP,(0,s.g_)(n,i))}var t}))}ready(e,t="initialised"){const n=(0,r.b2)(),i=()=>{e(),n.resolve()};switch(t){case"initialised":this._internals.isReady?i():this._internals.messages.on("permutive:ready",i);break;case"realtime":this._internals.isRealtime?i():this._internals.messages.once("permutive:realtime",i)}return n.promise}}},7281:(e,t,n)=>{n.d(t,{Oc:()=>l,l9:()=>d});var r=n(1828),i=n(3735),o=n(70);class s{constructor(){}setItem(){}getItem(){return null}}class a{constructor(){}setItem(e,t){return(0,i.zG)(JSON.stringify(t),(t=>window.sessionStorage.setItem(e,t)))}getItem(e){return(0,i.zG)(window.sessionStorage.getItem(e),JSON.parse)}}const c=e=>(0,o.tS)((e=>1===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Maps not supported")))((e=>"function"==typeof e.Map?(0,o.F2)(new e.Map([["a",1]])):(0,o.t$)("Maps not supported"))(e)),u=e=>(0,o.tS)((e=>2===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Sets not supported")))((e=>"function"==typeof e.Set?(0,o.F2)(new e.Set([1,2])):(0,o.t$)("Sets not supported"))(e)),l=e=>(0,i.zG)((0,r.gz)(o.G5)(c(e),u(e),(e=>{const t=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"];return(0,o.Y3)((()=>{const t="_permutive_ls_test";e.localStorage.setItem(t,t),e.localStorage.removeItem(t)}),(n=>e.localStorage&&0===e.localStorage.remainingSpace||t.some((e=>-1!==String(n).indexOf(e)))?"localStorage quota exceeded":"localStorage not supported"))})(e),(e=>e.Worker&&e.Blob?(0,o.F2)(null):(0,o.t$)("WebWorkers not supported"))(e)),(e=>(0,o.UI)(i.Q1)(e))),d=e=>{const t=(0,o.Y3)((()=>{const t="_permutive_ls_test";e.sessionStorage.setItem(t,t),e.sessionStorage.getItem(t),e.sessionStorage.removeItem(t)}),(e=>"sessionStorage not supported"));return(0,i.zG)(t,(0,o.g_)((()=>new s),(()=>new a)))}},2052:(e,t,n)=>{n.d(t,{T:()=>l,g:()=>d});var r=n(3735),i=n(6567),o=n(276),s=n(5151),a=n(1763),c=n(70),u=n(803);const l=e=>"object"==typeof e&&(0,r.zG)(window.localStorage.setItem("permutive-consent",JSON.stringify(e)),(t=>{var n;return e.opt_in&&(null===(n=e.token)||void 0===n?void 0:n.length)>0})),d=(e,t,n,d,m)=>{window[m].consent=((e,t,n,i,o)=>s=>(0,r.zG)(l(s),(r=>r?(0,u.H)(e,t,n,i,o)():null)))(e,t,n,d,m);const f=(0,a.fS)((e=>(0,a.fS)((e=>(0,s.of)(!1)))((0,a.Yo)(r.Q1)((()=>{const e=JSON.parse(window.localStorage.getItem("permutive-consent"));return e?(0,i.G)(l(e)):i.YP})()))))((0,a.Yo)(r.Q1)((()=>{const e=(0,o.Ew)((function(e){return"consent"===e.functionName}))(t.q);return(0,i.UI)((e=>l(e.arguments[0])))(e)})()));return t.config.consentRequired?(0,s.UI)((e=>e?(0,c.F2)(!0):(0,c.t$)("No consent to run on the page")))(f):(0,a.F2)(!0)}},2771:(e,t,n)=>{n.d(t,{eS:()=>d,IK:()=>m,BF:()=>l,N7:()=>u});var r=n(7084),i=n(5090),o=n(998),s=n(655);class a{constructor(e,t){this.userId=e,this.aliases=t,this.resource="userIdentify",this.query=()=>{const e=this.aliases.map((({id:e,tag:t,priority:n})=>`{id: "${e}", tag: "${t}", priority: ${n}}`)).join(",");return`\n      userIdentify: user(user_id: "${this.userId}") {\n        identity(aliases: [${e}]) {\n          identify {\n            id\n          }\n        }\n      }\n    `}}}const c=({_internals:e,logger:t,network:n,q:r,graphql:i})=>(0,s.mG)(void 0,void 0,void 0,(function*(){const{userId:o}=e.state,c=()=>r.findIndex((e=>"identify"===e.functionName)),u=t=>{if(t<0)return[];const n=r.splice(t,1)[0];return e.identities.parseCustomerDefinedIdentities(n.arguments[0]).concat(u(c()))},l=u(c()),d=e.identities.getIdentitiesMap(),m=l.reduce(((e,{tag:t,id:n,priority:r,expiry:i})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},i?{expiry:i}:{}),void 0!==r?{priority:r}:{})})),{}),f=Object.assign(Object.assign({},d),m);t.log("Starting identification... Identities are:",f);const g=e.identities.getPrioritizedIdentities(f),p=yield i.register(new a(o,g)).then((n=>{return r={user_id:n.identity.identify.id},(0,s.mG)(void 0,void 0,void 0,(function*(){const n=r.user_id;return n===o?{identityChanged:!1}:(t.log(`Got different user id from API: ${n}`),yield e.state.reset(),e.state.setUserId(n),yield e.state.eventsCache.reset(),{identityChanged:!0,userId:n})}));var r})).catch((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){return n.error(`Couldn't set identity for user ${o}. Got ${e}`,o),{identityChanged:!1}})))).finally((()=>{e.identities.setIdentities(Object.entries(f).map((([e,{id:t,priority:n,expiry:r}])=>Object.assign(Object.assign({tag:e,id:t},r?{expiry:r}:{}),void 0!==n?{priority:n}:{}))))}));return e.messages.emit("permutive:user:ready"),t.log("<done> init identity ",p),p}));function u(e,t,n,i){return(0,r.Bt)(e,t,n.identities.getPrioritizedIdentities(n.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,n.state.userId)?i.reset():Promise.resolve()}function l(e,t,n,r,i,s,a){const u=c({_internals:t,logger:n,network:r,graphql:i,q:e});return t.thirdParty.segments(),"amp"===s?(window.setTimeout((()=>i.run().then((()=>{a.finish(),t.stateSync.syncWithUnseen()}))),2500),null===t.getExternalData("permutive-loaded")&&(u.then((e=>{e.identityChanged||t.metrics.track({name:"sdk_amp_id_not_synced_total",value:1,labels:{}})})),t.setExternalData("permutive-loaded","1"))):i.run().then((()=>{a.finish()})),u.catch((e=>({identityChanged:!1}))).then((e=>e.identityChanged?function(e,t){e.log("Identity has changed");const n=(0,o.G)("ss_reset_sync");return t.stateSync.resetSync().then((()=>n.finish()))}(n,t):function(e,t){e.log("Identity hasn't changed");const n=t.queryManager.hasNewOrModifiedQueries,r=(0,o.G)(`qm_bootstrap_${n}`);return t.state.eventsCache.resetIfNeeded().then((()=>n?t.state.eventsCache.all().then((e=>t.queryManager.bootstrap(e))):t.queryManager.bootstrap([]))).then((()=>r.finish()))}(n,t)))}function d(e,t){return e.context.user_id=t.state.userId,Promise.resolve()}function m(e,t,n){const r=(0,o.G)("tpd_models");return Promise.all([t.thirdParty.segments(),n.getModels()]).then((([n,s])=>{e.log("Loaded TPD segments and lookalike models",n,s),r.finish();const a=(0,o.G)("update_env_tpd_and_models");return t.queryManager.updateEnvironment({segments:(0,i.PM)({"1p":t.queryManager.userSegments.getAllAsMap()},n),lookalikeModels:s}).then((()=>a.finish()))}))}},6785:(e,t,n)=>{function r(e){e.queryManager.setAsReady(),e.messages.emit("permutive:api:ready"),e.metrics.track({name:"sdk_local_storage_byte_total",value:e.state.getStateSizeInBytes(),labels:{}}),e.metrics.track({name:"sdk_query_states_byte_total",value:e.queryManager.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>r})},3368:(e,t,n)=>{n.d(t,{$o:()=>p,uU:()=>w,je:()=>h});var r=n(70),i=n(3735),o=n(6567),s=n(3629);class a{constructor(e,t){this.urls=e,this.config=t,this.errorLogPrefix="[Permutive]",this.clientErrorsSent=0}req(e){return this.reqImpl(e).then((e=>(0,i.MZ)(e)))}reqWithBeacon({url:e,payload:t}){return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(t))}error(e,t){return this.config.sendClientErrors&&this.clientErrorsSent<3?this.errorNetwork(e,t):(0,i.zG)(this.errorLog(e),(e=>Promise.resolve()))}errorNetwork(e,t){var n,r,i,a,c,u,l,d,m,f,g;const p=e instanceof Error?{error_message:null!==(r=null===(n=null==e?void 0:e.message)||void 0===n?void 0:n.toString())&&void 0!==r?r:"",stack_trace:null!==(a=null===(i=null==e?void 0:e.stack)||void 0===i?void 0:i.toString())&&void 0!==a?a:"",additonal_details:""}:{},h={user_id:null!=t?t:"",domain:null!==(u=null===(c=null===window||void 0===window?void 0:window.location)||void 0===c?void 0:c.hostname)&&void 0!==u?u:"",url:(0,s.bk)(null===(l=null===window||void 0===window?void 0:window.location)||void 0===l?void 0:l.href),referrer:(0,s.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(d=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==d?d:"",error_message:null!==(m=p.error_message)&&void 0!==m?m:"",stack_trace:null!==(f=p.stack_trace)&&void 0!==f?f:"",additional_details:null!==(g=p.additonal_details)&&void 0!==g?g:String(e)};return this.req({url:this.urls.getEndpointUrl("/internal/errors",(0,o.G)(this.config.apiVersion)),method:"POST",payload:h,contentType:"text/plain",dataType:"text",withCredentials:!1})}errorLog(e){var t;return null===(t=null===window||void 0===window?void 0:window.console)||void 0===t?void 0:t.error(this.errorLogPrefix,e)}reqImpl(e){const{url:t,dataType:n,contentType:i,method:o,withCredentials:s,timeout:a}=e;return new Promise(((c,u)=>{const l=new XMLHttpRequest,d="POST"===e.method?JSON.stringify(e.payload):null;l.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";u(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===n){const e=this.responseText?(0,r.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,r.F2)(null);(0,r.g_)(u,c)(e)}else c("text"===n?this.responseText:this.response)},l.onerror=()=>u(new Error("Network request failed")),l.ontimeout=()=>u(new Error("Network request timed out")),l.open(o,t,!0),i&&l.setRequestHeader("content-type",i),l.timeout=a||l.timeout,l.withCredentials=s||l.withCredentials,l.responseType="binary"===n?"arraybuffer":l.responseType,l.send(d)}))}}var c=n(5090);const u="__permutive.",l="__permutiveConfigQueryParams";const d={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",advertiserApiVersion:"v2",apiProtocol:"https",loggingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,s._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setFullYear(e.getFullYear()+3),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataKey:"permutive-data",permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataTPDKey:"permutive-data-tpd",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"67cbf6c5-d926-407b-a684-a0606570ff08.partner.permutive.app",consentRequired:!1,sdkType:"stable",localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500},production:{},development:{apiProtocol:"http",loggingEnabled:!0,sendClientErrors:!1}},m=e=>{const t={loggingEnabled:!0,sendClientErrors:!0,consentRequired:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((r,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return Object.assign(Object.assign({},r),{[i]:t})}if(n.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?r:Object.assign(Object.assign({},r),{[i]:t})}return Object.assign(Object.assign({},r),{[i]:e[i]})}),{})},f=e=>Object.entries(e).reduce(((e,[t,n])=>{if(!(0===t.indexOf(u)))return e;const r=t.replace(u,"");return[...e,[r,n]]}),[]),g=(e,t,n)=>{var r;const o=(0,i.zG)(t,f,(e=>(0,c.m8)(...e)),m),s=null!==(r=d[e.environment])&&void 0!==r?r:{};return(0,c.PM)(d.default,s,e,((e,t)=>{const n=t.getItem(l),r=(0,c.PM)(n,e);return t.setItem(l,r),r})(o,n))},p=e=>{var t,n;const o="67cbf6c5-d926-407b-a684-a0606570ff08",s=void 0!==(null===(t=e[o])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[o])||void 0===n?void 0:n.config)?o:"permutive";return(0,i.zG)(e[s],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((e=>({tag:e,key:s}))))},h=({tag:e,key:t},n,r)=>Object.assign(Object.assign({},e),{config:g(Object.assign(Object.assign({},e.config),{windowKey:t}),n,r)}),w=(e,t)=>new a(e,t)},6112:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(1763),i=n(376);const o=(0,r.Y3)((()=>{const e=(0,i.e)();return e.postMessage({type:"noop"}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},9848:(e,t,n)=>{n.d(t,{LA:()=>a});var r=n(998),i=n(7209),o=n(276),s=n(5090);function a(e,t,n,a,d){const m=function(e){const t=(0,o.uK)((e=>-1!==u.indexOf(e.functionName)))(e),n=t.right,r=t.left.filter((e=>"consent"!==e.functionName)),a=(0,i.Zt)(((e,t)=>c(e)&&c(t)?(0,s.lW)(l).compare(e.arguments[0],t.arguments[0]):(0,s.lW)(u).compare(e.functionName,t.functionName))),d=(0,o.DY)(a)(n);return d.concat(r)}(e),f=(0,r.G)("queued_methods");m.forEach((e=>{if(e.functionName in n){n[e.functionName].apply(a,e.arguments)}else d.error(`Function "permutive.${e.functionName}" does not exist.`,t.state.userId)})),f.finish()}const c=e=>"addon"===e.functionName,u=["identify","trigger","addon","track"],l=["dfp","appnexus_adserver","web"]},4253:(e,t,n)=>{n.d(t,{y:()=>s});class r{track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}var i=n(5090);class o{constructor(e,t,n,r){this.sdkInitTimestamp=e,this.api=t,this._internals=n,this.permutive=r,this.sendFrequencyInSeconds=5,this.environment=["amp","ampscript"].includes("web")?"amp":"web",this.pendingMetrics=[],this.pendingTimers={},this.permutive.ready((()=>{window.setInterval(this.processPending.bind(this),1e3*this.sendFrequencyInSeconds),(0,i.aq)((()=>{this.processPending.bind(this)}),navigator.userAgent)}),"initialised"),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=performance.now();this.track({name:e,value:(n-this.sdkInitTimestamp)/1e3,labels:t})}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=performance.now();this.track({name:e,value:(r-n.startTime)/1e3,labels:n.labels}),delete this.pendingTimers[t]}}processPending(){this.pendingMetrics.length>0&&this._internals.state.eventsCache.all().then((e=>{this.api.metrics({context:{environment:this.environment,events_count:e.length,segments_count:this._internals.queryManager.userSegments.getAllAsList().length},items:this.pendingMetrics}),this.pendingMetrics=[]}))}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}}function s(e,t,n,i){const s=n.state.getPermutiveData("metricsEnabled"),a=Math.random()<=n.config.metricsSamplingPercentage/100,c=s||a;n.metrics=c?new o(e,t,n,i):new r,n.state.setPermutiveData("metricsEnabled",a)}},803:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK});var fp_ts_Either__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(70),fp_ts_function__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(1763),_core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7084),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8757),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4828),_core_queries_QueryManager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(376),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7738),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2206),_core_state_PermutiveStateSync__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8649),_core_third_party_PermutiveThirdParty__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(1032),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4725),_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(479),_dynamic_std_segments_RegisterSegmentModules__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8799),_utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(9409),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5090),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3629),_PermutiveMethods__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7558),_utils_Trace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(998),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7281),_initialisation_consent__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2052),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3368),_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6112),_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(4253),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(9848),_initialisation_identity__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2771),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(6785),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(4762),_http_graphql_GraphQLQuery__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9215),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8110),_core_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(4165),_core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4314);const sdkInitTimestamp=window.performance.now(),sdkReadySpan=(0,_utils_Trace__WEBPACK_IMPORTED_MODULE_9__.G)("sdk_ready"),initialiseWebSDK=(promiseWorker,tag,urls,network,windowKey)=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.Y3)((()=>{window[windowKey].consent=_initialisation_consent__WEBPACK_IMPORTED_MODULE_10__.T;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_17__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_18__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_18__.bk)(document.referrer)}),createInternalsSpan=(0,_utils_Trace__WEBPACK_IMPORTED_MODULE_9__.G)("internals"),eventHandler=new _utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_19__.b,logger=(0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_20__.SX)(tag.config),namespace=new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_21__.L(tag.config),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_1__.Pe(namespace,logger,tag.config,network),api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_22__.F(urls,tag.config,network,_internals),eventsBatch=new _core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_23__.c(eventHandler,api,_internals),graphql=new _http_graphql_GraphQLQuery__WEBPACK_IMPORTED_MODULE_15__.P(api,_internals),permutiveMethods=new _PermutiveMethods__WEBPACK_IMPORTED_MODULE_8__.b(logger,eventsBatch,api,graphql,eventHandler,_internals,network,context);_internals.state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_3__.u(namespace,logger,_internals,permutiveMethods,context),(0,_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_24__.y)(sdkInitTimestamp,api,_internals,permutiveMethods);const models=new _core_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_25__.p;_internals.stateSync=new _core_state_PermutiveStateSync__WEBPACK_IMPORTED_MODULE_4__.N(api,_internals,models,(0,_core_state_PermutiveStateSync__WEBPACK_IMPORTED_MODULE_4__.e)());const queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4;_internals.queryManager=new _core_queries_QueryManager__WEBPACK_IMPORTED_MODULE_2__.x(logger,_internals,permutiveMethods,promiseWorker,queryManagerTransitionDebounceTime,queryManagerTransitionMaxDebounceTime),_internals.thirdParty=new _core_third_party_PermutiveThirdParty__WEBPACK_IMPORTED_MODULE_26__.X(logger,api,graphql,_internals,permutiveMethods,network),_internals.identities=new _core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_0__.lg(_internals,permutiveMethods,network,api),createInternalsSpan.finish();const permutiveShell=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_17__.PM)(tag,{consent:window[windowKey].consent,q:window[windowKey].q,context,addons:_internals.addons});[].forEach((s=>{(0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_27__.Y3)((()=>eval(s)),(e=>{network.error(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),_internals.state.userId)}))})),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",(()=>{const e=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_17__.PM)(permutiveShell,{identify:permutiveMethods.identify.bind(permutiveMethods),on:permutiveMethods.on.bind(permutiveMethods),once:permutiveMethods.once.bind(permutiveMethods),track:permutiveMethods.track.bind(permutiveMethods),trigger:permutiveMethods.trigger.bind(permutiveMethods),query:permutiveMethods.query.bind(permutiveMethods),segment:permutiveMethods.segment.bind(permutiveMethods),segments:permutiveMethods.segments.bind(permutiveMethods),reset:permutiveMethods.reset.bind(permutiveMethods),ready:permutiveMethods.ready.bind(permutiveMethods),addon:permutiveMethods.addon.bind(permutiveMethods)});window[windowKey]=Object.assign(Object.assign({},e),{q:[]}),_internals.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_13__.LA)(permutiveShell.q,_internals,e,permutiveMethods,network)}));const loadAddonsSpan=(0,_utils_Trace__WEBPACK_IMPORTED_MODULE_9__.G)("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_5__.C)({_internals,logger,network,permutiveMethods,q:permutiveShell.q}),loadAddonsSpan.finish(),(0,_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_6__.Y)({_internals,context,logger,graphql}),(0,_dynamic_std_segments_RegisterSegmentModules__WEBPACK_IMPORTED_MODULE_7__.X)({_internals,context,config:permutiveShell.config,logger,api});const graphQlSpan=(0,_utils_Trace__WEBPACK_IMPORTED_MODULE_9__.G)("graphql");return _internals.identities.prepareThirdPartyIdentities().then((e=>(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_14__.N7)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",_internals,permutiveMethods))).then((e=>(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_14__.BF)(permutiveShell.q,_internals,logger,network,graphql,"web",graphQlSpan))).then((e=>(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_14__.eS)(permutiveShell,_internals))).then((e=>(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_14__.IK)(logger,_internals,models))).then((e=>{(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_28__.R)(_internals),sdkReadySpan.finish()}))}),(e=>`Exception during initialisation. Got ${e}`)),initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_29__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_30__.Oc)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("queryWorker",(()=>_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_12__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("sessionStorage",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.F2)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_30__.l9)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_11__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("queryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.F2)((0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_18__.zM)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("tag",(({partialTagWithKey:e,queryParams:t,sessionStorage:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_11__.je)(e,t,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("urls",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_31__.s(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("network",(({tag:e,urls:t})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_11__.uU)(t,e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.ak)("consent",(({queryWorker:e,partialTagWithKey:t,tag:n,network:r,urls:i})=>(0,_initialisation_consent__WEBPACK_IMPORTED_MODULE_10__.g)(e,n,i,r,t.key))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_16__.tS)((({queryWorker:e,partialTagWithKey:t,tag:n,network:r,urls:i})=>initialiseWebSDK(e,n,i,r,t.key))));initialisationSequence().then((0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_27__.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),fp_ts_function__WEBPACK_IMPORTED_MODULE_29__.Q1))},5090:(e,t,n)=>{n.d(t,{cO:()=>M,a4:()=>w,PQ:()=>P,b2:()=>h,rB:()=>_,fl:()=>T,lW:()=>I,vp:()=>p,G6:()=>O,Gz:()=>E,g8:()=>g,b0:()=>q,PM:()=>f,Fi:()=>x,ke:()=>b,m8:()=>S,aq:()=>v,eu:()=>y,k$:()=>k});var r=n(3735),i=n(6567),o=n(4268),s=n(6017);new Set;var a=function(e){return function(t){for(var n,r=t.values(),i=!1;!i&&!(n=r.next()).done;)i=e(n.value);return i}},c=function(e){return(0,s.ff)(a((0,s.ff)(e)))};function u(e){var t=l(e);return function(n,r){if(void 0===r){var i=u(e);return function(e){return i(e,n)}}return c((function(e){return t(e,r)}))(n)}}function l(e){return function(t,n){if(void 0===n){var r=l(e);return function(e){return r(t,e)}}for(var i,o=n.values(),s=!1;!s&&!(i=o.next()).done;)s=e.equals(t,i.value);return s}}var d=function(e){var t=u(e);return(0,o.f7)((function(e,n){return t(e,n)&&t(n,e)}))};new Set;var m=n(7209);function f(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function g(e,...t){return t.reduce(((e,t)=>e?e[t]:void 0),e)}function p(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function h(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}function w(e,t,n={}){const{waitTimeInMs:o,exponentialBackOff:s,maxAttempts:a}=f({waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},n);let c=0;const u=n=>new Promise((o=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>o((0,i.G)(e)))):(0,r.zG)(c++,(e=>e<a?setTimeout((()=>o(u(n*(s?2:1)))),n):o(i.YP)))))));return u(o)}function _(e){const t=d({equals:(t,n)=>t[0]===n[0]&&e.equals(t[1],n[1])});return(0,o.Uz)((e=>new Set(Object.entries(e))))(t)}function y(e,t){const n=Object.create(null);for(const r of t)n[r]=e[r];return n}function b(e){if("string"==typeof e){const t=+e;if(!isNaN(t))return t}return e}function v(e,t){const n=t=>{if(!r&&t)return r=!0,e()};let r=!1;["blur","visibilitychange"].forEach((e=>{window.addEventListener(e,(()=>n(document.hidden&&function(e){return/Mobi|Android/i.test(e)}(t))))})),["beforeunload","pagehide"].forEach((e=>{window.addEventListener(e,(()=>n(!0)))}))}function k(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function E(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function q(e,t){const n=Object.keys(e),r=n.length,o={};for(let s=0;s<r;s++){const r=n[s],a=t(r,e[r]);(0,i.pC)(a)&&(o[r]=a.value)}return o}function S(...e){const t={},n=e.length;for(let r=0;r<n;r++){const[n,i]=e[r];t[n]=i}return t}function T(e,t){return q(e,((e,n)=>t(e)?(0,i.G)(n):i.YP))}function O(e){return/^((?!chrome|android).)*safari/i.test(e)}function x(e){}function P(e){return new Promise((t=>{setTimeout((()=>{Promise.resolve(e()).then(t)}),0)}))}function M(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function I(e){return(0,m.Zt)(((t,n)=>{const r=e.indexOf(t),i=e.indexOf(n);switch(!0){case-1===r&&-1===i:return 0;case-1!==r&&-1===i:return-1;case-1===r&&-1!==i:return 1;default:return r<=i?-1:1}}))}},998:(e,t,n)=>{n.d(t,{G:()=>r});let r=()=>({spanId:null,finish:()=>({})});window.performance&&window.performance.mark&&(r=e=>{const t="_"+Math.random().toString(36).substr(2,9),n=`permutive_${e}`,r=`${n}${t}_start`;return window.performance.mark(r),{spanId:r,finish:()=>{window.performance.measure(n,r)}}})},9409:(e,t,n)=>{n.d(t,{b:()=>r});class r{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),this.listeners.forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),o=r||i;if(o)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}o&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}},6745:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(276),i=n(3735);const o=e=>(0,i.zG)((0,r.xH)(e),(0,r.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import}))))},7545:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(5090);class i{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e,t=this.timeoutDurationInMilliseconds,n=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,t,n)}scheduleAccumulated(e,t,n=this.timeoutDurationInMilliseconds,r=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,r.aq)(e,navigator.userAgent)}debounce(e,t,n,r){let i,o,s=null==r?void 0:r.empty;return a=>(r&&(s=r.concat(s,a)),new Promise((c=>{i&&window.clearTimeout(i),i=window.setTimeout((()=>{window.clearTimeout(o),o=null,c(e(r?s:a)),s=null==r?void 0:r.empty}),t),o||(o=window.setTimeout((()=>{window.clearTimeout(i),o=null,c(e(r?s:a)),s=null==r?void 0:r.empty}),n))})))}}},3629:(e,t,n)=>{n.d(t,{zM:()=>i,bk:()=>o,_Y:()=>s});var r=n(3735);const i=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n]:r})}),{})},o=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if((null==n?void 0:n.length)>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return(null==t?void 0:t.length)>0?t[0]:(null==r?void 0:r.length)>0?"localhost":""}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(803)})();