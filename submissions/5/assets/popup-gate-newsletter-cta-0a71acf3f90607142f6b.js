/*! For license information please see popup-gate-newsletter-cta-0a71acf3f90607142f6b.js.LICENSE.txt */
(window.webpackJsonp_gp_web_frontend=window.webpackJsonp_gp_web_frontend||[]).push([["popup-gate-newsletter-cta"],{"../../node_modules/js-cookie/src/js.cookie.js":(e,t,n)=>{var o,r;!function(i){if(void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r),!0,e.exports=i(),!!0){var s=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=s,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function r(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var p in i)i[p]&&(c+="; "+p,!0!==i[p]&&(c+="="+i[p].split(";")[0]));return document.cookie=t+"="+n+c}}function s(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var c=i[s].split("="),p=c.slice(1).join("=");n||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var a=t(c[0]);if(p=(o.read||o)(p,a)||t(p),n)try{p=JSON.parse(p)}catch(e){}if(r[a]=p,e===a)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))}))},"./src/ts/components/popup-gate-newsletter/popup-gate-newsletter-cta.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{isSignedUp:()=>p,show:()=>u,popupGateNewsletterCtaComponent:()=>d,init:()=>l});var o=n("../shared-types/frontend/components/newsletter/subscription-status.ts"),r=n("../shared-types/frontend/core/store.ts"),i=n("../../node_modules/js-cookie/src/js.cookie.js"),s=n.n(i),c=n("./src/ts/utils/inview.ts");const p=()=>!!s().get(o.y.SignedUp),a=({popupGateElement:e,clickedLink:t,store:n})=>{e.setAttribute("hidden","false"),e.setAttribute("data-popup-gate-newsletter-redirect-url",t.href),n.dispatch({type:r.U.TrackEvent,payload:{pev2:"newsletter popup gate displayed",events:["event113"]}})},u=({popupGateElement:e,clickedLink:t,store:n})=>{const o=document.querySelector("#inline-placement")||document.querySelector(".anyclip-placement");(null==o?void 0:o.childNodes.length)?(0,c.oO)({element:o,isNotInViewportCallback:()=>{a({clickedLink:t,popupGateElement:e,store:n})}}):a({clickedLink:t,popupGateElement:e,store:n})},d=(e,t,n=document)=>{const o=n.querySelector("#popup-gate-newsletter");return{init:()=>{if(p()||!o||!window.digitalMagazinePage)return{};const n=r=>{if(p())return void e.removeEventListener("click",n);const i=r.target.closest('a[href^="https://digitalarchive.timeout.com/"]');i&&(r.preventDefault(),u({clickedLink:i,popupGateElement:o,store:t}))};return e.addEventListener("click",n),{showPopup:n}}}},l=(e,t)=>{const n=Math.floor(1e4*Math.random());return{listeners:d(e,t).init(),componentId:"popup-gate-newsletter-cta-component-"+n}}},"./src/ts/utils/inview.ts":(e,t,n)=>{"use strict";n.d(t,{oe:()=>o,oO:()=>r,W0:()=>i});const o=e=>{if(!e)return!1;const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,r=t.top<=n&&t.top+t.height>=0,i=t.left<=o&&t.left+t.width>=0;return r&&i};function r({element:e,observerOptions:t={},isInViewportCallback:n,isNotInViewportCallback:o}){new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&n&&(o||t.unobserve(e.target),n(e)),!e.isIntersecting&&o&&(n||t.unobserve(e.target),o(e))})},t).observe(e)}function i(e,t){return e?new Promise(n=>{r({element:e,observerOptions:t,isInViewportCallback:n})}):Promise.reject()}},"../shared-types/frontend/components/newsletter/subscription-status.ts":(e,t,n)=>{"use strict";var o;n.d(t,{y:()=>o}),function(e){e.SignedUp="_TO_Newsletter_SignedUp",e.Dismissed="_TO_Newsletter_Dismissed",e.PageViewCount="_TO_Newsletter_PageViewCount"}(o||(o={}))}}]);